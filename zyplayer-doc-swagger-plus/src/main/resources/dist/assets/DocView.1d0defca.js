import{N as $,r as b,R as ve,o as m,c as T,w as r,a as l,p as u,t as L,x as j,e as R,b as x,F as C,n as O,V as de,W as Pe,P as c,X as be,Y as Se,Z as we,O as ue,y as U,d as xe,$ as ke,Q as Le}from"./vendor.ee21a423.js";import{P as me,a as ce,b as Re,u as Te,x as Ie,m as Oe}from"./unitConvert.c16ab317.js";import{_ as B}from"./main.b335ea75.js";import{g as Ce,z as De}from"./custom.33a00f74.js";let ee=["file","string","integer","long","double","object","number","boolean","ref"];var fe={getRequestParamList(t,n){if(!t)return[];let d=1,e=[];for(let h=0;h<t.length;h++){let o=t[h],s=o.description||"",i=o.type,f=o.format,v=o["x-example"],g,y,a;i==="array"?this.isSchemaRef(o.items)?(g=this.getSchemaRef(o.items),y=this.getParamDefinitions(g,n,d,{},0)):o.schema?this.isSchemaRef(o.schema.items)?(g=this.getSchemaRef(o.schema.items),y=this.getParamDefinitions(g,n,d,{},0)):o.schema.type&&(g=o.schema.type):o.items&&o.items.type?g=o.items.type:this.logMessage("001",i,o):i?ee.indexOf(i)>=0||this.logMessage("003",i,o):o.schema?this.isSchemaRef(o.schema)?(i=this.getSchemaRef(o.schema),y=this.getParamDefinitions(i,n,d,{},0)):o.schema.type?(i=o.schema.type,o.schema.additionalProperties?(a={},y=this.getAdditionalProperties(o.schema.additionalProperties,a,n,d,{},0),f=a.type):o.schema.items?this.isSchemaRef(o.schema.items)?(g=this.getSchemaRef(o.schema.items),y=this.getParamDefinitions(g,n,d,{},0)):o.schema.items.type?g=o.schema.items.type:this.log("0014",i,o):this.log("0011",i,o)):this.logMessage("0013",i,o):o.items&&o.items.type?(i=o.items.type,o.items.additionalProperties?(a={},y=this.getAdditionalProperties(o.items.additionalProperties,a,n,d,{},0),f=a.type):this.logMessage("0012",i,o)):this.logMessage("002",i,o),v&&(s=s?s+"\uFF0C":"",s+="\u4F8B\uFF1A"+v),o.enum&&o.enum.length>0&&(s=s||"\u679A\u4E3E\u7C7B\u578B",s+="\uFF0C\u53EF\u9009\u503C\uFF1A"+o.enum.join("\u3001")),e.push({type:i,key:d,in:o.in,name:o.name,subType:g,required:o.required?"\u662F":"\u5426",format:f,enum:o.enum,example:v,collectionFormat:o.collectionFormat,description:s,additional:a,children:y}),d++}return e},getResponseParamList(t,n){let d=[],e=1;return Object.keys(t).forEach(h=>{let o=t[h],s,i;this.isSchemaRef(o.schema)&&(s=this.getSchemaRef(o.schema),i=this.getParamDefinitions(s,n,e,{},0)),d.push({code:h,type:s,key:e,desc:o.description,schemas:i}),e++}),d},isSchemaRef(t){return!!(t&&(t.originalRef||t.$ref))},getSchemaRef(t){return t.originalRef?t.originalRef:t.$ref&&t.$ref.indexOf("#/definitions/")===0?t.$ref.replace("#/definitions/",""):(this.logMessage("9467","",t),"")},getParamDefinitions(t,n,d,e,h){let o=n[t];if(h>=10||!o||(e[t]=(e[t]||0)+1,e[t]>2))return;let s=[],i=o.type,f=o.properties,v=1;if(i==="object"){let g={};Object.keys(f).forEach(y=>{let a=f[y],_=a.type,k=a.format,P=a.description||"",I=a.example||a["x-example"],w,N,F,J=d+"_"+v,A;Object.keys(g).forEach(D=>{e[D]=void 0}),_==="array"?this.isSchemaRef(a.items)?(w=this.getSchemaRef(a.items),A=this.getParamDefinitions(w,n,J,e,h+1)):a.items&&a.items.type?w=a.items.type:this.logMessage("004",_,a):_==="object"?a.additionalProperties?(N={},A=this.getAdditionalProperties(a.additionalProperties,N,n,J,e,h+1),k=N.type):this.log("0041",_,a):_?ee.indexOf(_)>=0||this.logMessage("006",_,a):this.isSchemaRef(a)?(_=this.getSchemaRef(a),A=this.getParamDefinitions(_,n,J,e,h+1)):this.logMessage("005",_,a),I&&(P=P?P+"\uFF0C":"",P+="\u4F8B\uFF1A"+I),a.items&&a.items.enum&&a.items.enum.length>0&&(F=a.items.enum,P=P||"\u679A\u4E3E\u7C7B\u578B",P+="\uFF0C\u53EF\u9009\u503C\uFF1A"+a.items.enum.join("\u3001")),s.push({type:_,name:y,key:J,subType:w,format:k,description:P,enum:F,additional:N,example:I,children:A}),v++,g[_]=1})}return s.length>0?s:void 0},getAdditionalProperties(t,n,d,e,h,o){if(this.isSchemaRef(t))return n.type=this.getSchemaRef(t),n.children=this.getParamDefinitions(n.type,d,e,h,o+1),n.additional;if(t.additionalProperties)return n.type=t.type,n.additional={},this.getAdditionalProperties(t.additionalProperties,n.additional,d,e,h,o+1);if(t.type==="array")if(n.type=t.type,this.isSchemaRef(t.items)){let s=this.getSchemaRef(t.items),i=this.getParamDefinitions(s,d,e,h,o+1);return n.additional={type:s,children:i},i}else this.logMessage("007","",t);else n.type=t.type,ee.indexOf(n.type)>=0||this.logMessage("008","",t)},log(t,n,d){console.log(t+"-\u9047\u5230\u672A\u5904\u7406\u7684\u7C7B\u578B\uFF0C\u8BF7\u8054\u7CFB\u5F00\u53D1\u4EBA\u5458\u4FEE\u6539\uFF1A"+n,d)},logMessage(t,n,d){console.log(t+"-\u9047\u5230\u672A\u5904\u7406\u7684\u7C7B\u578B\uFF0C\u8BF7\u8054\u7CFB\u5F00\u53D1\u4EBA\u5458\u4FEE\u6539\uFF1A"+n,d),$.error(t+"-\u9047\u5230\u672A\u5904\u7406\u7684\u7C7B\u578B\uFF0C\u8BF7\u8054\u7CFB\u5F00\u53D1\u4EBA\u5458\u4FEE\u6539\uFF1A"+n)}};const qe={props:{docInfoShow:{type:Object,required:!0},requestParamList:{type:Array,required:!0},responseParamList:{type:Array,required:!0}},setup(){return{requestParamListColumns:[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:200},{title:"\u7C7B\u578B",dataIndex:"type",width:150},{title:"\u53C2\u6570\u4F4D\u7F6E",dataIndex:"in",width:100},{title:"\u5FC5\u586B",dataIndex:"required",width:60},{title:"\u8BF4\u660E",dataIndex:"description"}],responseCodeListColumns:[{title:"\u72B6\u6001\u7801",dataIndex:"code",width:100},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"desc"}],responseParamListColumns:[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:250},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"description"}]}}},Ne=["innerHTML"],Je=u("header"),je=u("body"),Ee=u("query"),Ue=u("formData"),Ae=u("-"),Fe={key:0,style:{color:"#f00"}},Ke=u("\u5426"),Ve=u("-"),Me=["innerHTML"],He={key:1,style:{"text-align":"center",padding:"10px 0"}};function Be(t,n,d,e,h,o){const s=b("a-form-item"),i=b("a-tag"),f=b("a-table"),v=b("a-form"),g=ve("highlight");return m(),T(v,{"label-col":{span:4},"wrapper-col":{span:20}},{default:r(()=>[l(s,{label:"\u63A5\u53E3\u5730\u5740"},{default:r(()=>[u(L(d.docInfoShow.url),1)]),_:1}),l(s,{label:"\u8BF4\u660E"},{default:r(()=>[j(R("div",{class:"markdown-body",innerHTML:d.docInfoShow.description},null,8,Ne),[[g]])]),_:1}),l(s,{label:"\u8BF7\u6C42\u65B9\u5F0F"},{default:r(()=>[u(L(d.docInfoShow.method),1)]),_:1}),l(s,{label:"\u8BF7\u6C42\u6570\u636E\u7C7B\u578B"},{default:r(()=>[u(L(d.docInfoShow.consumes),1)]),_:1}),l(s,{label:"\u54CD\u5E94\u6570\u636E\u7C7B\u578B"},{default:r(()=>[u(L(d.docInfoShow.produces),1)]),_:1}),l(s,{label:"\u8BF7\u6C42\u53C2\u6570"},{default:r(()=>[l(f,{dataSource:d.requestParamList,columns:e.requestParamListColumns,size:"small",pagination:!1,defaultExpandAllRows:""},{bodyCell:r(({column:y,text:a,record:_})=>[y.dataIndex==="type"?(m(),x(C,{key:0},[u(L(a)+" ",1),_.subType?(m(),x(C,{key:0},[u("["+L(_.subType)+"]",1)],64)):O("",!0),_.format?(m(),x(C,{key:1},[u("("+L(_.format)+")",1)],64)):O("",!0)],64)):O("",!0),y.dataIndex==="in"?(m(),x(C,{key:1},[a==="header"?(m(),T(i,{key:0,color:"pink"},{default:r(()=>[Je]),_:1})):a==="body"?(m(),T(i,{key:1,color:"red"},{default:r(()=>[je]),_:1})):a==="query"?(m(),T(i,{key:2,color:"orange"},{default:r(()=>[Ee]),_:1})):a==="formData"?(m(),T(i,{key:3,color:"green"},{default:r(()=>[Ue]),_:1})):a?(m(),T(i,{key:5,color:"purple"},{default:r(()=>[u(L(a),1)]),_:2},1024)):(m(),x(C,{key:4},[Ae],64))],64)):O("",!0),y.dataIndex==="required"?(m(),x(C,{key:2},[a==="\u662F"?(m(),x("span",Fe,"\u662F")):a==="\u5426"?(m(),x(C,{key:1},[Ke],64)):(m(),x(C,{key:2},[Ve],64))],64)):O("",!0),y.dataIndex==="description"?(m(),x(C,{key:3},[u(L(a),1)],64)):O("",!0)]),_:1},8,["dataSource","columns"])]),_:1}),l(s,{label:"\u8FD4\u56DE\u7ED3\u679C"},{default:r(()=>[l(f,{dataSource:d.responseParamList,columns:e.responseCodeListColumns,size:"small",pagination:!1},{bodyCell:r(({column:y,text:a,record:_})=>[y.dataIndex==="desc"?(m(),x("div",{key:0,innerHTML:a},null,8,Me)):O("",!0)]),expandedRowRender:r(({record:y})=>[y.schemas?(m(),T(f,{key:0,dataSource:y.schemas,columns:e.responseParamListColumns,size:"small",pagination:!1},{bodyCell:r(({column:a,text:_,record:k})=>[a.dataIndex==="type"?(m(),x(C,{key:0},[u(L(_)+" ",1),k.subType?(m(),x(C,{key:0},[u("["+L(k.subType)+"]",1)],64)):O("",!0),k.format?(m(),x(C,{key:1},[u("("+L(k.format)+")",1)],64)):O("",!0)],64)):O("",!0)]),_:2},1032,["dataSource","columns"])):(m(),x("div",He,"\u65E0\u53C2\u6570\u8BF4\u660E"))]),_:1},8,["dataSource","columns"])]),_:1})]),_:1})}var ze=B(qe,[["render",Be]]);const Qe={props:{result:{type:Object,required:!0},loading:{type:Boolean,required:!0}},components:{CloseOutlined:de,ParamTable:me,ParamBody:ce,aceEditor:Re},setup(t){const{result:n}=Pe(t);let d=c("body"),e=c("format"),h=c("json"),o=c(""),s=c([]),i=c([]),f=c(""),v=c(""),g=c({}),y=c();const a=()=>{e.value==="preview"&&setTimeout(()=>{y.value&&y.value.contentDocument.write(f.value)},0)},_=()=>{if(f.value="",v.value="",t.result.data){if(g.value=t.result.data,t.result.data.headers){s.value=t.result.data.headers;let P=s.value.find(I=>I.name==="Content-Type");P&&P.value&&(P.value.indexOf("text/html")>=0?h.value="html":P.value.indexOf("text/plain")>=0?h.value="text":P.value.indexOf("application/json")>=0?h.value="json":P.value.indexOf("application/xml")>=0||P.value.indexOf("text/xml")>=0?h.value="xml":P.value.indexOf("application/javascript")>=0&&(h.value="javascript"),o.value=h.value)}if(t.result.data.cookies&&(i.value=t.result.data.cookies),t.result.data.data||t.result.data.status===200){v.value=t.result.data.data,f.value=t.result.data.data;try{h.value==="xml"?v.value=Ie(f.value):h.value==="json"?v.value=JSON.stringify(JSON.parse(f.value),null,4):h.value==="javascript"&&(v.value=JSON.stringify(f.value,null,4))}catch{v.value=t.result.data.data}}else{let P=`
// \u8BF7\u6C42\u5931\u8D25\uFF0C\u4EE5\u4E0B\u4E3A\u5C01\u88C5\u7684\u8FD4\u56DE\u503C\u5BF9\u8C61\uFF0C\u4EC5\u4F9B\u53C2\u8003

`;f.value=P+JSON.stringify(t.result.data),v.value=P+JSON.stringify(t.result.data,null,4)}a()}};return _(),be(n,()=>_()),{activePage:d,bodyShowType:e,bodyShowTypeChange:a,unitConvert:Te,bodyShowFormatType:h,bodyShowFormatPreview:o,previewHtmlRef:y,resultData:g,resultHeaders:s,resultCookies:i,resultHeadersColumns:[{title:"KEY",dataIndex:"name"},{title:"VALUE",dataIndex:"value"}],resultCookiesColumns:[{title:"KEY",dataIndex:"name"},{title:"VALUE",dataIndex:"value"}],resultDataInit:P=>{P.setFontSize(16)},resultDataContentOrigin:f,resultDataContentFormat:v,resultDataConfig:{wrap:!0,readOnly:!0,autoScrollEditorIntoView:!0,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,minLines:30,maxLines:30}}}},Xe={key:0,style:{"margin-bottom":"30px"}},Ge={key:0,style:{"margin-bottom":"30px"}},Ye={style:{"margin-bottom":"10px"}},Ze=u("\u683C\u5F0F\u5316"),We=u("\u539F\u59CB\u503C"),$e=u("\u9884\u89C8"),et=u("JSON"),tt=u("HTML"),at=u("XML"),ot=u("JavaScript"),nt=u("TEXT"),rt={key:2},lt={key:0,ref:"previewHtmlRef",width:"100%",height:"570px",style:{border:"0"}},st={class:"status-info-box"},it=u(" \u72B6\u6001\u7801\uFF1A"),dt=u(" \u8017\u65F6\uFF1A"),ut=u(" \u5927\u5C0F\uFF1A"),mt={key:1},ct={style:{color:"#f00"}},ft={class:"status-info-box"},yt=u(" \u8017\u65F6\uFF1A"),ht={key:1,style:{"margin-top":"20px"}},_t={key:2,style:{"margin-top":"20px",color:"#aaa"}};function pt(t,n,d,e,h,o){const s=b("a-radio-button"),i=b("a-radio-group"),f=b("a-select-option"),v=b("a-select"),g=b("ace-editor"),y=b("a-tab-pane"),a=b("a-table"),_=b("a-tabs"),k=b("a-skeleton"),P=b("a-spin"),I=b("a-empty");return d.result.data?(m(),x("div",Xe,[d.result.data.data||d.result.data.status===200?(m(),x("div",Ge,[l(_,{activeKey:e.activePage,"onUpdate:activeKey":n[4]||(n[4]=w=>e.activePage=w),onTabClick:n[5]||(n[5]=()=>{}),style:{padding:"5px 10px 0"}},{rightExtra:r(()=>[R("span",st,[it,R("span",null,L(e.resultData.status||"200"),1),dt,R("span",null,L(e.unitConvert.formatSeconds(e.resultData.useTime||0)),1),ut,R("span",null,L(e.unitConvert.formatFileSize(e.resultData.contentLength||0)),1)])]),default:r(()=>[l(y,{tab:"Body",key:"body",forceRender:""},{default:r(()=>[R("div",Ye,[l(i,{value:e.bodyShowType,"onUpdate:value":n[0]||(n[0]=w=>e.bodyShowType=w),onChange:e.bodyShowTypeChange,size:"small"},{default:r(()=>[l(s,{value:"format"},{default:r(()=>[Ze]),_:1}),l(s,{value:"row"},{default:r(()=>[We]),_:1}),l(s,{value:"preview"},{default:r(()=>[$e]),_:1})]),_:1},8,["value","onChange"]),e.bodyShowType==="format"?(m(),T(v,{key:0,value:e.bodyShowFormatType,"onUpdate:value":n[1]||(n[1]=w=>e.bodyShowFormatType=w),size:"small",style:{"margin-left":"10px",width:"100px"}},{default:r(()=>[l(f,{value:"json"},{default:r(()=>[et]),_:1}),l(f,{value:"html"},{default:r(()=>[tt]),_:1}),l(f,{value:"xml"},{default:r(()=>[at]),_:1}),l(f,{value:"javascript"},{default:r(()=>[ot]),_:1}),l(f,{value:"text"},{default:r(()=>[nt]),_:1})]),_:1},8,["value"])):O("",!0)]),e.bodyShowType==="format"?(m(),T(g,{key:0,value:e.resultDataContentFormat,"onUpdate:value":n[2]||(n[2]=w=>e.resultDataContentFormat=w),onInit:e.resultDataInit,lang:e.bodyShowFormatType,theme:"monokai",width:"100%",height:"100",options:e.resultDataConfig},null,8,["value","onInit","lang","options"])):e.bodyShowType==="row"?(m(),T(g,{key:1,value:e.resultDataContentOrigin,"onUpdate:value":n[3]||(n[3]=w=>e.resultDataContentOrigin=w),onInit:e.resultDataInit,lang:"text",theme:"chrome",width:"100%",height:"100",options:e.resultDataConfig},null,8,["value","onInit","options"])):e.bodyShowType==="preview"?(m(),x("div",rt,[e.bodyShowFormatPreview==="html"?(m(),x("iframe",lt,null,512)):(m(),x(C,{key:1},[u(L(e.resultDataContentOrigin),1)],64))])):O("",!0)]),_:1}),l(y,{tab:"Headers",key:"headers",forceRender:""},{default:r(()=>[l(a,{dataSource:e.resultHeaders,columns:e.resultHeadersColumns,size:"small",pagination:!1,scroll:{y:"300px"}},null,8,["dataSource","columns"])]),_:1}),l(y,{tab:"Cookies",key:"cookies",forceRender:""},{default:r(()=>[l(a,{dataSource:e.resultCookies,columns:e.resultCookiesColumns,size:"small",pagination:!1,scroll:{y:"300px"}},null,8,["dataSource","columns"])]),_:1})]),_:1},8,["activeKey"])])):(m(),x("div",mt,[l(_,{style:{padding:"5px 10px 0"}},{rightExtra:r(()=>[R("span",ft,[yt,R("span",null,L(e.unitConvert.formatSeconds(e.resultData.useTime||0)),1)])]),default:r(()=>[l(y,{tab:"\u8BF7\u6C42\u5931\u8D25",key:"body",forceRender:""},{default:r(()=>[R("div",ct,L(d.result.data.errorMsg),1)]),_:1})]),_:1})]))])):d.loading?(m(),x("div",ht,[l(P,{tip:"\u8BF7\u6C42\u6267\u884C\u4E2D..."},{default:r(()=>[l(k)]),_:1})])):(m(),x("div",_t,[l(I,{description:"\u70B9\u51FB \u2018\u53D1\u9001\u8BF7\u6C42\u2019 \u83B7\u53D6\u8BF7\u6C42\u7ED3\u679C"})]))}var gt=B(Qe,[["render",pt]]);const vt={props:{docInfoShow:{type:Object,required:!0},requestParamList:{type:Array,required:!0},responseParamList:{type:Array,required:!0}},components:{VerticalAlignTopOutlined:Se,VerticalAlignBottomOutlined:we,CloseOutlined:de,ParamTable:me,ParamBody:ce,DocDebuggerResult:gt},setup(t){const n=ue();let d=n.state.swaggerResource||{},e=n.state.globalParam||[],h=n.state.swaggerDoc||{},o=d.rewriteDomain||h.host,s=c(o+t.docInfoShow.url),i=c("urlParam");const f=c();let v=t.requestParamList.filter(p=>p.in==="query"),g=c([]);const y=c();let a=e.filter(p=>p.paramType===2),_=t.requestParamList.filter(p=>p.in==="header"),k=1;a.forEach(p=>{_.push({name:p.paramKey,value:p.paramValue,type:"string",key:"g"+k++})});let P=c(JSON.parse(JSON.stringify(_)));const I=c();let w=e.filter(p=>p.paramType===3),N=t.requestParamList.filter(p=>p.in==="cookie");w.forEach(p=>{N.push({name:p.paramKey,value:p.paramValue,type:"string",key:"g"+k++})});let F=c(JSON.parse(JSON.stringify(N)));const J=c();let A=e.filter(p=>p.paramType===1),D=t.requestParamList.filter(p=>p.in==="formData");A.forEach(p=>{D.push({name:p.paramKey,value:p.paramValue,type:"string",key:"g"+k++})});let K=c([]);t.docInfoShow.method==="post"?D=D.concat(v):g=c(JSON.parse(JSON.stringify(v)));const z=c();let V=c([]),Q=c(),E=c("form"),X=c("json"),te=t.requestParamList.filter(p=>p.in==="body"),ye=c(JSON.parse(JSON.stringify(te)));t.docInfoShow.consumes.indexOf("application/x-www-form-urlencoded")>=0?(E.value="formUrlEncode",V=c(JSON.parse(JSON.stringify(D)))):t.docInfoShow.consumes.indexOf("multipart/form-data")>=0?(E.value="form",K=c(JSON.parse(JSON.stringify(D)))):t.docInfoShow.consumes.indexOf("application/json")>=0?(E.value="row",X.value="json",V=c(JSON.parse(JSON.stringify(D))),D.length>0&&(E.value="formUrlEncode")):t.docInfoShow.consumes.indexOf("application/xml")>=0||t.docInfoShow.consumes.indexOf("text/xml")>=0?(E.value="row",X.value="xml",V=c(JSON.parse(JSON.stringify(D))),D.length>0&&(E.value="formUrlEncode")):K=c(JSON.parse(JSON.stringify(D))),K.value.length>0?i.value="urlParam":D.length>0||te.length>0?i.value="bodyParam":_.length>0&&(i.value="headerParam");let G=c({}),M=c(!1),ae=c({url:Ce()+"/doc-swagger/proxy/download",param:{}}),oe=c(),ne=t.docInfoShow.produces==="application/octet-stream";const he=()=>{if(!s.value){$.error("\u8BF7\u8F93\u5165\u8BF7\u6C42\u7684\u76EE\u6807URL\u5730\u5740");return}const p=new FormData;let _e=f.value.getSelectedRowKeys(),re=g.value.filter(S=>_e.indexOf(S.key)>=0&&S.name&&S.value).map(S=>S.name+"="+encodeURIComponent(S.value)).join("&"),pe=y.value.getSelectedRowKeys(),le=P.value.filter(S=>pe.indexOf(S.key)>=0&&S.name&&S.value).map(S=>({code:S.name,value:S.value})),ge=I.value.getSelectedRowKeys(),se=F.value.filter(S=>ge.indexOf(S.key)>=0&&S.name&&S.value).map(S=>({code:S.name,value:S.value})),Y=[];if(J.value){let S=J.value.getSelectedRowKeys();Y=K.value.filter(q=>S.indexOf(q.key)>=0&&q.name&&q.value).map(q=>({code:q.name,value:q.value}))}let Z=[];if(z.value){let S=z.value.getSelectedRowKeys();Z=V.value.filter(q=>S.indexOf(q.key)>=0&&q.name&&q.value).map(q=>({code:q.name,value:q.value}))}let W="";Q.value&&(W=Q.value.getParam());let ie=re?s.value+"?"+re:s.value;ne?(ae.value.param={url:ie,host:o,method:t.docInfoShow.method,contentType:t.docInfoShow.consumes,headerParam:JSON.stringify(le),cookieParam:JSON.stringify(se),formParam:JSON.stringify(Y),formEncodeParam:JSON.stringify(Z),bodyParam:W},setTimeout(()=>oe.value.submit(),0)):(p.append("url",ie),p.append("host",o),p.append("method",t.docInfoShow.method),p.append("contentType",t.docInfoShow.consumes),p.append("headerParam",JSON.stringify(le)),p.append("cookieParam",JSON.stringify(se)),p.append("formParam",JSON.stringify(Y)),p.append("formEncodeParam",JSON.stringify(Z)),p.append("bodyParam",W),M.value=!0,G.value={},De.requestUrl(p).then(S=>{G.value=S,M.value=!1}).catch(S=>{M.value=!1}))};let H=c(!0);return{docUrl:s,activePage:i,activePageChange:()=>{H.value=!0},requestLoading:M,sendRequest:he,requestResult:G,consumesParamType:X,downloadFormParam:ae,downloadFormRef:oe,isDownloadRequest:ne,urlParamRef:f,urlParamList:g,headerParamRef:y,headerParamList:P,cookieParamRef:I,cookieParamList:F,formParamRef:J,formParamList:K,formEncodeParamRef:z,formEncodeParamList:V,bodyParamRef:Q,bodyParamType:E,bodyRowParamList:ye,responseCodeListColumns:[{title:"\u72B6\u6001\u7801",dataIndex:"code",width:100},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"desc"}],responseParamListColumns:[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:250},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"description"}],queryParamVisible:H,hideQueryParam:()=>{H.value=!1},showQueryParam:()=>{H.value=!0}}}},Pt={style:{"margin-bottom":"6px"}},bt=u("none"),St=u("form-data"),wt=u("x-www-form-urlencoded"),xt=u("row"),kt=u("JSON"),Lt=u("HTML"),Rt=u("XML"),Tt=u("JavaScript"),It=u("TEXT"),Ot=u("\u6536\u8D77\u53C2\u6570"),Ct=u("\u5C55\u5F00\u53C2\u6570"),Dt=["action"],qt=["name","value"];function Nt(t,n,d,e,h,o){const s=b("a-button"),i=b("a-input-search"),f=b("ParamTable"),v=b("a-tab-pane"),g=b("a-radio"),y=b("a-radio-group"),a=b("a-select-option"),_=b("a-select"),k=b("ParamBody"),P=b("a-tabs"),I=b("DocDebuggerResult");return m(),x("div",null,[l(i,{"addon-before":d.docInfoShow.method.toUpperCase(),value:e.docUrl,"onUpdate:value":n[0]||(n[0]=w=>e.docUrl=w),onSearch:e.sendRequest,placeholder:"\u8BF7\u8F93\u5165\u76EE\u6807URL\u5730\u5740"},{enterButton:r(()=>[l(s,{type:"primary",loading:e.requestLoading},{default:r(()=>[u(L(e.isDownloadRequest?"\u4E0B\u8F7D\u6587\u4EF6":"\u53D1\u9001\u8BF7\u6C42"),1)]),_:1},8,["loading"])]),_:1},8,["addon-before","value","onSearch"]),l(P,{activeKey:e.activePage,"onUpdate:activeKey":n[3]||(n[3]=w=>e.activePage=w),closable:"",onTabClick:e.activePageChange,style:{padding:"5px 10px 0"}},{rightExtra:r(()=>[e.queryParamVisible?(m(),T(s,{key:0,onClick:e.hideQueryParam,type:"link"},{default:r(()=>[Ot]),_:1},8,["onClick"])):(m(),T(s,{key:1,onClick:e.showQueryParam,type:"link"},{default:r(()=>[Ct]),_:1},8,["onClick"]))]),default:r(()=>[l(v,{tab:"URL\u53C2\u6570",key:"urlParam",forceRender:""},{default:r(()=>[j(R("div",null,[l(f,{ref:"urlParamRef",paramList:e.urlParamList},null,8,["paramList"])],512),[[U,e.queryParamVisible]])]),_:1}),d.docInfoShow.method!=="get"?(m(),T(v,{tab:"Body\u53C2\u6570",key:"bodyParam",forceRender:""},{default:r(()=>[j(R("div",null,[R("div",Pt,[l(y,{value:e.bodyParamType,"onUpdate:value":n[1]||(n[1]=w=>e.bodyParamType=w)},{default:r(()=>[l(g,{value:"none"},{default:r(()=>[bt]),_:1}),l(g,{value:"form"},{default:r(()=>[St]),_:1}),l(g,{value:"formUrlEncode"},{default:r(()=>[wt]),_:1}),l(g,{value:"row"},{default:r(()=>[xt]),_:1})]),_:1},8,["value"]),e.bodyParamType==="row"?(m(),T(_,{key:0,value:e.consumesParamType,"onUpdate:value":n[2]||(n[2]=w=>e.consumesParamType=w),size:"small",style:{"margin-left":"10px","vertical-align":"top",width:"100px"}},{default:r(()=>[l(a,{value:"json"},{default:r(()=>[kt]),_:1}),l(a,{value:"html"},{default:r(()=>[Lt]),_:1}),l(a,{value:"xml"},{default:r(()=>[Rt]),_:1}),l(a,{value:"javascript"},{default:r(()=>[Tt]),_:1}),l(a,{value:"text"},{default:r(()=>[It]),_:1})]),_:1},8,["value"])):O("",!0)]),j(R("div",null,[l(f,{ref:"formParamRef",paramList:e.formParamList,showType:""},null,8,["paramList"])],512),[[U,e.bodyParamType==="form"]]),j(R("div",null,[l(f,{ref:"formEncodeParamRef",paramList:e.formEncodeParamList},null,8,["paramList"])],512),[[U,e.bodyParamType==="formUrlEncode"]]),j(R("div",null,[l(k,{ref:"bodyParamRef",rowLang:e.consumesParamType,paramList:e.bodyRowParamList},null,8,["rowLang","paramList"])],512),[[U,e.bodyParamType==="row"]])],512),[[U,e.queryParamVisible]])]),_:1})):O("",!0),l(v,{tab:"Header\u53C2\u6570",key:"headerParam",forceRender:""},{default:r(()=>[j(R("div",null,[l(f,{ref:"headerParamRef",paramList:e.headerParamList},null,8,["paramList"])],512),[[U,e.queryParamVisible]])]),_:1}),l(v,{tab:"Cookie\u53C2\u6570",key:"cookieParam",forceRender:""},{default:r(()=>[j(R("div",null,[l(f,{ref:"cookieParamRef",paramList:e.cookieParamList},null,8,["paramList"])],512),[[U,e.queryParamVisible]])]),_:1})]),_:1},8,["activeKey","onTabClick"]),e.isDownloadRequest?O("",!0):(m(),T(I,{key:0,result:e.requestResult,loading:e.requestLoading},null,8,["result","loading"])),R("form",{method:"post",ref:"downloadFormRef",action:e.downloadFormParam.url,target:"_blank"},[(m(!0),x(C,null,xe(e.downloadFormParam.param,(w,N)=>(m(),x("input",{type:"hidden",name:N,value:w},null,8,qt))),256))],8,Dt)])}var Jt=B(vt,[["render",Nt]]);const jt={components:{DocContent:ze,DocDebugger:Jt},setup(){const t=ke(),n=ue();let d=c("doc"),e=c([]),h=c([]),o=c({url:"",description:"",method:"",consumes:"",produces:""}),s=c(!1),i=0,f;const v=()=>{let y=t.query.path+"."+t.query.method;if(Object.keys(n.state.swaggerTreePathMap).length<=0){console.log("\u6587\u6863\u5C1A\u672A\u52A0\u8F7D\uFF0C\u7B49\u5F85\u52A0\u8F7D\u5B8C\u6210"),f||(f=setInterval(()=>{if(s.value||i++>50){clearInterval(f);return}Object.keys(n.state.swaggerTreePathMap).length>0&&(console.log("\u6587\u6863\u5185\u5BB9\u6539\u53D8\uFF0C\u91CD\u65B0\u52A0\u8F7D\u6587\u6863"),v())},1e3));return}let a=n.state.swaggerTreePathMap[y];if(!a){$.error("\u6CA1\u6709\u627E\u5230\u5BF9\u5E94\u7684\u6587\u6863");return}s.value=!0,n.commit("addTableName",{key:t.fullPath,val:a.summary});let _="",k="";a.consumes&&a.consumes.length>0&&(_=a.consumes.join(" ")),a.produces&&a.produces.length>0&&(k=a.produces.join(" "));let P=Oe.exports.markdownIt.render(a.description||a.summary||"");o.value={url:a.url,description:P,method:a.method||"",consumes:_,produces:k};let I=n.state.swaggerDefinitions;e.value=fe.getRequestParamList(a.parameters,I),h.value=fe.getResponseParamList(a.responses,I)};return Le(()=>{v()}),{docInfoShow:o,activePage:d,changePage:()=>{},isLoadSuccess:s,requestParamList:e,responseParamList:h}}},Et=R("div",{style:{padding:"20px 0",height:"100px"}},null,-1);function Ut(t,n,d,e,h,o){const s=b("DocContent"),i=b("a-tab-pane"),f=b("DocDebugger"),v=b("a-tabs"),g=b("a-spin");return e.isLoadSuccess?(m(),T(v,{key:0,activeKey:e.activePage,"onUpdate:activeKey":n[0]||(n[0]=y=>e.activePage=y),closable:"",onTabClick:e.changePage,style:{padding:"5px 10px 0"}},{default:r(()=>[l(i,{tab:"\u63A5\u53E3\u8BF4\u660E",key:"doc"},{default:r(()=>[l(s,{docInfoShow:e.docInfoShow,requestParamList:e.requestParamList,responseParamList:e.responseParamList},null,8,["docInfoShow","requestParamList","responseParamList"])]),_:1}),l(i,{tab:"\u5728\u7EBF\u8C03\u8BD5",key:"debug"},{default:r(()=>[l(f,{docInfoShow:e.docInfoShow,requestParamList:e.requestParamList,responseParamList:e.responseParamList},null,8,["docInfoShow","requestParamList","responseParamList"])]),_:1})]),_:1},8,["activeKey","onTabClick"])):(m(),T(g,{key:1,tip:"\u6587\u6863\u6570\u636E\u52A0\u8F7D\u4E2D..."},{default:r(()=>[Et]),_:1}))}var zt=B(jt,[["render",Ut]]);export{zt as default};
