var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,d=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l;import{z as o}from"./custom.192c812b.js";import{O as u,P as n,Q as i,r,b as c,a as s,w as p,F as f,o as m,n as v,c as y,p as g}from"./vendor.c3726933.js";const _={setup(){const e=u();let r=n([]),c=n(!1),s=n({docType:"",openVisit:"",docStatus:""});const p=async()=>{c.value=!0,o.swaggerDocList(s.value).then((e=>{setTimeout((()=>c.value=!1),500),r.value=e.data||[]}))};let f=n({}),m=n(),v=n(!1);return i((()=>{p()})),{searchParam:s,docList:r,docListLoading:c,newDocVisible:v,docEdit:f,newDocFormRef:m,searchDocList:p,openNewDoc:async()=>{v.value=!0,f.value={docType:1,openVisit:0,docStatus:1}},handleNewDocOk:async()=>{m.value.validate().then((()=>{o.swaggerDocAdd(f.value).then((a=>{p(),v.value=!1,e.commit("addDocChangedNum")}))})).catch((e=>{console.log("error",e)}))},deleteDoc:async a=>(async(a,t,l)=>{o.swaggerDocUpdate({id:a,docStatus:t,yn:l}).then((a=>{p(),e.commit("addDocChangedNum")}))})(a.id,null,0),editDoc:e=>{f.value=((e,o)=>{for(var u in o||(o={}))t.call(o,u)&&d(e,u,o[u]);if(a)for(var u of a(o))l.call(o,u)&&d(e,u,o[u]);return e})({},e),v.value=!0},newDocRules:{name:[{required:!0,message:"请输入文档名称",trigger:"change"}],docUrl:[{required:!0,message:"请输入文档地址",trigger:"change"}],jsonContent:[{required:!0,message:"请输入JSON格式的swagger文档内容",trigger:"change"}],docType:[{type:"number",required:!0,message:"请选择文档类型",trigger:"change"}],openVisit:[{type:"number",required:!0,message:"请选择是否开放访问",trigger:"change"}],docStatus:[{type:"number",required:!0,message:"请选择文档状态",trigger:"change"}]},docListColumns:[{title:"ID",dataIndex:"id",width:70},{title:"文档名称",dataIndex:"name",width:250},{title:"文档类型",dataIndex:"docType",width:90},{title:"开放访问",dataIndex:"openVisit",width:90},{title:"状态",dataIndex:"docStatus",width:90},{title:"文档地址",dataIndex:"docUrl"},{title:"目标域名",dataIndex:"rewriteDomain",width:250},{title:"操作",dataIndex:"operation",fixed:"right",width:170}]}}},h=g("全部"),b=g("URL添加"),w=g("JSON内容"),k=g("全部"),D=g("否"),x=g("是"),U=g("全部"),S=g("启用"),C=g("禁用"),E=g("查询"),L=g("新建"),O=g("编辑"),I=g("删除"),T=g("URL添加"),V=g("JSON内容"),q=g("未开放"),N=g("已开放"),P=g("启用"),j=g("禁用"),R=g("URL添加"),J=g("JSON内容"),z=g("否"),F=g("开放"),A=g("启用"),Q=g("禁用");_.render=function(e,a,t,l,d,o){const u=r("a-select-option"),n=r("a-select"),i=r("a-form-item"),g=r("a-button"),_=r("a-form"),B=r("a-popconfirm"),G=r("a-tag"),H=r("a-table"),K=r("a-card"),M=r("a-input"),W=r("a-radio"),X=r("a-radio-group"),Y=r("a-textarea"),Z=r("a-modal");return m(),c(f,null,[s(K,null,{default:p((()=>[s(_,{layout:"inline",style:{"margin-bottom":"20px"}},{default:p((()=>[s(i,{label:"文档类型"},{default:p((()=>[s(n,{placeholder:"请选择文档类型",value:l.searchParam.docType,"onUpdate:value":a[0]||(a[0]=e=>l.searchParam.docType=e),style:{width:"150px"}},{default:p((()=>[s(u,{value:""},{default:p((()=>[h])),_:1}),s(u,{value:1},{default:p((()=>[b])),_:1}),s(u,{value:2},{default:p((()=>[w])),_:1})])),_:1},8,["value"])])),_:1}),s(i,{label:"开放访问"},{default:p((()=>[s(n,{placeholder:"请选择开放访问",value:l.searchParam.openVisit,"onUpdate:value":a[1]||(a[1]=e=>l.searchParam.openVisit=e),style:{width:"150px"}},{default:p((()=>[s(u,{value:""},{default:p((()=>[k])),_:1}),s(u,{value:0},{default:p((()=>[D])),_:1}),s(u,{value:1},{default:p((()=>[x])),_:1})])),_:1},8,["value"])])),_:1}),s(i,{label:"状态"},{default:p((()=>[s(n,{placeholder:"请选择状态",value:l.searchParam.docStatus,"onUpdate:value":a[2]||(a[2]=e=>l.searchParam.docStatus=e),style:{width:"150px"}},{default:p((()=>[s(u,{value:""},{default:p((()=>[U])),_:1}),s(u,{value:1},{default:p((()=>[S])),_:1}),s(u,{value:2},{default:p((()=>[C])),_:1})])),_:1},8,["value"])])),_:1}),s(i,null,{default:p((()=>[s(g,{onClick:l.searchDocList,type:"primary"},{default:p((()=>[E])),_:1},8,["onClick"]),s(g,{onClick:l.openNewDoc,style:{marginLeft:"8px"}},{default:p((()=>[L])),_:1},8,["onClick"])])),_:1})])),_:1}),s(H,{dataSource:l.docList,columns:l.docListColumns,size:"middle",loading:l.docListLoading,pagination:!1,scroll:{x:1400,y:"calc(100vh - 340px)"}},{bodyCell:p((({column:e,text:a,record:t})=>["operation"===e.dataIndex?(m(),c(f,{key:0},[s(g,{type:"link",onClick:e=>l.editDoc(t)},{default:p((()=>[O])),_:2},1032,["onClick"]),s(B,{title:"确定要删除吗？",onConfirm:e=>l.deleteDoc(t)},{default:p((()=>[s(g,{type:"link",danger:""},{default:p((()=>[I])),_:1})])),_:2},1032,["onConfirm"])],64)):v("",!0),"docType"===e.dataIndex?(m(),c(f,{key:1},[1===a?(m(),y(G,{key:0,color:"red"},{default:p((()=>[T])),_:1})):2===a?(m(),y(G,{key:1,color:"blue"},{default:p((()=>[V])),_:1})):v("",!0)],64)):v("",!0),"openVisit"===e.dataIndex?(m(),c(f,{key:2},[0===a?(m(),y(G,{key:0,color:"pink"},{default:p((()=>[q])),_:1})):1===a?(m(),y(G,{key:1,color:"green"},{default:p((()=>[N])),_:1})):v("",!0)],64)):v("",!0),"docStatus"===e.dataIndex?(m(),c(f,{key:3},[1===a?(m(),y(G,{key:0,color:"green"},{default:p((()=>[P])),_:1})):2===a?(m(),y(G,{key:1,color:"pink"},{default:p((()=>[j])),_:1})):v("",!0)],64)):v("",!0)])),_:1},8,["dataSource","columns","loading","scroll"])])),_:1}),s(Z,{visible:l.newDocVisible,"onUpdate:visible":a[9]||(a[9]=e=>l.newDocVisible=e),title:"新增文档",onOk:l.handleNewDocOk,width:600},{default:p((()=>[s(_,{layout:"horizontal",ref:"newDocFormRef",rules:l.newDocRules,model:l.docEdit,"label-col":{span:6},"wrapper-col":{span:18}},{default:p((()=>[s(i,{label:"文档名称",required:"",name:"name"},{default:p((()=>[s(M,{placeholder:"请输入文档名称",value:l.docEdit.name,"onUpdate:value":a[3]||(a[3]=e=>l.docEdit.name=e)},null,8,["value"])])),_:1}),s(i,{label:"文档类型",required:"",name:"docType"},{default:p((()=>[s(X,{value:l.docEdit.docType,"onUpdate:value":a[4]||(a[4]=e=>l.docEdit.docType=e)},{default:p((()=>[s(W,{value:1},{default:p((()=>[R])),_:1}),s(W,{value:2},{default:p((()=>[J])),_:1})])),_:1},8,["value"])])),_:1}),1===l.docEdit.docType?(m(),y(i,{key:0,label:"文档地址",required:"",name:"docUrl"},{default:p((()=>[s(M,{placeholder:"请输入文档地址URL",value:l.docEdit.docUrl,"onUpdate:value":a[5]||(a[5]=e=>l.docEdit.docUrl=e)},null,8,["value"])])),_:1})):2===l.docEdit.docType?(m(),y(i,{key:1,label:"文档内容",required:"",name:"jsonContent"},{default:p((()=>[s(Y,{placeholder:"请输入JSON格式的swagger文档内容",value:l.docEdit.jsonContent,"onUpdate:value":a[6]||(a[6]=e=>l.docEdit.jsonContent=e)},null,8,["value"])])),_:1})):v("",!0),s(i,{label:"开放访问",required:"",name:"openVisit"},{default:p((()=>[s(X,{value:l.docEdit.openVisit,"onUpdate:value":a[7]||(a[7]=e=>l.docEdit.openVisit=e)},{default:p((()=>[s(W,{value:0},{default:p((()=>[z])),_:1}),s(W,{value:1},{default:p((()=>[F])),_:1})])),_:1},8,["value"])])),_:1}),s(i,{label:"状态",required:"",name:"docStatus"},{default:p((()=>[s(X,{value:l.docEdit.docStatus,"onUpdate:value":a[8]||(a[8]=e=>l.docEdit.docStatus=e)},{default:p((()=>[s(W,{value:1},{default:p((()=>[A])),_:1}),s(W,{value:2},{default:p((()=>[Q])),_:1})])),_:1},8,["value"])])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["visible","onOk"])],64)};export{_ as default};
