import{H as te,r as b,O as be,o as m,c as T,w as r,a as l,m as u,t as L,u as U,e as O,b as w,F as q,k as D,R as me,T as Se,L as c,V as we,W as xe,X as ke,J as ce,v as F,d as Le,Y as Oe,N as Re}from"./vendor.e1de8368.js";import{m as Ie}from"./index.f5a9d5cc.js";import{_ as X}from"./main.5d87f661.js";import{P as fe,a as ye,b as Te,u as Ce,x as De}from"./unitConvert.c012a85d.js";import{g as qe,z as Ne}from"./custom.fa05565e.js";var N={log(a,n,d){console.log(a+"-\u9047\u5230\u672A\u5904\u7406\u7684\u7C7B\u578B\uFF0C\u8BF7\u8054\u7CFB\u5F00\u53D1\u4EBA\u5458\u4FEE\u6539\uFF1A"+n,d)},logMessage(a,n,d){console.log(a+"-\u9047\u5230\u672A\u5904\u7406\u7684\u7C7B\u578B\uFF0C\u8BF7\u8054\u7CFB\u5F00\u53D1\u4EBA\u5458\u4FEE\u6539\uFF1A"+n,d),te.error(a+"-\u9047\u5230\u672A\u5904\u7406\u7684\u7C7B\u578B\uFF0C\u8BF7\u8054\u7CFB\u5F00\u53D1\u4EBA\u5458\u4FEE\u6539\uFF1A"+n)}};let oe=["file","string","integer","long","double","object","number","boolean","ref"];var he={getRequestParamList(a,n){if(!a)return[];let d=1,e=[];for(let h=0;h<a.length;h++){let o=a[h],s=o.description||"",i=o.type,f=o.format,g=o["x-example"],p,y,t;i==="array"?this.isSchemaRef(o.items)?(p=this.getSchemaRef(o.items),y=this.getParamDefinitions(p,n,d,{},0)):o.schema?this.isSchemaRef(o.schema.items)?(p=this.getSchemaRef(o.schema.items),y=this.getParamDefinitions(p,n,d,{},0)):o.schema.type&&(p=o.schema.type):o.items&&o.items.type?p=o.items.type:N.logMessage("001",i,o):i?oe.indexOf(i)>=0||N.logMessage("003",i,o):o.schema?this.isSchemaRef(o.schema)?(i=this.getSchemaRef(o.schema),y=this.getParamDefinitions(i,n,d,{},0)):o.schema.type?(i=o.schema.type,o.schema.additionalProperties?(t={},y=this.getAdditionalProperties(o.schema.additionalProperties,t,n,d,{},0),f=t.type):o.schema.items?this.isSchemaRef(o.schema.items)?(p=this.getSchemaRef(o.schema.items),y=this.getParamDefinitions(p,n,d,{},0)):o.schema.items.type?p=o.schema.items.type:N.log("0014",i,o):N.log("0011",i,o)):N.logMessage("0013",i,o):o.items&&o.items.type?(i=o.items.type,o.items.additionalProperties?(t={},y=this.getAdditionalProperties(o.items.additionalProperties,t,n,d,{},0),f=t.type):N.logMessage("0012",i,o)):N.logMessage("002",i,o),g&&(s=s?s+"\uFF0C":"",s+="\u4F8B\uFF1A"+g),o.enum&&o.enum.length>0&&(s=s||"\u679A\u4E3E\u7C7B\u578B",s+="\uFF0C\u53EF\u9009\u503C\uFF1A"+o.enum.join("\u3001")),e.push({type:i,key:d,in:o.in,name:o.name,subType:p,required:o.required?"\u662F":"\u5426",format:f,enum:o.enum,example:g,collectionFormat:o.collectionFormat,description:s,additional:t,children:y}),d++}return e},getResponseParamList(a,n){let d=[],e=1;return Object.keys(a).forEach(h=>{let o=a[h],s,i;this.isSchemaRef(o.schema)&&(s=this.getSchemaRef(o.schema),i=this.getParamDefinitions(s,n,e,{},0)),d.push({code:h,type:s,key:e,desc:o.description,schemas:i}),e++}),d},isSchemaRef(a){return!!(a&&a.$ref)},getSchemaRef(a){return a.$ref&&a.$ref.indexOf("#/definitions/")===0?a.$ref.replace("#/definitions/",""):(N.logMessage("9467","",a),"")},getParamDefinitions(a,n,d,e,h){let o=n[a];if(h>=10||!o||(e[a]=(e[a]||0)+1,e[a]>2))return;let s=[],i=o.type,f=o.properties,g=1;if(i==="object"&&f){let p={};Object.keys(f).forEach(y=>{let t=f[y],_=t.type,x=t.format,v=t.description||"",C=t.example||t["x-example"],R,k,V,E=d+"_"+g,K;Object.keys(p).forEach(j=>{e[j]=void 0}),_==="array"?this.isSchemaRef(t.items)?(R=this.getSchemaRef(t.items),K=this.getParamDefinitions(R,n,E,e,h+1)):t.items&&t.items.type?R=t.items.type:N.logMessage("004",_,t):_==="object"?t.additionalProperties?(k={},K=this.getAdditionalProperties(t.additionalProperties,k,n,E,e,h+1),x=k.type):N.log("0041",_,t):_?oe.indexOf(_)>=0||N.logMessage("006",_,t):this.isSchemaRef(t)?(_=this.getSchemaRef(t),K=this.getParamDefinitions(_,n,E,e,h+1)):N.logMessage("005",_,t),C&&(v=v?v+"\uFF0C":"",v+="\u4F8B\uFF1A"+C),t.items&&t.items.enum&&t.items.enum.length>0&&(V=t.items.enum,v=v||"\u679A\u4E3E\u7C7B\u578B",v+="\uFF0C\u53EF\u9009\u503C\uFF1A"+t.items.enum.join("\u3001")),s.push({type:_,name:y,key:E,subType:R,format:x,description:v,enum:V,additional:k,example:C,children:K}),g++,p[_]=1})}return s.length>0?s:void 0},getAdditionalProperties(a,n,d,e,h,o){if(this.isSchemaRef(a))return n.type=this.getSchemaRef(a),n.children=this.getParamDefinitions(n.type,d,e,h,o+1),n.additional;if(a.additionalProperties)return n.type=a.type,n.additional={},this.getAdditionalProperties(a.additionalProperties,n.additional,d,e,h,o+1);if(a.type==="array")if(n.type=a.type,this.isSchemaRef(a.items)){let s=this.getSchemaRef(a.items),i=this.getParamDefinitions(s,d,e,h,o+1);return n.additional={type:s,children:i},i}else N.logMessage("007","",a);else n.type=a.type,oe.indexOf(n.type)>=0||N.logMessage("008","",a)}};const je={props:{docInfoShow:{type:Object,required:!0},requestParamList:{type:Array,required:!0},responseParamList:{type:Array,required:!0}},setup(){return{requestParamListColumns:[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:200},{title:"\u7C7B\u578B",dataIndex:"type",width:150},{title:"\u53C2\u6570\u4F4D\u7F6E",dataIndex:"in",width:100},{title:"\u5FC5\u586B",dataIndex:"required",width:60},{title:"\u8BF4\u660E",dataIndex:"description"}],responseCodeListColumns:[{title:"\u72B6\u6001\u7801",dataIndex:"code",width:100},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"desc"}],responseParamListColumns:[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:250},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"description"}]}}},Je=["innerHTML"],Ee=u("header"),Ue=u("body"),Ae=u("query"),Fe=u("formData"),Ke=u("-"),Ve={key:0,style:{color:"#f00"}},Me=u("\u5426"),He=u("-"),Be=["innerHTML"],ze={key:1,style:{"text-align":"center",padding:"10px 0"}};function Qe(a,n,d,e,h,o){const s=b("a-form-item"),i=b("a-tag"),f=b("a-table"),g=b("a-form"),p=be("highlight");return m(),T(g,{"label-col":{span:4},"wrapper-col":{span:20}},{default:r(()=>[l(s,{label:"\u63A5\u53E3\u5730\u5740"},{default:r(()=>[u(L(d.docInfoShow.url),1)]),_:1}),l(s,{label:"\u8BF4\u660E"},{default:r(()=>[U(O("div",{class:"markdown-body",innerHTML:d.docInfoShow.description},null,8,Je),[[p]])]),_:1}),l(s,{label:"\u8BF7\u6C42\u65B9\u5F0F"},{default:r(()=>[u(L(d.docInfoShow.method),1)]),_:1}),l(s,{label:"\u8BF7\u6C42\u6570\u636E\u7C7B\u578B"},{default:r(()=>[u(L(d.docInfoShow.consumes),1)]),_:1}),l(s,{label:"\u54CD\u5E94\u6570\u636E\u7C7B\u578B"},{default:r(()=>[u(L(d.docInfoShow.produces),1)]),_:1}),l(s,{label:"\u8BF7\u6C42\u53C2\u6570"},{default:r(()=>[l(f,{dataSource:d.requestParamList,columns:e.requestParamListColumns,size:"small",pagination:!1,defaultExpandAllRows:""},{bodyCell:r(({column:y,text:t,record:_})=>[y.dataIndex==="type"?(m(),w(q,{key:0},[u(L(t)+" ",1),_.subType?(m(),w(q,{key:0},[u("["+L(_.subType)+"]",1)],64)):D("",!0),_.format?(m(),w(q,{key:1},[u("("+L(_.format)+")",1)],64)):D("",!0)],64)):D("",!0),y.dataIndex==="in"?(m(),w(q,{key:1},[t==="header"?(m(),T(i,{key:0,color:"pink"},{default:r(()=>[Ee]),_:1})):t==="body"?(m(),T(i,{key:1,color:"red"},{default:r(()=>[Ue]),_:1})):t==="query"?(m(),T(i,{key:2,color:"orange"},{default:r(()=>[Ae]),_:1})):t==="formData"?(m(),T(i,{key:3,color:"green"},{default:r(()=>[Fe]),_:1})):t?(m(),T(i,{key:5,color:"purple"},{default:r(()=>[u(L(t),1)]),_:2},1024)):(m(),w(q,{key:4},[Ke],64))],64)):D("",!0),y.dataIndex==="required"?(m(),w(q,{key:2},[t==="\u662F"?(m(),w("span",Ve,"\u662F")):t==="\u5426"?(m(),w(q,{key:1},[Me],64)):(m(),w(q,{key:2},[He],64))],64)):D("",!0),y.dataIndex==="description"?(m(),w(q,{key:3},[u(L(t),1)],64)):D("",!0)]),_:1},8,["dataSource","columns"])]),_:1}),l(s,{label:"\u8FD4\u56DE\u7ED3\u679C"},{default:r(()=>[l(f,{dataSource:d.responseParamList,columns:e.responseCodeListColumns,size:"small",pagination:!1},{bodyCell:r(({column:y,text:t,record:_})=>[y.dataIndex==="desc"?(m(),w("div",{key:0,innerHTML:t},null,8,Be)):D("",!0)]),expandedRowRender:r(({record:y})=>[y.schemas?(m(),T(f,{key:0,dataSource:y.schemas,columns:e.responseParamListColumns,size:"small",pagination:!1},{bodyCell:r(({column:t,text:_,record:x})=>[t.dataIndex==="type"?(m(),w(q,{key:0},[u(L(_)+" ",1),x.subType?(m(),w(q,{key:0},[u("["+L(x.subType)+"]",1)],64)):D("",!0),x.format?(m(),w(q,{key:1},[u("("+L(x.format)+")",1)],64)):D("",!0)],64)):D("",!0)]),_:2},1032,["dataSource","columns"])):(m(),w("div",ze,"\u65E0\u53C2\u6570\u8BF4\u660E"))]),_:1},8,["dataSource","columns"])]),_:1})]),_:1})}var Xe=X(je,[["render",Qe]]);const Ge={props:{result:{type:Object,required:!0},loading:{type:Boolean,required:!0}},components:{CloseOutlined:me,ParamTable:fe,ParamBody:ye,aceEditor:Te},setup(a){const{result:n}=Se(a);let d=c("body"),e=c("format"),h=c("json"),o=c(""),s=c([]),i=c([]),f=c(""),g=c(""),p=c({}),y=c();const t=()=>{e.value==="preview"&&setTimeout(()=>{y.value&&y.value.contentDocument.write(f.value)},0)},_=()=>{if(f.value="",g.value="",a.result.data){if(p.value=a.result.data,a.result.data.headers){s.value=a.result.data.headers;let v=s.value.find(C=>C.name==="Content-Type");v&&v.value&&(v.value.indexOf("text/html")>=0?h.value="html":v.value.indexOf("text/plain")>=0?h.value="text":v.value.indexOf("application/json")>=0?h.value="json":v.value.indexOf("application/xml")>=0||v.value.indexOf("text/xml")>=0?h.value="xml":v.value.indexOf("application/javascript")>=0&&(h.value="javascript"),o.value=h.value)}if(a.result.data.cookies&&(i.value=a.result.data.cookies),a.result.data.data||a.result.data.status===200){g.value=a.result.data.data,f.value=a.result.data.data;try{h.value==="xml"?g.value=De(f.value):h.value==="json"?g.value=JSON.stringify(JSON.parse(f.value),null,4):h.value==="javascript"&&(g.value=JSON.stringify(f.value,null,4))}catch{g.value=a.result.data.data}}else{let v=`
// \u8BF7\u6C42\u5931\u8D25\uFF0C\u4EE5\u4E0B\u4E3A\u5C01\u88C5\u7684\u8FD4\u56DE\u503C\u5BF9\u8C61\uFF0C\u4EC5\u4F9B\u53C2\u8003

`;f.value=v+JSON.stringify(a.result.data),g.value=v+JSON.stringify(a.result.data,null,4)}t()}};return _(),we(n,()=>_()),{activePage:d,bodyShowType:e,bodyShowTypeChange:t,unitConvert:Ce,bodyShowFormatType:h,bodyShowFormatPreview:o,previewHtmlRef:y,resultData:p,resultHeaders:s,resultCookies:i,resultHeadersColumns:[{title:"KEY",dataIndex:"name"},{title:"VALUE",dataIndex:"value"}],resultCookiesColumns:[{title:"KEY",dataIndex:"name"},{title:"VALUE",dataIndex:"value"}],resultDataInit:v=>{v.setFontSize(16)},resultDataContentOrigin:f,resultDataContentFormat:g,resultDataConfig:{wrap:!0,readOnly:!0,autoScrollEditorIntoView:!0,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,minLines:30,maxLines:30}}}},Ye={key:0,style:{"margin-bottom":"30px"}},We={key:0,style:{"margin-bottom":"30px"}},Ze={style:{"margin-bottom":"10px"}},$e=u("\u683C\u5F0F\u5316"),ea=u("\u539F\u59CB\u503C"),aa=u("\u9884\u89C8"),ta=u("JSON"),oa=u("HTML"),na=u("XML"),ra=u("JavaScript"),la=u("TEXT"),sa={key:2},ia={key:0,ref:"previewHtmlRef",width:"100%",height:"570px",style:{border:"0"}},da={class:"status-info-box"},ua=u(" \u72B6\u6001\u7801\uFF1A"),ma=u(" \u8017\u65F6\uFF1A"),ca=u(" \u5927\u5C0F\uFF1A"),fa={key:1},ya={style:{color:"#f00"}},ha={class:"status-info-box"},_a=u(" \u8017\u65F6\uFF1A"),pa={key:1,style:{"margin-top":"20px"}},ga={key:2,style:{"margin-top":"20px",color:"#aaa"}};function va(a,n,d,e,h,o){const s=b("a-radio-button"),i=b("a-radio-group"),f=b("a-select-option"),g=b("a-select"),p=b("ace-editor"),y=b("a-tab-pane"),t=b("a-table"),_=b("a-divider"),x=b("a-tabs"),v=b("a-skeleton"),C=b("a-spin"),R=b("a-empty");return d.result.data?(m(),w("div",Ye,[d.result.data.data||d.result.data.status===200?(m(),w("div",We,[l(x,{activeKey:e.activePage,"onUpdate:activeKey":n[4]||(n[4]=k=>e.activePage=k),onTabClick:n[5]||(n[5]=()=>{}),style:{padding:"5px 10px 0"}},{rightExtra:r(()=>[O("span",da,[ua,O("span",null,L(e.resultData.status||"200"),1),l(_,{type:"vertical"}),ma,O("span",null,L(e.unitConvert.formatSeconds(e.resultData.useTime||0)),1),l(_,{type:"vertical"}),ca,O("span",null,L(e.unitConvert.formatFileSize(e.resultData.contentLength||0)),1)])]),default:r(()=>[l(y,{tab:"Body",key:"body",forceRender:""},{default:r(()=>[O("div",Ze,[l(i,{value:e.bodyShowType,"onUpdate:value":n[0]||(n[0]=k=>e.bodyShowType=k),onChange:e.bodyShowTypeChange,size:"small"},{default:r(()=>[l(s,{value:"format"},{default:r(()=>[$e]),_:1}),l(s,{value:"row"},{default:r(()=>[ea]),_:1}),l(s,{value:"preview"},{default:r(()=>[aa]),_:1})]),_:1},8,["value","onChange"]),e.bodyShowType==="format"?(m(),T(g,{key:0,value:e.bodyShowFormatType,"onUpdate:value":n[1]||(n[1]=k=>e.bodyShowFormatType=k),size:"small",style:{"margin-left":"10px",width:"100px"}},{default:r(()=>[l(f,{value:"json"},{default:r(()=>[ta]),_:1}),l(f,{value:"html"},{default:r(()=>[oa]),_:1}),l(f,{value:"xml"},{default:r(()=>[na]),_:1}),l(f,{value:"javascript"},{default:r(()=>[ra]),_:1}),l(f,{value:"text"},{default:r(()=>[la]),_:1})]),_:1},8,["value"])):D("",!0)]),e.bodyShowType==="format"?(m(),T(p,{key:0,value:e.resultDataContentFormat,"onUpdate:value":n[2]||(n[2]=k=>e.resultDataContentFormat=k),onInit:e.resultDataInit,lang:e.bodyShowFormatType,theme:"monokai",width:"100%",height:"100",options:e.resultDataConfig},null,8,["value","onInit","lang","options"])):e.bodyShowType==="row"?(m(),T(p,{key:1,value:e.resultDataContentOrigin,"onUpdate:value":n[3]||(n[3]=k=>e.resultDataContentOrigin=k),onInit:e.resultDataInit,lang:"text",theme:"chrome",width:"100%",height:"100",options:e.resultDataConfig},null,8,["value","onInit","options"])):e.bodyShowType==="preview"?(m(),w("div",sa,[e.bodyShowFormatPreview==="html"?(m(),w("iframe",ia,null,512)):(m(),w(q,{key:1},[u(L(e.resultDataContentOrigin),1)],64))])):D("",!0)]),_:1}),l(y,{tab:"Headers",key:"headers",forceRender:""},{default:r(()=>[l(t,{dataSource:e.resultHeaders,columns:e.resultHeadersColumns,size:"small",pagination:!1,scroll:{y:"300px"}},null,8,["dataSource","columns"])]),_:1}),l(y,{tab:"Cookies",key:"cookies",forceRender:""},{default:r(()=>[l(t,{dataSource:e.resultCookies,columns:e.resultCookiesColumns,size:"small",pagination:!1,scroll:{y:"300px"}},null,8,["dataSource","columns"])]),_:1})]),_:1},8,["activeKey"])])):(m(),w("div",fa,[l(x,{style:{padding:"5px 10px 0"}},{rightExtra:r(()=>[O("span",ha,[_a,O("span",null,L(e.unitConvert.formatSeconds(e.resultData.useTime||0)),1)])]),default:r(()=>[l(y,{tab:"\u8BF7\u6C42\u5931\u8D25",key:"body",forceRender:""},{default:r(()=>[O("div",ya,L(d.result.data.errorMsg),1)]),_:1})]),_:1})]))])):d.loading?(m(),w("div",pa,[l(C,{tip:"\u8BF7\u6C42\u6267\u884C\u4E2D..."},{default:r(()=>[l(v)]),_:1})])):(m(),w("div",ga,[l(R,{description:"\u70B9\u51FB \u2018\u53D1\u9001\u8BF7\u6C42\u2019 \u83B7\u53D6\u8BF7\u6C42\u7ED3\u679C"})]))}var Pa=X(Ge,[["render",va]]);const ba={props:{docInfoShow:{type:Object,required:!0},requestParamList:{type:Array,required:!0},responseParamList:{type:Array,required:!0}},components:{VerticalAlignTopOutlined:xe,VerticalAlignBottomOutlined:ke,CloseOutlined:me,ParamTable:fe,ParamBody:ye,DocDebuggerResult:Pa},setup(a){const n=ce();let d=n.state.swaggerResource||{},e=n.state.globalParam||[],h=n.state.swaggerDoc||{},o=d.rewriteDomain||h.host,s=c(o+a.docInfoShow.url),i=c("urlParam");const f=c();let g=a.requestParamList.filter(S=>S.in==="query"||S.in==="path"),p=c([]);const y=c();let t=e.filter(S=>S.paramType===2),_=a.requestParamList.filter(S=>S.in==="header"),x=1;t.forEach(S=>{_.push({name:S.paramKey,value:S.paramValue,type:"string",key:"g"+x++})});let v=c(JSON.parse(JSON.stringify(_)));const C=c();let R=e.filter(S=>S.paramType===3),k=a.requestParamList.filter(S=>S.in==="cookie");R.forEach(S=>{k.push({name:S.paramKey,value:S.paramValue,type:"string",key:"g"+x++})});let V=c(JSON.parse(JSON.stringify(k)));const E=c();let K=e.filter(S=>S.paramType===1),j=a.requestParamList.filter(S=>S.in==="formData");K.forEach(S=>{j.push({name:S.paramKey,value:S.paramValue,type:"string",key:"g"+x++})});let M=c([]);a.docInfoShow.method==="post"?j=j.concat(g):p=c(JSON.parse(JSON.stringify(g)));const G=c();let H=c([]),Y=c(),A=c("form"),W=c("json"),ne=a.requestParamList.filter(S=>S.in==="body"),_e=c(JSON.parse(JSON.stringify(ne)));a.docInfoShow.consumes.indexOf("application/x-www-form-urlencoded")>=0?(A.value="formUrlEncode",H=c(JSON.parse(JSON.stringify(j)))):a.docInfoShow.consumes.indexOf("multipart/form-data")>=0?(A.value="form",M=c(JSON.parse(JSON.stringify(j)))):a.docInfoShow.consumes.indexOf("application/json")>=0?(A.value="row",W.value="json",H=c(JSON.parse(JSON.stringify(j))),j.length>0&&(A.value="formUrlEncode")):a.docInfoShow.consumes.indexOf("application/xml")>=0||a.docInfoShow.consumes.indexOf("text/xml")>=0?(A.value="row",W.value="xml",H=c(JSON.parse(JSON.stringify(j))),j.length>0&&(A.value="formUrlEncode")):M=c(JSON.parse(JSON.stringify(j))),M.value.length>0?i.value="urlParam":j.length>0||ne.length>0?i.value="bodyParam":_.length>0&&(i.value="headerParam");let Z=c({}),B=c(!1),re=c({url:qe()+"/doc-swagger/proxy/download",param:{}}),le=c(),se=a.docInfoShow.produces==="application/octet-stream";const pe=()=>{if(!s.value){te.error("\u8BF7\u8F93\u5165\u8BF7\u6C42\u7684\u76EE\u6807URL\u5730\u5740");return}let S={};const J=new FormData;let ge=f.value.getSelectedRowKeys(),ie=p.value.filter(P=>ge.indexOf(P.key)>=0&&P.name&&P.value).map(P=>(S[P.name]=P.value,P.name+"="+encodeURIComponent(P.value))).join("&"),ve=y.value.getSelectedRowKeys(),de=v.value.filter(P=>ve.indexOf(P.key)>=0&&P.name&&P.value).map(P=>({code:P.name,value:P.value})),Pe=C.value.getSelectedRowKeys(),ue=V.value.filter(P=>Pe.indexOf(P.key)>=0&&P.name&&P.value).map(P=>({code:P.name,value:P.value})),$=[];if(E.value){let P=E.value.getSelectedRowKeys();$=M.value.filter(I=>P.indexOf(I.key)>=0&&I.name&&I.value).map(I=>(S[I.name]=I.value,{code:I.name,value:I.value}))}let ee=[];if(G.value){let P=G.value.getSelectedRowKeys();ee=H.value.filter(I=>P.indexOf(I.key)>=0&&I.name&&I.value).map(I=>(S[I.name]=I.value,{code:I.name,value:I.value}))}let ae="";Y.value&&(ae=Y.value.getParam());let Q=ie?s.value+"?"+ie:s.value;Object.keys(S).forEach(P=>{Q=Q.replace("{"+P+"}",S[P])}),se?(re.value.param={url:Q,host:o,method:a.docInfoShow.method,contentType:a.docInfoShow.consumes,headerParam:JSON.stringify(de),cookieParam:JSON.stringify(ue),formParam:JSON.stringify($),formEncodeParam:JSON.stringify(ee),bodyParam:ae},setTimeout(()=>le.value.submit(),0)):(J.append("url",Q),J.append("host",o),J.append("method",a.docInfoShow.method),J.append("contentType",a.docInfoShow.consumes),J.append("headerParam",JSON.stringify(de)),J.append("cookieParam",JSON.stringify(ue)),J.append("formParam",JSON.stringify($)),J.append("formEncodeParam",JSON.stringify(ee)),J.append("bodyParam",ae),B.value=!0,Z.value={},Ne.requestUrl(J).then(P=>{Z.value=P,B.value=!1}).catch(P=>{B.value=!1}))};let z=c(!0);return{docUrl:s,activePage:i,activePageChange:()=>{z.value=!0},requestLoading:B,sendRequest:pe,requestResult:Z,consumesParamType:W,downloadFormParam:re,downloadFormRef:le,isDownloadRequest:se,urlParamRef:f,urlParamList:p,headerParamRef:y,headerParamList:v,cookieParamRef:C,cookieParamList:V,formParamRef:E,formParamList:M,formEncodeParamRef:G,formEncodeParamList:H,bodyParamRef:Y,bodyParamType:A,bodyRowParamList:_e,responseCodeListColumns:[{title:"\u72B6\u6001\u7801",dataIndex:"code",width:100},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"desc"}],responseParamListColumns:[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:250},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"description"}],queryParamVisible:z,hideQueryParam:()=>{z.value=!1},showQueryParam:()=>{z.value=!0}}}},Sa={style:{"margin-bottom":"6px"}},wa=u("none"),xa=u("form-data"),ka=u("x-www-form-urlencoded"),La=u("row"),Oa=u("JSON"),Ra=u("HTML"),Ia=u("XML"),Ta=u("JavaScript"),Ca=u("TEXT"),Da=u("\u6536\u8D77\u53C2\u6570"),qa=u("\u5C55\u5F00\u53C2\u6570"),Na=["action"],ja=["name","value"];function Ja(a,n,d,e,h,o){const s=b("a-button"),i=b("a-input-search"),f=b("ParamTable"),g=b("a-tab-pane"),p=b("a-radio"),y=b("a-radio-group"),t=b("a-select-option"),_=b("a-select"),x=b("ParamBody"),v=b("a-tabs"),C=b("DocDebuggerResult");return m(),w("div",null,[l(i,{"addon-before":d.docInfoShow.method.toUpperCase(),value:e.docUrl,"onUpdate:value":n[0]||(n[0]=R=>e.docUrl=R),onSearch:e.sendRequest,placeholder:"\u8BF7\u8F93\u5165\u76EE\u6807URL\u5730\u5740"},{enterButton:r(()=>[l(s,{type:"primary",loading:e.requestLoading},{default:r(()=>[u(L(e.isDownloadRequest?"\u4E0B\u8F7D\u6587\u4EF6":"\u53D1\u9001\u8BF7\u6C42"),1)]),_:1},8,["loading"])]),_:1},8,["addon-before","value","onSearch"]),l(v,{activeKey:e.activePage,"onUpdate:activeKey":n[3]||(n[3]=R=>e.activePage=R),closable:"",onTabClick:e.activePageChange,style:{padding:"5px 10px 0"}},{rightExtra:r(()=>[e.queryParamVisible?(m(),T(s,{key:0,onClick:e.hideQueryParam,type:"link"},{default:r(()=>[Da]),_:1},8,["onClick"])):(m(),T(s,{key:1,onClick:e.showQueryParam,type:"link"},{default:r(()=>[qa]),_:1},8,["onClick"]))]),default:r(()=>[l(g,{tab:"URL\u53C2\u6570",key:"urlParam",forceRender:""},{default:r(()=>[U(O("div",null,[l(f,{ref:"urlParamRef",paramList:e.urlParamList},null,8,["paramList"])],512),[[F,e.queryParamVisible]])]),_:1}),d.docInfoShow.method!=="get"?(m(),T(g,{tab:"Body\u53C2\u6570",key:"bodyParam",forceRender:""},{default:r(()=>[U(O("div",null,[O("div",Sa,[l(y,{value:e.bodyParamType,"onUpdate:value":n[1]||(n[1]=R=>e.bodyParamType=R)},{default:r(()=>[l(p,{value:"none"},{default:r(()=>[wa]),_:1}),l(p,{value:"form"},{default:r(()=>[xa]),_:1}),l(p,{value:"formUrlEncode"},{default:r(()=>[ka]),_:1}),l(p,{value:"row"},{default:r(()=>[La]),_:1})]),_:1},8,["value"]),e.bodyParamType==="row"?(m(),T(_,{key:0,value:e.consumesParamType,"onUpdate:value":n[2]||(n[2]=R=>e.consumesParamType=R),size:"small",style:{"margin-left":"10px","vertical-align":"top",width:"100px"}},{default:r(()=>[l(t,{value:"json"},{default:r(()=>[Oa]),_:1}),l(t,{value:"html"},{default:r(()=>[Ra]),_:1}),l(t,{value:"xml"},{default:r(()=>[Ia]),_:1}),l(t,{value:"javascript"},{default:r(()=>[Ta]),_:1}),l(t,{value:"text"},{default:r(()=>[Ca]),_:1})]),_:1},8,["value"])):D("",!0)]),U(O("div",null,[l(f,{ref:"formParamRef",paramList:e.formParamList,showType:""},null,8,["paramList"])],512),[[F,e.bodyParamType==="form"]]),U(O("div",null,[l(f,{ref:"formEncodeParamRef",paramList:e.formEncodeParamList},null,8,["paramList"])],512),[[F,e.bodyParamType==="formUrlEncode"]]),U(O("div",null,[l(x,{ref:"bodyParamRef",rowLang:e.consumesParamType,paramList:e.bodyRowParamList},null,8,["rowLang","paramList"])],512),[[F,e.bodyParamType==="row"]])],512),[[F,e.queryParamVisible]])]),_:1})):D("",!0),l(g,{tab:"Header\u53C2\u6570",key:"headerParam",forceRender:""},{default:r(()=>[U(O("div",null,[l(f,{ref:"headerParamRef",paramList:e.headerParamList},null,8,["paramList"])],512),[[F,e.queryParamVisible]])]),_:1}),l(g,{tab:"Cookie\u53C2\u6570",key:"cookieParam",forceRender:""},{default:r(()=>[U(O("div",null,[l(f,{ref:"cookieParamRef",paramList:e.cookieParamList},null,8,["paramList"])],512),[[F,e.queryParamVisible]])]),_:1})]),_:1},8,["activeKey","onTabClick"]),e.isDownloadRequest?D("",!0):(m(),T(C,{key:0,result:e.requestResult,loading:e.requestLoading},null,8,["result","loading"])),O("form",{method:"post",ref:"downloadFormRef",action:e.downloadFormParam.url,target:"_blank"},[(m(!0),w(q,null,Le(e.downloadFormParam.param,(R,k)=>(m(),w("input",{type:"hidden",name:k,value:R},null,8,ja))),256))],8,Na)])}var Ea=X(ba,[["render",Ja]]);const Ua={components:{DocContent:Xe,DocDebugger:Ea},setup(){const a=Oe(),n=ce();let d=c("doc"),e=c([]),h=c([]),o=c({url:"",description:"",method:"",consumes:"",produces:""}),s=c(!1),i=0,f;const g=()=>{let y=a.query.path+"."+a.query.method;if(Object.keys(n.state.urlMethodMap).length<=0){console.log("\u6587\u6863\u5C1A\u672A\u52A0\u8F7D\uFF0C\u7B49\u5F85\u52A0\u8F7D\u5B8C\u6210"),f||(f=setInterval(()=>{if(s.value||i++>50){clearInterval(f);return}Object.keys(n.state.urlMethodMap).length>0&&(console.log("\u6587\u6863\u5185\u5BB9\u6539\u53D8\uFF0C\u91CD\u65B0\u52A0\u8F7D\u6587\u6863"),g())},1e3));return}let t=n.state.urlMethodMap[y];if(!t){te.error("\u6CA1\u6709\u627E\u5230\u5BF9\u5E94\u7684\u6587\u6863");return}s.value=!0,n.commit("addTableName",{key:a.fullPath,val:t.summary});let _="",x="";t.consumes&&t.consumes.length>0&&(_=t.consumes.join(" ")),t.produces&&t.produces.length>0&&(x=t.produces.join(" "));let v=Ie.exports.markdownIt.render(t.description||t.summary||"");o.value={url:t.url,description:v,method:t.method||"",consumes:_,produces:x};let C=n.state.swaggerDefinitions;e.value=he.getRequestParamList(t.parameters,C),h.value=he.getResponseParamList(t.responses,C)};return Re(()=>{g()}),{docInfoShow:o,activePage:d,changePage:()=>{},isLoadSuccess:s,requestParamList:e,responseParamList:h}}},Aa=O("div",{style:{padding:"20px 0",height:"100px"}},null,-1);function Fa(a,n,d,e,h,o){const s=b("DocContent"),i=b("a-tab-pane"),f=b("DocDebugger"),g=b("a-tabs"),p=b("a-spin");return e.isLoadSuccess?(m(),T(g,{key:0,activeKey:e.activePage,"onUpdate:activeKey":n[0]||(n[0]=y=>e.activePage=y),closable:"",onTabClick:e.changePage,style:{padding:"5px 10px 0"}},{default:r(()=>[l(i,{tab:"\u63A5\u53E3\u8BF4\u660E",key:"doc"},{default:r(()=>[l(s,{docInfoShow:e.docInfoShow,requestParamList:e.requestParamList,responseParamList:e.responseParamList},null,8,["docInfoShow","requestParamList","responseParamList"])]),_:1}),l(i,{tab:"\u5728\u7EBF\u8C03\u8BD5",key:"debug"},{default:r(()=>[l(f,{docInfoShow:e.docInfoShow,requestParamList:e.requestParamList,responseParamList:e.responseParamList},null,8,["docInfoShow","requestParamList","responseParamList"])]),_:1})]),_:1},8,["activeKey","onTabClick"])):(m(),T(p,{key:1,tip:"\u6587\u6863\u6570\u636E\u52A0\u8F7D\u4E2D..."},{default:r(()=>[Aa]),_:1}))}var Ga=X(Ua,[["render",Fa]]);export{Ga as default};
