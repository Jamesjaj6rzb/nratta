(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72e49b1a"],{"36c7":function(e,t,i){"use strict";var a=i("867a"),n=i.n(a);n.a},"867a":function(e,t,i){},"8b30":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-share-view-vue"},[i("van-nav-bar",{attrs:{title:e.wikiPage.name}},[i("van-icon",{attrs:{slot:"left",name:"ellipsis"},on:{click:e.popupShowChange},slot:"left"})],1),i("el-row",{attrs:{type:"border-card"}},[i("div",{staticStyle:{"max-width":"950px",margin:"0 auto"}},[i("div",{staticClass:"wiki-author"},[e.wikiPage.updateTime?i("span",[e._v("最后修改："+e._s(e.wikiPage.updateTime))]):i("span",[e._v("创建时间："+e._s(e.wikiPage.createTime))])]),i("div",{staticClass:"wiki-files"},[i("el-table",{directives:[{name:"show",rawName:"v-show",value:e.pageFileList.length>0,expression:"pageFileList.length > 0"}],staticStyle:{width:"100%","margin-bottom":"5px"},attrs:{data:e.pageFileList,border:""}},[i("el-table-column",{attrs:{label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{attrs:{target:"_blank",href:t.row.fileUrl}},[e._v(e._s(t.row.fileName))])]}}])}),i("el-table-column",{attrs:{label:"文件大小"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.computeFileSize(t.row.fileSize)))]}}])}),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180px"}}),i("el-table-column",{attrs:{prop:"downloadNum",label:"下载次数",width:"80px"}})],1)],1),i("div",{ref:"pageContent",staticClass:"wiki-page-content"},[2==e.wikiPage.editorType?i("div",{staticClass:"markdown-body",domProps:{innerHTML:e._s(e.pageShowDetail)}}):i("div",{staticClass:"wang-editor-body",domProps:{innerHTML:e._s(e.pageShowDetail)}})])])]),i("div",{ref:"imagePreview"},[e.showImagePreview?i("el-image-viewer",{attrs:{"url-list":e.showImagePreviewList,"on-close":e.closeImagePreview,"initial-index":e.previewInitialIndex}}):e._e()],1)],1)},n=[],o=(i("4160"),i("c975"),i("b0c0"),i("b680"),i("159b"),i("0a79")),s=i("b2d8"),r=i("08a9"),l=(i("c350"),i("64e1"),{data:function(){return{spaceUuid:"",nowPageId:"",wikiPage:{},pageFileList:[],pageShowDetail:"",previewInitialIndex:0,showImagePreview:!1,showImagePreviewList:[]}},components:{"el-image-viewer":r["a"]},beforeRouteUpdate:function(e,t,i){this.initQueryParam(e),i()},mounted:function(){this.initQueryParam(this.$route)},methods:{popupShowChange:function(){this.$emit("popupShow",!0)},loadPageDetail:function(e){var t=this,i={pageId:e,space:this.spaceUuid};o["a"].openPageDetail(i).then((function(e){var i=e.data.wikiPage||{};i.selfZan=e.data.selfZan||0,t.wikiPage=i;var a=e.data.pageContent||{};t.pageFileList=e.data.fileList||[],2===t.wikiPage.editorType&&(a.content=s["markdownIt"].render(a.content)),t.pageShowDetail=a.content,document.title=i.name||"WIKI-内容展示",setTimeout((function(){return t.previewPageImage()}),500)}))},initQueryParam:function(e){this.spaceUuid=e.query.space,this.nowPageId=e.query.pageId,this.nowPageId&&this.loadPageDetail(this.nowPageId)},computeFileSize:function(e){if(!e)return"-";var t="";t=e<102.4?e.toFixed(2)+"B":e<104857.6?(e/1024).toFixed(2)+"KB":e<107374182.4?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB";var i=t+"",a=i.indexOf("."),n=i.substr(a+1,2);return"00"==n?i.substring(0,a)+i.substr(a+3,2):t},closeImagePreview:function(){this.showImagePreview=!1},previewPageImage:function(){var e=this,t=[],i=this.$refs.pageContent.querySelectorAll("img");i.forEach((function(i,a){t.push(i.src),i.onclick=function(){e.previewInitialIndex=a,e.showImagePreviewList=t,e.showImagePreview=!0,setTimeout((function(){return e.initImageViewerMask()}),0)}}))},initImageViewerMask:function(){var e=this,t=this.$refs.imagePreview.querySelectorAll(".el-image-viewer__mask");t.forEach((function(t){t.onclick=function(){return e.showImagePreview=!1}}))}}}),c=l,u=(i("36c7"),i("2877")),w=Object(u["a"])(c,a,n,!1,null,null,null);t["default"]=w.exports}}]);