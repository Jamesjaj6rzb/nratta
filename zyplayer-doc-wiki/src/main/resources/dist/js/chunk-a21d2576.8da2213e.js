(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a21d2576"],{"03bc":function(e,t,i){"use strict";i("d3b7"),i("159b"),i("ac1f"),i("5319");t["a"]={createNavigationHeading:function(){var e=[],t=document.querySelector(".wiki-page-content").querySelectorAll("h1,h2,h3,h4,h5,h6");return t.length<=0?[]:(t.forEach((function(t){var i=t.innerHTML.replace(/^\s+/g,"").replace(/\s+$/g,"").replace(/<\/?[^>]+(>|$)/g,"");e.push({node:t,level:parseInt(t.tagName.replace(/[h]/i,""),10),text:i})})),e)}}},"43a0":function(e,t,i){"use strict";i("cdc2")},"4aa7":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-share-view-vue"},[i("el-row",{attrs:{type:"border-card"}},[i("el-row",[e.navigationList.length>0?i("el-col",{attrs:{xs:0,sm:4,md:4,lg:6,xl:6}},[i("Navigation",{attrs:{heading:e.navigationList}})],1):e._e(),i("el-col",{attrs:{xs:24,sm:e.navigationList.length>0?20:24,md:e.navigationList.length>0?20:24,lg:e.navigationList.length>0?18:24,xl:e.navigationList.length>0?18:24}},[i("div",{staticStyle:{"max-width":"1000px","padding-left":"10px",margin:"0 auto"}},[i("div",{ref:"wikiTitle",staticClass:"wiki-title"},[e._v(e._s(e.wikiPage.name))]),i("div",{staticClass:"wiki-author"},[e.wikiPage.updateTime?i("span",[e._v("最后修改："+e._s(e.wikiPage.updateTime))]):i("span",[e._v("创建时间："+e._s(e.wikiPage.createTime))])]),i("div",{staticClass:"wiki-files"},[i("el-table",{directives:[{name:"show",rawName:"v-show",value:e.pageFileList.length>0,expression:"pageFileList.length > 0"}],staticStyle:{width:"100%","margin-bottom":"5px"},attrs:{data:e.pageFileList,border:""}},[i("el-table-column",{attrs:{label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("a",{attrs:{target:"_blank",href:t.row.fileUrl}},[e._v(e._s(t.row.fileName))])]}}])}),i("el-table-column",{attrs:{label:"文件大小"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.computeFileSize(t.row.fileSize)))]}}])}),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180px"}}),i("el-table-column",{attrs:{prop:"downloadNum",label:"下载次数",width:"80px"}})],1)],1),i("div",{ref:"pageContent",staticClass:"wiki-page-content"},[2==e.wikiPage.editorType?i("div",{staticClass:"markdown-body",domProps:{innerHTML:e._s(e.pageShowDetail)}}):i("div",{staticClass:"wang-editor-body",domProps:{innerHTML:e._s(e.pageShowDetail)}})])])])],1)],1),i("div",{ref:"imagePreview"},[e.showImagePreview?i("el-image-viewer",{attrs:{"url-list":e.showImagePreviewList,"on-close":e.closeImagePreview,"initial-index":e.previewInitialIndex}}):e._e()],1)],1)},n=[],o=(i("b0c0"),i("b680"),i("d3b7"),i("159b"),i("0a79")),s=i("b2d8"),r=(i("d801"),i("03bc")),l=i("b8fe"),c=i("08a9"),u=(i("c350"),i("64e1"),{data:function(){return{spaceUuid:"",nowPageId:"",wikiPage:{},pageFileList:[],pageShowDetail:"",previewInitialIndex:0,showImagePreview:!1,showImagePreviewList:[],navigationList:[]}},components:{"el-image-viewer":c["a"],Navigation:l["a"]},beforeRouteUpdate:function(e,t,i){this.initQueryParam(e),i()},mounted:function(){this.initQueryParam(this.$route)},methods:{loadPageDetail:function(e){var t=this,i={pageId:e,space:this.spaceUuid};o["a"].openPageDetail(i).then((function(e){var i=e.data.wikiPage||{};i.selfZan=e.data.selfZan||0,t.wikiPage=i;var a=e.data.pageContent||{};t.pageFileList=e.data.fileList||[],2===t.wikiPage.editorType&&(a.content=s["mavonEditor"].getMarkdownIt().render(a.content)),t.pageShowDetail=a.content;var n=i.name||"WIKI-内容展示";document.title=n,setTimeout((function(){t.previewPageImage();var e=r["a"].createNavigationHeading();e.length>0&&e.unshift({level:1,node:t.$refs.wikiTitle,text:n}),t.navigationList=e}),500)}))},initQueryParam:function(e){this.spaceUuid=e.query.space,this.nowPageId=e.query.pageId,this.nowPageId&&this.loadPageDetail(this.nowPageId)},computeFileSize:function(e){if(!e)return"-";var t="";t=e<102.4?e.toFixed(2)+"B":e<104857.6?(e/1024).toFixed(2)+"KB":e<107374182.4?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB";var i=t+"",a=i.indexOf("."),n=i.substr(a+1,2);return"00"==n?i.substring(0,a)+i.substr(a+3,2):t},closeImagePreview:function(){this.showImagePreview=!1},previewPageImage:function(){var e=this,t=[],i=this.$refs.pageContent.querySelectorAll("img");i.forEach((function(i,a){t.push(i.src),i.onclick=function(){e.previewInitialIndex=a,e.showImagePreviewList=t,e.showImagePreview=!0,setTimeout((function(){return e.initImageViewerMask()}),0)}}))},initImageViewerMask:function(){var e=this,t=this.$refs.imagePreview.querySelectorAll(".el-image-viewer__mask");t.forEach((function(t){t.onclick=function(){return e.showImagePreview=!1}}))}}}),d=u,g=(i("6afb"),i("2877")),h=Object(g["a"])(d,a,n,!1,null,null,null);t["default"]=h.exports},"6afb":function(e,t,i){"use strict";i("aae1")},aae1:function(e,t,i){},b8fe:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"navigation"},[i("div",{ref:"navigation",staticStyle:{display:"inline-block",width:"100%"}}),i("div",{staticClass:"navigation-heading",style:{width:e.navigationWidth}},e._l(e.heading,(function(t){return i("div",{class:"heading-item heading-"+t.level,on:{click:function(i){return e.headingItemClick(t)}}},[e._v(" "+e._s(t.text)+" ")])})),0)])},n=[],o={props:{heading:{type:Array,default:[]}},data:function(){return{navigationWidth:"100px"}},watch:{"$store.state.global.rightAsideWidth":function(){this.computeNavigationWidth()}},mounted:function(){var e=this;window.onresize=function(){e.computeNavigationWidth()},setTimeout((function(){return e.computeNavigationWidth()}),100)},methods:{computeNavigationWidth:function(){this.navigationWidth=window.getComputedStyle(this.$refs.navigation,null).width},headingItemClick:function(e){e.node.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}}},s=o,r=(i("43a0"),i("2877")),l=Object(r["a"])(s,a,n,!1,null,null,null);t["a"]=l.exports},cdc2:function(e,t,i){},d801:function(e,t,i){"use strict";i("b680");t["a"]={computeFileSize:function(e){if(!e)return"-";var t="";t=e<102.4?e.toFixed(2)+"B":e<104857.6?(e/1024).toFixed(2)+"KB":e<107374182.4?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB";var i=t+"",a=i.indexOf("."),n=i.substr(a+1,2);return"00"==n?i.substring(0,a)+i.substr(a+3,2):t}}}}]);