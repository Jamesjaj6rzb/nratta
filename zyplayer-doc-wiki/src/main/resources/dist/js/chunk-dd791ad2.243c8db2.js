(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dd791ad2"],{"03bc":function(e,i,t){"use strict";t("4160"),t("e25e"),t("ac1f"),t("5319"),t("498a"),t("159b");i["a"]={createNavigationHeading:function(){var e=this,i=[],t=document.querySelector(".wiki-page-content").querySelectorAll("h1,h2,h3,h4,h5,h6");if(t.length<=0)return[];t.forEach((function(e){i.push({node:e,level:parseInt(e.tagName.replace(/[h]/i,""),10)})}));var a=[],n=1,r=0;return i.forEach((function(i,t){var o=i.level,s=-1;o>n?(r+=1,s=1===r?-1:t-1):o===n||o<n&&o>r?1===o?(r=1,s=-1):s=a[t-1].pid:o<=r&&(1===o?r=1:(r-=n-o,r<=1&&(r=1)),s=1===r?-1:e.generatePid(a,n-o,t)),n=o,a.push({id:t,pid:s,level:r,node:i.node,text:e.stripTags(e.trim(i.node.innerHTML))})})),console.log(a),a},trim:function(e){return e.replace(/^\s+/g,"").replace(/\s+$/g,"")},stripTags:function(e){return e.replace(/<\/?[^>]+(>|$)/g,"")},generatePid:function(e,i,t){var a;switch(i){case 2:a=e[e[e[t-1].pid].pid].pid;break;case 3:a=e[e[e[e[t-1].pid].pid].pid].pid;break;case 4:a=e[e[e[e[e[t-1].pid].pid].pid].pid].pid;break;case 5:a=e[e[e[e[e[e[t-1].pid].pid].pid].pid].pid].pid;break;default:a=e[e[t-1].pid].pid;break}return a}}},"43a0":function(e,i,t){"use strict";var a=t("cdc2"),n=t.n(a);n.a},"498a":function(e,i,t){"use strict";var a=t("23e7"),n=t("58a8").trim,r=t("e070");a({target:"String",proto:!0,forced:r("trim")},{trim:function(){return n(this)}})},"4aa7":function(e,i,t){"use strict";t.r(i);var a=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"page-share-view-vue"},[t("el-row",{attrs:{type:"border-card"}},[t("el-row",[e.navigationList.length>0?t("el-col",{attrs:{xs:0,sm:4,md:4,lg:6,xl:6}},[t("Navigation",{attrs:{heading:e.navigationList}})],1):e._e(),t("el-col",{attrs:{xs:24,sm:e.navigationList.length>0?20:24,md:e.navigationList.length>0?20:24,lg:e.navigationList.length>0?18:24,xl:e.navigationList.length>0?18:24}},[t("div",{staticStyle:{"max-width":"1000px","padding-left":"10px",margin:"0 auto"}},[t("div",{ref:"wikiTitle",staticClass:"wiki-title"},[e._v(e._s(e.wikiPage.name))]),t("div",{staticClass:"wiki-author"},[e.wikiPage.updateTime?t("span",[e._v("最后修改："+e._s(e.wikiPage.updateTime))]):t("span",[e._v("创建时间："+e._s(e.wikiPage.createTime))])]),t("div",{staticClass:"wiki-files"},[t("el-table",{directives:[{name:"show",rawName:"v-show",value:e.pageFileList.length>0,expression:"pageFileList.length > 0"}],staticStyle:{width:"100%","margin-bottom":"5px"},attrs:{data:e.pageFileList,border:""}},[t("el-table-column",{attrs:{label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("a",{attrs:{target:"_blank",href:i.row.fileUrl}},[e._v(e._s(i.row.fileName))])]}}])}),t("el-table-column",{attrs:{label:"文件大小"},scopedSlots:e._u([{key:"default",fn:function(i){return[e._v(e._s(e.computeFileSize(i.row.fileSize)))]}}])}),t("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180px"}}),t("el-table-column",{attrs:{prop:"downloadNum",label:"下载次数",width:"80px"}})],1)],1),t("div",{ref:"pageContent",staticClass:"wiki-page-content"},[2==e.wikiPage.editorType?t("div",{staticClass:"markdown-body",domProps:{innerHTML:e._s(e.pageShowDetail)}}):t("div",{staticClass:"wang-editor-body",domProps:{innerHTML:e._s(e.pageShowDetail)}})])])])],1)],1),t("div",{ref:"imagePreview"},[e.showImagePreview?t("el-image-viewer",{attrs:{"url-list":e.showImagePreviewList,"on-close":e.closeImagePreview,"initial-index":e.previewInitialIndex}}):e._e()],1)],1)},n=[],r=(t("4160"),t("c975"),t("b0c0"),t("b680"),t("159b"),t("0a79")),o=t("b2d8"),s=(t("d801"),t("03bc")),l=t("b8fe"),c=t("08a9"),d=(t("c350"),t("64e1"),{data:function(){return{spaceUuid:"",nowPageId:"",wikiPage:{},pageFileList:[],pageShowDetail:"",previewInitialIndex:0,showImagePreview:!1,showImagePreviewList:[],navigationList:[]}},components:{"el-image-viewer":c["a"],Navigation:l["a"]},beforeRouteUpdate:function(e,i,t){this.initQueryParam(e),t()},mounted:function(){this.initQueryParam(this.$route)},methods:{loadPageDetail:function(e){var i=this,t={pageId:e,space:this.spaceUuid};r["a"].openPageDetail(t).then((function(e){var t=e.data.wikiPage||{};t.selfZan=e.data.selfZan||0,i.wikiPage=t;var a=e.data.pageContent||{};i.pageFileList=e.data.fileList||[],2===i.wikiPage.editorType&&(a.content=o["markdownIt"].render(a.content)),i.pageShowDetail=a.content;var n=t.name||"WIKI-内容展示";document.title=n,setTimeout((function(){i.previewPageImage();var e=s["a"].createNavigationHeading();e.length>0&&e.unshift({level:1,node:i.$refs.wikiTitle,text:n}),i.navigationList=e}),500)}))},initQueryParam:function(e){this.spaceUuid=e.query.space,this.nowPageId=e.query.pageId,this.nowPageId&&this.loadPageDetail(this.nowPageId)},computeFileSize:function(e){if(!e)return"-";var i="";i=e<102.4?e.toFixed(2)+"B":e<104857.6?(e/1024).toFixed(2)+"KB":e<107374182.4?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB";var t=i+"",a=t.indexOf("."),n=t.substr(a+1,2);return"00"==n?t.substring(0,a)+t.substr(a+3,2):i},closeImagePreview:function(){this.showImagePreview=!1},previewPageImage:function(){var e=this,i=[],t=this.$refs.pageContent.querySelectorAll("img");t.forEach((function(t,a){i.push(t.src),t.onclick=function(){e.previewInitialIndex=a,e.showImagePreviewList=i,e.showImagePreview=!0,setTimeout((function(){return e.initImageViewerMask()}),0)}}))},initImageViewerMask:function(){var e=this,i=this.$refs.imagePreview.querySelectorAll(".el-image-viewer__mask");i.forEach((function(i){i.onclick=function(){return e.showImagePreview=!1}}))}}}),u=d,g=(t("6afb"),t("2877")),p=Object(g["a"])(u,a,n,!1,null,null,null);i["default"]=p.exports},"6afb":function(e,i,t){"use strict";var a=t("aae1"),n=t.n(a);n.a},aae1:function(e,i,t){},b8fe:function(e,i,t){"use strict";var a=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"navigation"},[t("div",{ref:"navigation",staticStyle:{display:"inline-block",width:"100%"}}),t("div",{staticClass:"navigation-heading",style:{width:e.navigationWidth}},e._l(e.heading,(function(i){return t("div",{class:"heading-item heading-"+i.level,on:{click:function(t){return e.headingItemClick(i)}}},[e._v(" "+e._s(i.text)+" ")])})),0)])},n=[],r={props:{heading:{type:Array,default:[]}},data:function(){return{navigationWidth:"100px"}},mounted:function(){var e=this;window.onresize=function(){e.computeNavigationWidth()},setTimeout((function(){return e.computeNavigationWidth()}),100)},methods:{computeNavigationWidth:function(){this.navigationWidth=window.getComputedStyle(this.$refs.navigation,null).width},headingItemClick:function(e){e.node.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}}},o=r,s=(t("43a0"),t("2877")),l=Object(s["a"])(o,a,n,!1,null,null,null);i["a"]=l.exports},cdc2:function(e,i,t){},d801:function(e,i,t){"use strict";t("c975"),t("b680");i["a"]={computeFileSize:function(e){if(!e)return"-";var i="";i=e<102.4?e.toFixed(2)+"B":e<104857.6?(e/1024).toFixed(2)+"KB":e<107374182.4?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB";var t=i+"",a=t.indexOf("."),n=t.substr(a+1,2);return"00"==n?t.substring(0,a)+t.substr(a+3,2):i}}},e070:function(e,i,t){var a=t("d039"),n=t("5899"),r="​᠎";e.exports=function(e){return a((function(){return!!n[e]()||r[e]()!=r||n[e].name!==e}))}}}]);