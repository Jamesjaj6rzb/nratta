import{S as StarOutlined,p as SettingOutlined,C as CarryOutOutlined,q as FileTextOutlined,s as DashboardOutlined,I as InfoCircleOutlined,r as resolveComponent,o as openBlock,b as createElementBlock,F as Fragment,c as createBlock,w as withCtx,k as createCommentVNode,e as createBaseVNode,t as toDisplayString,d as renderList,a as createVNode,u as useStore,v as useRoute,x as useRouter,y as ref,B as message,E as nextTick,m as createTextVNode,H as onMounted,J as withDirectives,L as vShow,M as BarChartOutlined,N as MenuFoldOutlined,O as MenuUnfoldOutlined,P as pushScopeId,Q as popScopeId}from"./vendor.5cdfcd20.js";import{_ as _export_sfc}from"./main.635ba9a5.js";import{z as zyplayerApi}from"./custom.9c7f1745.js";import{a as analysisSwaggerData,g as getTreeDataForTag,b as analysisOpenApiData,c as getTreeDataForTag$1,_ as _imports_0}from"./api-logo.21a29e0a.js";const _sfc_main$4={name:"MenuLayoutChildren",props:{menuItem:Object},data(){return{}},components:{StarOutlined,SettingOutlined,CarryOutOutlined,FileTextOutlined,DashboardOutlined,InfoCircleOutlined},methods:{haveShowChildren(n){return n.filter(o=>!o.meta||!o.meta.hidden).length>0}}};function _sfc_render$4(n,o,t,a,r,s){const c=resolveComponent("SettingOutlined"),m=resolveComponent("FileTextOutlined"),i=resolveComponent("MenuLayoutChildren"),u=resolveComponent("a-sub-menu"),d=resolveComponent("DashboardOutlined"),l=resolveComponent("InfoCircleOutlined"),_=resolveComponent("router-link"),p=resolveComponent("a-menu-item");return!t.menuItem.meta||!t.menuItem.meta.hidden?(openBlock(),createElementBlock(Fragment,{key:0},[t.menuItem.children?(openBlock(),createElementBlock(Fragment,{key:0},[s.haveShowChildren(t.menuItem.children)?(openBlock(),createBlock(u,{key:t.menuItem.path},{title:withCtx(()=>[t.menuItem.meta?(openBlock(),createElementBlock(Fragment,{key:0},[t.menuItem.meta.icon==="SettingOutlined"?(openBlock(),createBlock(c,{key:0})):createCommentVNode("",!0),t.menuItem.meta.icon==="FileTextOutlined"?(openBlock(),createBlock(m,{key:1})):createCommentVNode("",!0)],64)):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString(t.menuItem.name),1)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.menuItem.children,y=>(openBlock(),createBlock(i,{menuItem:y},null,8,["menuItem"]))),256))]),_:1})):createCommentVNode("",!0)],64)):(openBlock(),createBlock(p,{key:t.menuItem.path},{default:withCtx(()=>[createVNode(_,{to:{path:t.menuItem.path,query:t.menuItem.query}},{default:withCtx(()=>[t.menuItem.meta?(openBlock(),createElementBlock(Fragment,{key:0},[t.menuItem.meta.icon==="DashboardOutlined"?(openBlock(),createBlock(d,{key:0})):createCommentVNode("",!0),t.menuItem.meta.icon==="FileTextOutlined"?(openBlock(),createBlock(m,{key:1})):createCommentVNode("",!0),t.menuItem.meta.icon==="InfoCircleOutlined"?(openBlock(),createBlock(l,{key:2})):createCommentVNode("",!0)],64)):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString(t.menuItem.name),1)]),_:1},8,["to"])]),_:1}))],64)):createCommentVNode("",!0)}var MenuChildrenLayout=_export_sfc(_sfc_main$4,[["render",_sfc_render$4]]),Swagger_vue_vue_type_style_index_0_lang="";const _sfc_main$3={setup(){const store=useStore();useRoute();const router=useRouter();let tagPathMap=ref({}),swaggerDoc=ref({}),treeData=ref([]),expandedKeys=ref([]),choiceDocId=ref(""),searchKeywords=ref("");const docChecked=(n,o)=>{if(o.node.isLeaf){let t=o.node.dataRef;router.push({path:"/share/swagger/view",query:t.query})}},loadDoc=(n,o,t)=>{choiceDocId.value=n,searchKeywords.value=o,zyplayerApi.apiShareDocApisDetail({shareUuid:n}).then(a=>{let r=toJsonObj(a.data);if(typeof r!="object"||!r.swagger){t(!1),message.error("\u83B7\u53D6\u6587\u6863\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u6863\u662F\u5426\u4E3A\u6807\u51C6\u7684Swagger\u6587\u6863\u683C\u5F0F");return}swaggerDoc.value=r,store.commit("setSwaggerDoc",r);let s=analysisSwaggerData(r);store.commit("setSwaggerUrlMethodMap",s.urlMethodMap),store.commit("setSwaggerMethodStatistic",s.methodStatistic),tagPathMap.value=s.tagPathMap,loadTreeData(),t(!0)})},loadTreeData=async()=>{let n={uuid:choiceDocId.value};treeData.value=getTreeDataForTag(swaggerDoc.value,tagPathMap.value,searchKeywords.value,n),await nextTick(),expandedKeys.value=["main"]},toJsonObj=value=>{if(typeof value!="string")return value;try{return JSON.parse(value)}catch(e){try{return eval("("+value+")")}catch(n){return value||void 0}}};return{expandedKeys,docChecked,loadDoc,treeData}}},_hoisted_1$3=createTextVNode("get"),_hoisted_2$3=createTextVNode("post"),_hoisted_3$3=createTextVNode("put"),_hoisted_4$1=createTextVNode("head"),_hoisted_5$1=createTextVNode("patch"),_hoisted_6$1=createTextVNode("delete"),_hoisted_7$1=createTextVNode("options"),_hoisted_8$1=createTextVNode("trace"),_hoisted_9$1={style:{margin:"0 6px 0 3px"}};function _sfc_render$3(n,o,t,a,r,s){const c=resolveComponent("a-tag"),m=resolveComponent("a-badge"),i=resolveComponent("a-directory-tree");return openBlock(),createBlock(i,{showIcon:!1,"tree-data":a.treeData,expandedKeys:a.expandedKeys,"onUpdate:expandedKeys":o[0]||(o[0]=u=>a.expandedKeys=u),onSelect:a.docChecked},{title:withCtx(({title:u,isLeaf:d,method:l,children:_,key:p})=>[d?(openBlock(),createElementBlock(Fragment,{key:0},[l==="get"?(openBlock(),createBlock(c,{key:0,color:"pink"},{default:withCtx(()=>[_hoisted_1$3]),_:1})):l==="post"?(openBlock(),createBlock(c,{key:1,color:"red"},{default:withCtx(()=>[_hoisted_2$3]),_:1})):l==="put"?(openBlock(),createBlock(c,{key:2,color:"orange"},{default:withCtx(()=>[_hoisted_3$3]),_:1})):l==="head"?(openBlock(),createBlock(c,{key:3,color:"green"},{default:withCtx(()=>[_hoisted_4$1]),_:1})):l==="patch"?(openBlock(),createBlock(c,{key:4,color:"cyan"},{default:withCtx(()=>[_hoisted_5$1]),_:1})):l==="delete"?(openBlock(),createBlock(c,{key:5,color:"blue"},{default:withCtx(()=>[_hoisted_6$1]),_:1})):l==="options"?(openBlock(),createBlock(c,{key:6,color:"purple"},{default:withCtx(()=>[_hoisted_7$1]),_:1})):l==="trace"?(openBlock(),createBlock(c,{key:7,color:"purple"},{default:withCtx(()=>[_hoisted_8$1]),_:1})):createCommentVNode("",!0)],64)):createCommentVNode("",!0),createBaseVNode("span",_hoisted_9$1,toDisplayString(u),1),_?(openBlock(),createBlock(m,{key:1,count:_.length,"number-style":{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"}},null,8,["count"])):createCommentVNode("",!0)]),_:1},8,["tree-data","expandedKeys","onSelect"])}var DocTreeSwagger=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),OpenApi_vue_vue_type_style_index_0_lang="";const _sfc_main$2={setup(){const store=useStore();useRoute();const router=useRouter();let tagPathMap=ref({}),openApiDoc=ref({}),treeData=ref([]),expandedKeys=ref([]),choiceDocId=ref(""),searchKeywords=ref("");const docChecked=(n,o)=>{if(o.node.isLeaf){let t=o.node.dataRef;router.push({path:"/share/openapi/view",query:t.query})}},loadDoc=(n,o,t)=>{choiceDocId.value=n,searchKeywords.value=o,zyplayerApi.apiShareDocApisDetail({shareUuid:n}).then(a=>{let r=toJsonObj(a.data);if(typeof r!="object"||!r.openapi){message.error("\u83B7\u53D6\u6587\u6863\u6570\u636E\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u6863\u662F\u5426\u4E3A\u6807\u51C6\u7684OpenApi\u6587\u6863\u683C\u5F0F");return}openApiDoc.value=r,store.commit("setOpenApiDoc",r);let s=analysisOpenApiData(r);store.commit("setOpenApiUrlMethodMap",s.urlMethodMap),store.commit("setOpenApiMethodStatistic",s.methodStatistic),tagPathMap.value=s.tagPathMap,loadTreeData(),t()})},loadTreeData=async()=>{let n={uuid:choiceDocId.value};treeData.value=getTreeDataForTag$1(openApiDoc.value,tagPathMap.value,searchKeywords.value,n),await nextTick(),expandedKeys.value=["main"]},toJsonObj=value=>{if(typeof value!="string")return value;try{return JSON.parse(value)}catch(e){try{return eval("("+value+")")}catch(n){return value||void 0}}};return{expandedKeys,docChecked,loadDoc,treeData}}},_hoisted_1$2=createTextVNode("get"),_hoisted_2$2=createTextVNode("post"),_hoisted_3$2=createTextVNode("put"),_hoisted_4=createTextVNode("head"),_hoisted_5=createTextVNode("patch"),_hoisted_6=createTextVNode("delete"),_hoisted_7=createTextVNode("options"),_hoisted_8=createTextVNode("trace"),_hoisted_9={style:{margin:"0 6px 0 3px"}};function _sfc_render$2(n,o,t,a,r,s){const c=resolveComponent("a-tag"),m=resolveComponent("a-badge"),i=resolveComponent("a-directory-tree");return openBlock(),createBlock(i,{showIcon:!1,"tree-data":a.treeData,expandedKeys:a.expandedKeys,"onUpdate:expandedKeys":o[0]||(o[0]=u=>a.expandedKeys=u),onSelect:a.docChecked},{title:withCtx(({title:u,isLeaf:d,method:l,children:_,key:p})=>[d?(openBlock(),createElementBlock(Fragment,{key:0},[l==="get"?(openBlock(),createBlock(c,{key:0,color:"pink"},{default:withCtx(()=>[_hoisted_1$2]),_:1})):l==="post"?(openBlock(),createBlock(c,{key:1,color:"red"},{default:withCtx(()=>[_hoisted_2$2]),_:1})):l==="put"?(openBlock(),createBlock(c,{key:2,color:"orange"},{default:withCtx(()=>[_hoisted_3$2]),_:1})):l==="head"?(openBlock(),createBlock(c,{key:3,color:"green"},{default:withCtx(()=>[_hoisted_4]),_:1})):l==="patch"?(openBlock(),createBlock(c,{key:4,color:"cyan"},{default:withCtx(()=>[_hoisted_5]),_:1})):l==="delete"?(openBlock(),createBlock(c,{key:5,color:"blue"},{default:withCtx(()=>[_hoisted_6]),_:1})):l==="options"?(openBlock(),createBlock(c,{key:6,color:"purple"},{default:withCtx(()=>[_hoisted_7]),_:1})):l==="trace"?(openBlock(),createBlock(c,{key:7,color:"purple"},{default:withCtx(()=>[_hoisted_8]),_:1})):createCommentVNode("",!0)],64)):createCommentVNode("",!0),createBaseVNode("span",_hoisted_9,toDisplayString(u),1),_?(openBlock(),createBlock(m,{key:1,count:_.length,"number-style":{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"}},null,8,["count"])):createCommentVNode("",!0)]),_:1},8,["tree-data","expandedKeys","onSelect"])}var DocTreeOpenApi=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),MenuLayout_vue_vue_type_style_index_0_lang="";const _sfc_main$1={props:{collapsed:{type:Boolean,default:!1}},components:{MenuChildrenLayout,DocTreeSwagger,DocTreeOpenApi},setup(n){const o=useStore(),t=useRoute();useRouter();let a=ref([]),r=ref([]),s=ref([]),c=ref(!1),m=ref([]),i=ref(),u=ref(""),d=ref({});const l=()=>{zyplayerApi.apiShareDocDetail({shareUuid:i.value}).then(h=>{d.value=h.data||{},o.commit("setApiDoc",d.value),y()})};let _=ref(),p=ref();const y=async()=>{c.value=!0,await nextTick();const h=()=>{c.value=!1};d.value.docType===1||d.value.docType===2?_.value&&_.value.loadDoc(i.value,u.value,h):(d.value.docType===3||d.value.docType===4)&&p.value&&p.value.loadDoc(i.value,u.value,h)},f=()=>{y()};return onMounted(()=>{if(i.value=t.query.uuid,!i.value){message.error("\u8BBF\u95EE\u7684\u5F00\u653E\u6587\u6863\u53C2\u6570\u9519\u8BEF");return}a.value=[{path:"/share/home",name:"\u5F00\u653E\u6587\u6863\u4F7F\u7528\u8BF4\u660E",meta:{icon:"FileTextOutlined"},query:{uuid:i.value}}];let h=t.meta||{},g=t.path;h.parentPath&&(g=h.parentPath),r.value=[g];let k=t.matched;k.length>=1&&(s.value=[k[1].path]),l()}),{menuData:a,selectedKeys:r,openKeys:s,treeDataLoading:c,docResourceList:m,docChoiceId:i,searchKeywords:u,swaggerRef:_,openApiRef:p,docChoice:d,docSearch:f}}},_hoisted_1$1={class:"menu-layout"},_hoisted_2$1={class:"doc-tree"},_hoisted_3$1={style:{"margin-bottom":"10px"}};function _sfc_render$1(n,o,t,a,r,s){const c=resolveComponent("menu-children-layout"),m=resolveComponent("a-menu"),i=resolveComponent("a-divider"),u=resolveComponent("a-input-search"),d=resolveComponent("DocTreeSwagger"),l=resolveComponent("DocTreeOpenApi"),_=resolveComponent("a-spin");return openBlock(),createElementBlock("div",_hoisted_1$1,[createVNode(m,{theme:"light",mode:"inline","inline-collapsed":!1,openKeys:a.openKeys,"onUpdate:openKeys":o[0]||(o[0]=p=>a.openKeys=p),selectedKeys:a.selectedKeys,"onUpdate:selectedKeys":o[1]||(o[1]=p=>a.selectedKeys=p)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.menuData,p=>(openBlock(),createBlock(c,{menuItem:p},null,8,["menuItem"]))),256))]),_:1},8,["openKeys","selectedKeys"]),createVNode(i,{style:{margin:"6px 0"}}),withDirectives(createBaseVNode("div",_hoisted_2$1,[createVNode(_,{tip:"\u52A0\u8F7D\u4E2D...",spinning:a.treeDataLoading},{default:withCtx(()=>[createBaseVNode("div",_hoisted_3$1,[createVNode(u,{value:a.searchKeywords,"onUpdate:value":o[2]||(o[2]=p=>a.searchKeywords=p),placeholder:"\u641C\u7D22\u6587\u6863\u5185\u5BB9",style:{width:"100%","margin-top":"10px"},onSearch:a.docSearch},null,8,["value","onSearch"])]),a.docChoice&&a.docChoice.docType?(openBlock(),createElementBlock(Fragment,{key:0},[a.docChoice.docType===1||a.docChoice.docType===2?(openBlock(),createBlock(d,{key:0,ref:"swaggerRef"},null,512)):createCommentVNode("",!0),a.docChoice.docType===3||a.docChoice.docType===4?(openBlock(),createBlock(l,{key:1,ref:"openApiRef"},null,512)):createCommentVNode("",!0)],64)):createCommentVNode("",!0)]),_:1},8,["spinning"])],512),[[vShow,!t.collapsed]])])}var MenuLayout=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),GlobalLayout_vue_vue_type_style_index_0_scoped_true_lang="",GlobalLayout_vue_vue_type_style_index_1_lang="";const minHeight=window.innerHeight-64-122,_sfc_main={components:{MenuLayout,BarChartOutlined,MenuFoldOutlined,MenuUnfoldOutlined},data(){return{minHeight:minHeight+"px",appMenuCollapsed:!1,rightAsideWidth:300}},computed:{},mounted(){this.dragChangeRightAsideWidth()},methods:{dragChangeRightAsideWidth:function(){let n=this.$refs.rightResize,o=this.$refs.rightResizeBar;n.onmousedown=t=>{let a=t.clientX;return n.style.background="#ccc",o.style.background="#aaa",n.left=n.offsetLeft,document.onmousemove=r=>{let s=r.clientX,c=a-s;(c<0&&this.rightAsideWidth<600||c>0&&this.rightAsideWidth>280)&&(a=s,this.rightAsideWidth-=c,this.rightAsideWidth<280&&(this.rightAsideWidth=280))},document.onmouseup=()=>{n.style.background="#fafafa",o.style.background="#ccc",document.onmousemove=null,document.onmouseup=null},!1}}}},_withScopeId=n=>(pushScopeId("data-v-698a1900"),n=n(),popScopeId(),n),_hoisted_1=_withScopeId(()=>createBaseVNode("div",{class:"logo"},[createBaseVNode("img",{src:_imports_0}),createBaseVNode("h1",null,"API\u5F00\u653E\u6587\u6863")],-1)),_hoisted_2={ref:"rightResize",class:"right-resize"},_hoisted_3={ref:"rightResizeBar"};function _sfc_render(n,o,t,a,r,s){const c=resolveComponent("menu-layout"),m=resolveComponent("a-layout-sider"),i=resolveComponent("MenuUnfoldOutlined"),u=resolveComponent("MenuFoldOutlined"),d=resolveComponent("a-col"),l=resolveComponent("a-row"),_=resolveComponent("a-layout-header"),p=resolveComponent("router-view"),y=resolveComponent("a-layout-content"),f=resolveComponent("a-layout");return openBlock(),createBlock(f,{class:"api-menu-trigger"},{default:withCtx(()=>[createVNode(m,{theme:"light",trigger:null,collapsible:"",collapsed:r.appMenuCollapsed,"onUpdate:collapsed":o[0]||(o[0]=h=>r.appMenuCollapsed=h),width:r.rightAsideWidth,style:{height:"100vh",overflow:"auto"}},{default:withCtx(()=>[_hoisted_1,createVNode(c,{collapsed:r.appMenuCollapsed},null,8,["collapsed"])]),_:1},8,["collapsed","width"]),withDirectives(createBaseVNode("div",_hoisted_2,[createBaseVNode("i",_hoisted_3,"...",512)],512),[[vShow,!r.appMenuCollapsed]]),createVNode(f,null,{default:withCtx(()=>[createVNode(_,{style:{"border-bottom":"2px solid #eee",background:"#fff",padding:"0","box-shadow":"0 1px 4px rgba(0, 21, 41, 0.08)","-webkit-box-shadow":"0 1px 4px rgba(0, 21, 41, 0.08)"}},{default:withCtx(()=>[createVNode(l,{type:"flex"},{default:withCtx(()=>[createVNode(d,{flex:"auto"},{default:withCtx(()=>[r.appMenuCollapsed?(openBlock(),createBlock(i,{key:0,class:"trigger",onClick:o[1]||(o[1]=h=>r.appMenuCollapsed=!r.appMenuCollapsed)})):(openBlock(),createBlock(u,{key:1,class:"trigger",onClick:o[2]||(o[2]=h=>r.appMenuCollapsed=!r.appMenuCollapsed)}))]),_:1}),createVNode(d,{flex:"400px",style:{"text-align":"right","padding-right":"20px"}})]),_:1})]),_:1}),createVNode(y,{style:{height:"calc(100vh - 80px)",overflow:"auto",background:"#fff"}},{default:withCtx(()=>[createVNode(p)]),_:1})]),_:1})]),_:1})}var GlobalLayout=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-698a1900"]]);export{GlobalLayout as default};
