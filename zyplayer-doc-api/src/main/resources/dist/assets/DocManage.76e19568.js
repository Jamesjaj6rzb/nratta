import{z as x,g as Q}from"./custom.9c7f1745.js";import{T as Y,I as $,u as F,y as m,H as M,r as d,o as u,c as p,w as e,a as t,B as J,m as n,D as ee,V as te,W as oe,X as ae,b as U,F as I,k as y,J as W,e as r,t as H}from"./vendor.5cdfcd20.js";import{a as X}from"./index.dd427060.js";import{m as ne}from"./mavon-editor.463f2be8.js";import{_ as Z}from"./main.635ba9a5.js";const le={components:{aceEditor:X,BranchesOutlined:Y,mavonEditor:ne.exports.mavonEditor,InfoCircleOutlined:$},setup(){F();let w=m({}),a=m(""),v=m(!1);const o=async()=>{if(!a.value){J.error("\u8BF7\u8F93\u5165\u5F00\u653E\u6587\u6863\u7684\u8BF4\u660E");return}x.apiDocUpdate({id:w.value.id,shareInstruction:a.value}).then(E=>{v.value=!1})},b=async E=>{v.value=!0,x.apiDocDetail({id:E}).then(s=>{w.value=s.data,a.value=s.data.shareInstruction})};return M(()=>{}),{editShareInstructionVisible:v,docEdit:w,shareInstruction:a,handleNewDocOk:o,editDoc:b,toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,subfield:!0,preview:!0}}}},ie=n(" \u7F16\u8F91\u5F00\u653E\u6587\u6863\u8BF4\u660E "),de=n("\u6B64\u8BF4\u660E\u6587\u6863\u5C06\u5C55\u793A\u5728\u5F00\u653E\u6587\u6863\u7684\u9996\u9875\u5C55\u793A\uFF0C\u53EF\u70B9\u51FB\u2018\u67E5\u770B\u5F00\u653E\u6587\u6863\u2019\u67E5\u770B\u6548\u679C");function se(w,a,v,o,b,E){const s=d("info-circle-outlined"),h=d("a-tooltip"),c=d("mavon-editor"),_=d("a-modal");return u(),p(_,{visible:o.editShareInstructionVisible,"onUpdate:visible":a[1]||(a[1]=k=>o.editShareInstructionVisible=k),onOk:o.handleNewDocOk,width:"90%",bodyStyle:{height:"calc(100vh - 300px)"}},{title:e(()=>[ie,t(h,{placement:"bottom"},{title:e(()=>[de]),default:e(()=>[t(s)]),_:1})]),default:e(()=>[t(c,{ref:"mavonEditor",modelValue:o.shareInstruction,"onUpdate:modelValue":a[0]||(a[0]=k=>o.shareInstruction=k),toolbars:o.toolbars,externalLink:!1,style:{height:"100%"},placeholder:"\u8BF7\u5F55\u5165\u6587\u6863\u5185\u5BB9"},null,8,["modelValue","toolbars"])]),_:1},8,["visible","onOk","bodyStyle"])}var re=Z(le,[["render",se]]);const ce={components:{aceEditor:X,EditShareInstruction:re,DownOutlined:ee,LinkOutlined:te,EditOutlined:oe},setup(){const w=F();let a=m([]),v=m(!1),o=m({docType:"",openVisit:"",docStatus:"",pageNum:1,pageSize:20}),b=m({pageSize:20,pageNum:1,total:0,showSizeChanger:!0,pageSizeOptions:["20","50","100"],showTotal:l=>`\u5171${l}\u6761`});const E=(l,g,D)=>{b.value.pageNum=l.current,b.value.pageSize=l.pageSize,o.value.pageNum=l.current,o.value.pageSize=l.pageSize,s()},s=async()=>{v.value=!0,x.apiDocList(o.value).then(l=>{setTimeout(()=>v.value=!1,500),a.value=l.data||[],b.value.total=l.total||0})};let h=m({}),c=m(),_=m(!1);const k=async()=>{c.value.validate().then(()=>{x.apiDocAdd(h.value).then(l=>{s(),_.value=!1,w.commit("addDocChangedNum")})}).catch(l=>{console.log("error",l)})},z=async()=>{_.value=!0,h.value={docType:1,openVisit:0,docStatus:1,isNew:1}},N=l=>{x.apiDocDetail({id:l.id}).then(g=>{h.value=g.data,_.value=!0})},V=async(l,g,D)=>{x.apiDocUpdate({id:l,docStatus:g,yn:D}).then(f=>{s(),w.commit("addDocChangedNum")})},T=async l=>V(l.id,null,0),O=l=>{l.shareUuid?l.openVisit===1?window.open(Q()+"/doc-api#/share/home?uuid="+l.shareUuid):J.warning("\u6539\u6587\u6863\u5C1A\u672A\u5F00\u542F\u5F00\u653E\u8BBF\u95EE\u529F\u80FD\uFF0C\u8BF7\u5728\u7F16\u8F91\u9875\u9009\u62E9\u5F00\u653E\u540E\u518D\u8BD5"):J.warning("\u8BF7\u5148\u4FDD\u5B58\u6587\u6863\u540E\u518D\u8BD5")},q=(l,g)=>{l.key==="shareView"?O(g):l.key==="shareInstruction"&&L.value.editDoc(g.id)};let L=m();return M(()=>{s()}),{searchParam:o,docList:a,docListLoading:v,newDocVisible:_,docEdit:h,newDocFormRef:c,searchDocList:s,openNewDoc:z,handleNewDocOk:k,deleteDoc:T,editDoc:N,handleTableChange:E,openShareViewWindow:O,handleActionMenuClick:q,pagination:b,instruction:L,newDocRules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u6863\u540D\u79F0",trigger:"change"}],docUrl:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u6863\u5730\u5740",trigger:"change"}],jsonContent:[{required:!0,message:"\u8BF7\u8F93\u5165JSON\u683C\u5F0F\u7684swagger\u6587\u6863\u5185\u5BB9",trigger:"change"}],docType:[{type:"number",required:!0,message:"\u8BF7\u9009\u62E9\u6587\u6863\u7C7B\u578B",trigger:"change"}],openVisit:[{type:"number",required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5F00\u653E\u8BBF\u95EE",trigger:"change"}],docStatus:[{type:"number",required:!0,message:"\u8BF7\u9009\u62E9\u6587\u6863\u72B6\u6001",trigger:"change"}]},docListColumns:[{title:"ID",dataIndex:"id",width:70},{title:"\u6587\u6863\u540D\u79F0",dataIndex:"name",width:250},{title:"\u6587\u6863\u7C7B\u578B",dataIndex:"docType",width:120},{title:"\u5F00\u653E\u8BBF\u95EE",dataIndex:"openVisit",width:90},{title:"\u72B6\u6001",dataIndex:"docStatus",width:90},{title:"\u6587\u6863\u5730\u5740",dataIndex:"docUrl"},{title:"\u76EE\u6807\u57DF\u540D",dataIndex:"rewriteDomain",width:250},{title:"\u64CD\u4F5C",dataIndex:"operation",fixed:"right",width:200}],aceEditorConfig:{wrap:!0,autoScrollEditorIntoView:!0,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,minLines:10,maxLines:15},swaggerDocDemo:`{
    "swagger": "2.0",
    "info": {},
    "host": "doc.zyplayer.com",
    "basePath":"/",
    "tags": [],
    "paths": {},
    "definitions": {}
}`,openApiDocDemo:`{
    "openapi": "3.0.3",
    "components": {}
    "servers": [],
    "paths": {},
    "info": {},
}`}}},ue=n("\u5168\u90E8"),_e=n("URL\u6DFB\u52A0"),pe=n("JSON\u5185\u5BB9"),me=n("\u5168\u90E8"),he=n("\u5426"),fe=n("\u662F"),ve=n("\u5168\u90E8"),ge=n("\u542F\u7528"),ye=n("\u7981\u7528"),we=n("\u67E5\u8BE2"),be=n("\u65B0\u5EFA"),ke=n("\u7F16\u8F91"),De=n("\u5220\u9664"),Se=n(" \u67E5\u770B\u5F00\u653E\u6587\u6863"),Ee=n(" \u7F16\u8F91\u5F00\u653E\u6587\u6863\u8BF4\u660E"),xe=n("\u66F4\u591A"),Ce=n("Swagger URL"),Ue=n("Swagger JSON"),Ie=n("OpenApi JSON"),Ve=n("\u672A\u5F00\u653E"),Oe=n("\u5DF2\u5F00\u653E"),Le=n("\u542F\u7528"),ze=n("\u7981\u7528"),Ne=n("Swagger URL"),Te=n("Swagger JSON"),qe=n("OpenApi URL"),Ae=n("OpenApi JSON"),Re=n("\u81EA\u5EFAAPI"),je=n(" \u67E5\u770B\u6587\u6863\u5730\u5740 "),Je=r("p",null,"\u683C\u5F0F\u4E00\uFF1Ahttp://doc.zyplayer.com/v2/api-docs",-1),Pe=r("p",null,"\u683C\u5F0F\u4E8C\uFF1Ahttp://doc.zyplayer.com/swagger-resources",-1),Be=r("p",null,"\u683C\u5F0F\u4E09\uFF1Ahttp://doc.zyplayer.com/swagger-ui.html",-1),Fe=r("a",null,"\u793A\u4F8B",-1),Me=n(" \u67E5\u770B\u6587\u6863\u5185\u5BB9 "),We=r("div",null,'\u652F\u6301\u4EE5\u4E0B\u683C\u5F0F\u7684Swagger\u6587\u6863\u5185\u5BB9\u8F93\u5165\uFF0C\u5176\u4E2D {"swagger": "2.0"} \u4E3A\u5FC5\u8981\u5C5E\u6027',-1),He={class:"lang-json"},Xe=r("a",null,"\u8BF4\u660E",-1),Ze=n(" \u67E5\u770B\u6587\u6863\u5730\u5740 "),Ge=r("p",null,"\u683C\u5F0F\u4E00\uFF1Ahttp://doc.zyplayer.com/v3/api-docs",-1),Ke=r("a",null,"\u793A\u4F8B",-1),Qe=n(" \u67E5\u770B\u6587\u6863\u5185\u5BB9 "),Ye=r("div",null,'\u652F\u6301\u4EE5\u4E0B\u683C\u5F0F\u7684OpenApi\u6587\u6863\u5185\u5BB9\u8F93\u5165\uFF0C\u5176\u4E2D {"openapi": "3.x.x"} \u4E3A\u5FC5\u8981\u5C5E\u6027',-1),$e={class:"lang-json"},et=r("a",null,"\u8BF4\u660E",-1),tt=n(" \u76EE\u6807\u57DF\u540D "),ot=r("p",null,"\u5728\u6587\u6863\u7684\u5728\u7EBF\u8C03\u8BD5\u754C\u9762\uFF0C\u8BBF\u95EE\u7684\u57DF\u540D\u53EF\u4EE5\u521D\u59CB\u4E3A\u6B64\u5904\u5F55\u5165\u7684\u57DF\u540D\uFF0C\u800C\u975E\u6587\u6863\u672C\u8EAB\u7684\u57DF\u540D\u5730\u5740",-1),at=r("p",null,"\u53EF\u4FBF\u4E8E\u4E0D\u540C\u73AF\u5883\u95F4\u7684\u63A5\u53E3\u6D4B\u8BD5\uFF0C\u4F8B\uFF1Ahttp://doc.zyplayer.com",-1),nt=r("a",null,"\u8BF4\u660E",-1),lt=n("\u5426"),it=n("\u5F00\u653E"),dt=n(" \u5F00\u653E\u8BBF\u95EE\u540E\u65E0\u9700\u767B\u5F55\u5373\u53EF\u901A\u8FC7"),st=n("\u8BBF\u95EE\u6539\u6587\u6863\u4FE1\u606F "),rt=n("\u542F\u7528"),ct=n("\u7981\u7528");function ut(w,a,v,o,b,E){const s=d("a-select-option"),h=d("a-select"),c=d("a-form-item"),_=d("a-button"),k=d("a-form"),z=d("a-popconfirm"),N=d("link-outlined"),V=d("a-menu-item"),T=d("edit-outlined"),O=d("a-menu"),q=d("DownOutlined"),L=d("a-dropdown"),l=d("a-tag"),g=d("a-table"),D=d("a-input"),f=d("a-radio"),A=d("a-radio-group"),C=d("a-popover"),P=d("a-textarea"),G=d("a-modal"),K=d("EditShareInstruction"),B=ae("highlight");return u(),U(I,null,[t(k,{layout:"inline",style:{"margin-bottom":"20px"}},{default:e(()=>[t(c,{label:"\u6587\u6863\u7C7B\u578B"},{default:e(()=>[t(h,{placeholder:"\u8BF7\u9009\u62E9\u6587\u6863\u7C7B\u578B",value:o.searchParam.docType,"onUpdate:value":a[0]||(a[0]=i=>o.searchParam.docType=i),style:{width:"150px"}},{default:e(()=>[t(s,{value:""},{default:e(()=>[ue]),_:1}),t(s,{value:1},{default:e(()=>[_e]),_:1}),t(s,{value:2},{default:e(()=>[pe]),_:1})]),_:1},8,["value"])]),_:1}),t(c,{label:"\u5F00\u653E\u8BBF\u95EE"},{default:e(()=>[t(h,{placeholder:"\u8BF7\u9009\u62E9\u5F00\u653E\u8BBF\u95EE",value:o.searchParam.openVisit,"onUpdate:value":a[1]||(a[1]=i=>o.searchParam.openVisit=i),style:{width:"150px"}},{default:e(()=>[t(s,{value:""},{default:e(()=>[me]),_:1}),t(s,{value:0},{default:e(()=>[he]),_:1}),t(s,{value:1},{default:e(()=>[fe]),_:1})]),_:1},8,["value"])]),_:1}),t(c,{label:"\u72B6\u6001"},{default:e(()=>[t(h,{placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",value:o.searchParam.docStatus,"onUpdate:value":a[2]||(a[2]=i=>o.searchParam.docStatus=i),style:{width:"150px"}},{default:e(()=>[t(s,{value:""},{default:e(()=>[ve]),_:1}),t(s,{value:1},{default:e(()=>[ge]),_:1}),t(s,{value:2},{default:e(()=>[ye]),_:1})]),_:1},8,["value"])]),_:1}),t(c,null,{default:e(()=>[t(_,{onClick:o.searchDocList,type:"primary"},{default:e(()=>[we]),_:1},8,["onClick"]),t(_,{onClick:o.openNewDoc,style:{marginLeft:"8px"}},{default:e(()=>[be]),_:1},8,["onClick"])]),_:1})]),_:1}),t(g,{dataSource:o.docList,columns:o.docListColumns,size:"middle",loading:o.docListLoading,pagination:o.pagination,onChange:o.handleTableChange,scroll:{x:1400,y:"calc(100vh - 300px)"}},{bodyCell:e(({column:i,text:S,record:R})=>[i.dataIndex==="operation"?(u(),U(I,{key:0},[t(_,{size:"small",type:"link",onClick:j=>o.editDoc(R)},{default:e(()=>[ke]),_:2},1032,["onClick"]),t(z,{title:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",onConfirm:j=>o.deleteDoc(R)},{default:e(()=>[t(_,{size:"small",type:"link",danger:""},{default:e(()=>[De]),_:1})]),_:2},1032,["onConfirm"]),t(L,{trigger:["click"]},{overlay:e(()=>[t(O,{onClick:j=>o.handleActionMenuClick(j,R)},{default:e(()=>[t(V,{key:"shareView"},{default:e(()=>[t(N),Se]),_:1}),t(V,{key:"shareInstruction"},{default:e(()=>[t(T),Ee]),_:1})]),_:2},1032,["onClick"])]),default:e(()=>[t(_,{type:"link",size:"small"},{default:e(()=>[xe,t(q)]),_:1})]),_:2},1024)],64)):y("",!0),i.dataIndex==="docType"?(u(),U(I,{key:1},[S===1?(u(),p(l,{key:0,color:"red"},{default:e(()=>[Ce]),_:1})):S===2?(u(),p(l,{key:1,color:"blue"},{default:e(()=>[Ue]),_:1})):S===4?(u(),p(l,{key:2,color:"green"},{default:e(()=>[Ie]),_:1})):y("",!0)],64)):y("",!0),i.dataIndex==="openVisit"?(u(),U(I,{key:2},[S===0?(u(),p(l,{key:0,color:"pink"},{default:e(()=>[Ve]),_:1})):S===1?(u(),p(l,{key:1,color:"green"},{default:e(()=>[Oe]),_:1})):y("",!0)],64)):y("",!0),i.dataIndex==="docStatus"?(u(),U(I,{key:3},[S===1?(u(),p(l,{key:0,color:"green"},{default:e(()=>[Le]),_:1})):S===2?(u(),p(l,{key:1,color:"pink"},{default:e(()=>[ze]),_:1})):y("",!0)],64)):y("",!0)]),_:1},8,["dataSource","columns","loading","pagination","onChange","scroll"]),t(G,{visible:o.newDocVisible,"onUpdate:visible":a[13]||(a[13]=i=>o.newDocVisible=i),title:o.docEdit.isNew?"\u65B0\u589E\u6587\u6863":"\u7F16\u8F91\u6587\u6863",onOk:o.handleNewDocOk,width:800},{default:e(()=>[t(k,{layout:"horizontal",ref:"newDocFormRef",rules:o.newDocRules,model:o.docEdit,"label-col":{span:4},"wrapper-col":{span:20}},{default:e(()=>[t(c,{label:"\u6587\u6863\u540D\u79F0",required:"",name:"name"},{default:e(()=>[t(D,{placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u540D\u79F0",value:o.docEdit.name,"onUpdate:value":a[3]||(a[3]=i=>o.docEdit.name=i)},null,8,["value"])]),_:1}),t(c,{label:"\u6587\u6863\u7C7B\u578B",required:"",name:"docType"},{default:e(()=>[t(A,{value:o.docEdit.docType,"onUpdate:value":a[4]||(a[4]=i=>o.docEdit.docType=i)},{default:e(()=>[t(f,{value:1},{default:e(()=>[Ne]),_:1}),t(f,{value:2},{default:e(()=>[Te]),_:1}),t(f,{value:3},{default:e(()=>[qe]),_:1}),t(f,{value:4},{default:e(()=>[Ae]),_:1}),t(f,{value:5,disabled:""},{default:e(()=>[Re]),_:1})]),_:1},8,["value"])]),_:1}),o.docEdit.docType===1?(u(),p(c,{key:0,label:"\u6587\u6863\u5730\u5740",required:"",name:"docUrl"},{extra:e(()=>[je,t(C,{title:"\u6587\u6863\u5730\u5740\u652F\u6301\u4EE5\u4E0B\u4EFB\u4E00\u683C\u5F0F"},{content:e(()=>[Je,Pe,Be]),default:e(()=>[Fe]),_:1})]),default:e(()=>[t(D,{placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u5730\u5740URL",value:o.docEdit.docUrl,"onUpdate:value":a[5]||(a[5]=i=>o.docEdit.docUrl=i)},null,8,["value"])]),_:1})):o.docEdit.docType===2?(u(),p(c,{key:1,label:"\u6587\u6863\u5185\u5BB9",required:"",name:"jsonContent"},{extra:e(()=>[Me,t(C,{title:"\u6587\u6863\u5185\u5BB9\u8BF4\u660E"},{content:e(()=>[We,W(r("div",null,[r("pre",null,[r("code",He,H(o.swaggerDocDemo),1)])],512),[[B]])]),default:e(()=>[Xe]),_:1})]),default:e(()=>[t(P,{placeholder:"\u8BF7\u8F93\u5165JSON\u683C\u5F0F\u7684Swagger\u6587\u6863\u5185\u5BB9",value:o.docEdit.jsonContent,"onUpdate:value":a[6]||(a[6]=i=>o.docEdit.jsonContent=i),"auto-size":{minRows:5,maxRows:10}},null,8,["value"])]),_:1})):y("",!0),o.docEdit.docType===3?(u(),p(c,{key:2,label:"\u6587\u6863\u5730\u5740",required:"",name:"docUrl"},{extra:e(()=>[Ze,t(C,{title:"\u6587\u6863\u5730\u5740\u652F\u6301\u4EE5\u4E0B\u4EFB\u4E00\u683C\u5F0F"},{content:e(()=>[Ge]),default:e(()=>[Ke]),_:1})]),default:e(()=>[t(D,{placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u5730\u5740URL",value:o.docEdit.docUrl,"onUpdate:value":a[7]||(a[7]=i=>o.docEdit.docUrl=i)},null,8,["value"])]),_:1})):o.docEdit.docType===4?(u(),p(c,{key:3,label:"\u6587\u6863\u5185\u5BB9",required:"",name:"jsonContent"},{extra:e(()=>[Qe,t(C,{title:"\u6587\u6863\u5185\u5BB9\u8BF4\u660E"},{content:e(()=>[Ye,W(r("div",null,[r("pre",null,[r("code",$e,H(o.openApiDocDemo),1)])],512),[[B]])]),default:e(()=>[et]),_:1})]),default:e(()=>[t(P,{placeholder:"\u8BF7\u8F93\u5165JSON\u683C\u5F0F\u7684OpenApi\u6587\u6863\u5185\u5BB9",value:o.docEdit.jsonContent,"onUpdate:value":a[8]||(a[8]=i=>o.docEdit.jsonContent=i),"auto-size":{minRows:5,maxRows:10}},null,8,["value"])]),_:1})):y("",!0),t(c,{label:"\u76EE\u6807\u57DF\u540D",name:"rewriteDomain"},{extra:e(()=>[tt,t(C,{title:"\u76EE\u6807\u57DF\u540D\u8BF4\u660E"},{content:e(()=>[ot,at]),default:e(()=>[nt]),_:1})]),default:e(()=>[t(D,{placeholder:"\u8BF7\u8F93\u5165\u76EE\u6807\u57DF\u540D",value:o.docEdit.rewriteDomain,"onUpdate:value":a[9]||(a[9]=i=>o.docEdit.rewriteDomain=i)},null,8,["value"])]),_:1}),t(c,{label:"\u5F00\u653E\u8BBF\u95EE",required:"",name:"openVisit"},{extra:e(()=>[dt,r("a",{onClick:a[11]||(a[11]=i=>o.openShareViewWindow(o.docEdit))},"\u5F00\u653E\u6587\u6863URL"),st]),default:e(()=>[t(A,{value:o.docEdit.openVisit,"onUpdate:value":a[10]||(a[10]=i=>o.docEdit.openVisit=i)},{default:e(()=>[t(f,{value:0},{default:e(()=>[lt]),_:1}),t(f,{value:1},{default:e(()=>[it]),_:1})]),_:1},8,["value"])]),_:1}),t(c,{label:"\u72B6\u6001",required:"",name:"docStatus"},{default:e(()=>[t(A,{value:o.docEdit.docStatus,"onUpdate:value":a[12]||(a[12]=i=>o.docEdit.docStatus=i)},{default:e(()=>[t(f,{value:1},{default:e(()=>[rt]),_:1}),t(f,{value:2},{default:e(()=>[ct]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["visible","title","onOk"]),t(K,{ref:"instruction"},null,512)],64)}var vt=Z(ce,[["render",ut]]);export{vt as default};
