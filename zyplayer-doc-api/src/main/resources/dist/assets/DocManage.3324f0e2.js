import{z as U}from"./custom.914a01ae.js";import{u as A,y as w,G as P,r as u,T as J,o as s,b,a as t,w as e,F as k,k as h,c as _,H as I,e as i,t as V,m as a}from"./vendor.d3f949c4.js";import{_ as B}from"./main.a111e8f9.js";const F={setup(){const E=A();let l=w([]),C=w(!1),o=w({docType:"",openVisit:"",docStatus:"",pageNum:1,pageSize:20}),S=w({pageSize:20,pageNum:1,total:0,showSizeChanger:!0,pageSizeOptions:["20","50","100"],showTotal:d=>`\u5171${d}\u6761`});const L=(d,f,v)=>{S.value.pageNum=d.current,S.value.pageSize=d.pageSize,o.value.pageNum=d.current,o.value.pageSize=d.pageSize,c()},c=async()=>{C.value=!0,U.apiDocList(o.value).then(d=>{setTimeout(()=>C.value=!1,500),l.value=d.data||[],S.value.total=d.total||0})};let g=w({}),r=w(),p=w(!1);const x=async()=>{r.value.validate().then(()=>{U.apiDocAdd(g.value).then(d=>{c(),p.value=!1,E.commit("addDocChangedNum")})}).catch(d=>{console.log("error",d)})},N=async()=>{p.value=!0,g.value={docType:1,openVisit:0,docStatus:1,isNew:1}},m=d=>{U.apiDocDetail({id:d.id}).then(f=>{g.value=f.data,p.value=!0})},T=async(d,f,v)=>{U.apiDocUpdate({id:d,docStatus:f,yn:v}).then(z=>{c(),E.commit("addDocChangedNum")})},D=async d=>T(d.id,null,0);return P(()=>{c()}),{searchParam:o,docList:l,docListLoading:C,newDocVisible:p,docEdit:g,newDocFormRef:r,searchDocList:c,openNewDoc:N,handleNewDocOk:x,deleteDoc:D,editDoc:m,handleTableChange:L,pagination:S,newDocRules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u6863\u540D\u79F0",trigger:"change"}],docUrl:[{required:!0,message:"\u8BF7\u8F93\u5165\u6587\u6863\u5730\u5740",trigger:"change"}],jsonContent:[{required:!0,message:"\u8BF7\u8F93\u5165JSON\u683C\u5F0F\u7684swagger\u6587\u6863\u5185\u5BB9",trigger:"change"}],docType:[{type:"number",required:!0,message:"\u8BF7\u9009\u62E9\u6587\u6863\u7C7B\u578B",trigger:"change"}],openVisit:[{type:"number",required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5F00\u653E\u8BBF\u95EE",trigger:"change"}],docStatus:[{type:"number",required:!0,message:"\u8BF7\u9009\u62E9\u6587\u6863\u72B6\u6001",trigger:"change"}]},docListColumns:[{title:"ID",dataIndex:"id",width:70},{title:"\u6587\u6863\u540D\u79F0",dataIndex:"name",width:250},{title:"\u6587\u6863\u7C7B\u578B",dataIndex:"docType",width:120},{title:"\u72B6\u6001",dataIndex:"docStatus",width:90},{title:"\u6587\u6863\u5730\u5740",dataIndex:"docUrl"},{title:"\u76EE\u6807\u57DF\u540D",dataIndex:"rewriteDomain",width:250},{title:"\u64CD\u4F5C",dataIndex:"operation",fixed:"right",width:170}],swaggerDocDemo:`{
    "swagger": "2.0",
    "info": {},
    "host": "doc.zyplayer.com",
    "basePath":"/",
    "tags": [],
    "paths": {},
    "definitions": {}
}`,openApiDocDemo:`{
    "openapi": "3.0.3",
    "components": {}
    "servers": [],
    "paths": {},
    "info": {},
}`}}},M=a("\u5168\u90E8"),G=a("URL\u6DFB\u52A0"),H=a("JSON\u5185\u5BB9"),K=a("\u5168\u90E8"),Q=a("\u5426"),W=a("\u662F"),X=a("\u5168\u90E8"),Y=a("\u542F\u7528"),Z=a("\u7981\u7528"),$=a("\u67E5\u8BE2"),ee=a("\u65B0\u5EFA"),te=a("\u7F16\u8F91"),oe=a("\u5220\u9664"),ae=a("Swagger URL"),ne=a("Swagger JSON"),le=a("OpenApi JSON"),de=a("\u672A\u5F00\u653E"),ie=a("\u5DF2\u5F00\u653E"),se=a("\u542F\u7528"),ce=a("\u7981\u7528"),re=a("Swagger URL"),ue=a("Swagger JSON"),_e=a("OpenApi URL"),pe=a("OpenApi JSON"),me=a("\u81EA\u5EFAAPI"),he=a(" \u67E5\u770B\u6587\u6863\u5730\u5740 "),ge=i("p",null,"\u683C\u5F0F\u4E00\uFF1Ahttp://doc.zyplayer.com/v2/api-docs",-1),ve=i("p",null,"\u683C\u5F0F\u4E8C\uFF1Ahttp://doc.zyplayer.com/swagger-resources",-1),fe=i("p",null,"\u683C\u5F0F\u4E09\uFF1Ahttp://doc.zyplayer.com/swagger-ui.html",-1),ye=i("a",null,"\u793A\u4F8B",-1),we=a(" \u67E5\u770B\u6587\u6863\u5185\u5BB9 "),De=i("div",null,'\u652F\u6301\u4EE5\u4E0B\u683C\u5F0F\u7684Swagger\u6587\u6863\u5185\u5BB9\u8F93\u5165\uFF0C\u5176\u4E2D {"swagger": "2.0"} \u4E3A\u5FC5\u8981\u5C5E\u6027',-1),Se={class:"lang-json"},be=i("a",null,"\u8BF4\u660E",-1),ke=a(" \u67E5\u770B\u6587\u6863\u5730\u5740 "),Ce=i("p",null,"\u683C\u5F0F\u4E00\uFF1Ahttp://doc.zyplayer.com/v3/api-docs",-1),xe=i("a",null,"\u793A\u4F8B",-1),Ue=a(" \u67E5\u770B\u6587\u6863\u5185\u5BB9 "),Ee=i("div",null,'\u652F\u6301\u4EE5\u4E0B\u683C\u5F0F\u7684OpenApi\u6587\u6863\u5185\u5BB9\u8F93\u5165\uFF0C\u5176\u4E2D {"openapi": "3.x.x"} \u4E3A\u5FC5\u8981\u5C5E\u6027',-1),Ne={class:"lang-json"},Te=i("a",null,"\u8BF4\u660E",-1),ze=a(" \u76EE\u6807\u57DF\u540D "),Le=i("p",null,"\u5728\u6587\u6863\u7684\u5728\u7EBF\u8C03\u8BD5\u754C\u9762\uFF0C\u8BBF\u95EE\u7684\u57DF\u540D\u53EF\u4EE5\u521D\u59CB\u4E3A\u6B64\u5904\u5F55\u5165\u7684\u57DF\u540D\uFF0C\u800C\u975E\u6587\u6863\u672C\u8EAB\u7684\u57DF\u540D\u5730\u5740",-1),Oe=i("p",null,"\u53EF\u4FBF\u4E8E\u4E0D\u540C\u73AF\u5883\u95F4\u7684\u63A5\u53E3\u6D4B\u8BD5\uFF0C\u4F8B\uFF1Ahttp://doc.zyplayer.com",-1),qe=i("a",null,"\u8BF4\u660E",-1),Ie=a("\u542F\u7528"),Ve=a("\u7981\u7528");function je(E,l,C,o,S,L){const c=u("a-select-option"),g=u("a-select"),r=u("a-form-item"),p=u("a-button"),x=u("a-form"),N=u("a-popconfirm"),m=u("a-tag"),T=u("a-table"),D=u("a-input"),d=u("a-radio"),f=u("a-radio-group"),v=u("a-popover"),z=u("a-textarea"),j=u("a-modal"),O=J("highlight");return s(),b(k,null,[t(x,{layout:"inline",style:{"margin-bottom":"20px"}},{default:e(()=>[t(r,{label:"\u6587\u6863\u7C7B\u578B"},{default:e(()=>[t(g,{placeholder:"\u8BF7\u9009\u62E9\u6587\u6863\u7C7B\u578B",value:o.searchParam.docType,"onUpdate:value":l[0]||(l[0]=n=>o.searchParam.docType=n),style:{width:"150px"}},{default:e(()=>[t(c,{value:""},{default:e(()=>[M]),_:1}),t(c,{value:1},{default:e(()=>[G]),_:1}),t(c,{value:2},{default:e(()=>[H]),_:1})]),_:1},8,["value"])]),_:1}),t(r,{label:"\u5F00\u653E\u8BBF\u95EE"},{default:e(()=>[t(g,{placeholder:"\u8BF7\u9009\u62E9\u5F00\u653E\u8BBF\u95EE",value:o.searchParam.openVisit,"onUpdate:value":l[1]||(l[1]=n=>o.searchParam.openVisit=n),style:{width:"150px"}},{default:e(()=>[t(c,{value:""},{default:e(()=>[K]),_:1}),t(c,{value:0},{default:e(()=>[Q]),_:1}),t(c,{value:1},{default:e(()=>[W]),_:1})]),_:1},8,["value"])]),_:1}),t(r,{label:"\u72B6\u6001"},{default:e(()=>[t(g,{placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001",value:o.searchParam.docStatus,"onUpdate:value":l[2]||(l[2]=n=>o.searchParam.docStatus=n),style:{width:"150px"}},{default:e(()=>[t(c,{value:""},{default:e(()=>[X]),_:1}),t(c,{value:1},{default:e(()=>[Y]),_:1}),t(c,{value:2},{default:e(()=>[Z]),_:1})]),_:1},8,["value"])]),_:1}),t(r,null,{default:e(()=>[t(p,{onClick:o.searchDocList,type:"primary"},{default:e(()=>[$]),_:1},8,["onClick"]),t(p,{onClick:o.openNewDoc,style:{marginLeft:"8px"}},{default:e(()=>[ee]),_:1},8,["onClick"])]),_:1})]),_:1}),t(T,{dataSource:o.docList,columns:o.docListColumns,size:"middle",loading:o.docListLoading,pagination:o.pagination,onChange:o.handleTableChange,scroll:{x:1400,y:"calc(100vh - 300px)"}},{bodyCell:e(({column:n,text:y,record:q})=>[n.dataIndex==="operation"?(s(),b(k,{key:0},[t(p,{type:"link",onClick:R=>o.editDoc(q)},{default:e(()=>[te]),_:2},1032,["onClick"]),t(N,{title:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",onConfirm:R=>o.deleteDoc(q)},{default:e(()=>[t(p,{type:"link",danger:""},{default:e(()=>[oe]),_:1})]),_:2},1032,["onConfirm"])],64)):h("",!0),n.dataIndex==="docType"?(s(),b(k,{key:1},[y===1?(s(),_(m,{key:0,color:"red"},{default:e(()=>[ae]),_:1})):y===2?(s(),_(m,{key:1,color:"blue"},{default:e(()=>[ne]),_:1})):y===4?(s(),_(m,{key:2,color:"green"},{default:e(()=>[le]),_:1})):h("",!0)],64)):h("",!0),n.dataIndex==="openVisit"?(s(),b(k,{key:2},[y===0?(s(),_(m,{key:0,color:"pink"},{default:e(()=>[de]),_:1})):y===1?(s(),_(m,{key:1,color:"green"},{default:e(()=>[ie]),_:1})):h("",!0)],64)):h("",!0),n.dataIndex==="docStatus"?(s(),b(k,{key:3},[y===1?(s(),_(m,{key:0,color:"green"},{default:e(()=>[se]),_:1})):y===2?(s(),_(m,{key:1,color:"pink"},{default:e(()=>[ce]),_:1})):h("",!0)],64)):h("",!0)]),_:1},8,["dataSource","columns","loading","pagination","onChange","scroll"]),t(j,{visible:o.newDocVisible,"onUpdate:visible":l[11]||(l[11]=n=>o.newDocVisible=n),title:o.docEdit.isNew?"\u65B0\u589E\u6587\u6863":"\u7F16\u8F91\u6587\u6863",onOk:o.handleNewDocOk,width:800},{default:e(()=>[t(x,{layout:"horizontal",ref:"newDocFormRef",rules:o.newDocRules,model:o.docEdit,"label-col":{span:4},"wrapper-col":{span:20}},{default:e(()=>[t(r,{label:"\u6587\u6863\u540D\u79F0",required:"",name:"name"},{default:e(()=>[t(D,{placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u540D\u79F0",value:o.docEdit.name,"onUpdate:value":l[3]||(l[3]=n=>o.docEdit.name=n)},null,8,["value"])]),_:1}),t(r,{label:"\u6587\u6863\u7C7B\u578B",required:"",name:"docType"},{default:e(()=>[t(f,{value:o.docEdit.docType,"onUpdate:value":l[4]||(l[4]=n=>o.docEdit.docType=n)},{default:e(()=>[t(d,{value:1},{default:e(()=>[re]),_:1}),t(d,{value:2},{default:e(()=>[ue]),_:1}),t(d,{value:3},{default:e(()=>[_e]),_:1}),t(d,{value:4},{default:e(()=>[pe]),_:1}),t(d,{value:5,disabled:""},{default:e(()=>[me]),_:1})]),_:1},8,["value"])]),_:1}),o.docEdit.docType===1?(s(),_(r,{key:0,label:"\u6587\u6863\u5730\u5740",required:"",name:"docUrl"},{extra:e(()=>[he,t(v,{title:"\u6587\u6863\u5730\u5740\u652F\u6301\u4EE5\u4E0B\u4EFB\u4E00\u683C\u5F0F"},{content:e(()=>[ge,ve,fe]),default:e(()=>[ye]),_:1})]),default:e(()=>[t(D,{placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u5730\u5740URL",value:o.docEdit.docUrl,"onUpdate:value":l[5]||(l[5]=n=>o.docEdit.docUrl=n)},null,8,["value"])]),_:1})):o.docEdit.docType===2?(s(),_(r,{key:1,label:"\u6587\u6863\u5185\u5BB9",required:"",name:"jsonContent"},{extra:e(()=>[we,t(v,{title:"\u6587\u6863\u5185\u5BB9\u8BF4\u660E"},{content:e(()=>[De,I(i("div",null,[i("pre",null,[i("code",Se,V(o.swaggerDocDemo),1)])],512),[[O]])]),default:e(()=>[be]),_:1})]),default:e(()=>[t(z,{placeholder:"\u8BF7\u8F93\u5165JSON\u683C\u5F0F\u7684swagger\u6587\u6863\u5185\u5BB9",value:o.docEdit.jsonContent,"onUpdate:value":l[6]||(l[6]=n=>o.docEdit.jsonContent=n)},null,8,["value"])]),_:1})):h("",!0),o.docEdit.docType===3?(s(),_(r,{key:2,label:"\u6587\u6863\u5730\u5740",required:"",name:"docUrl"},{extra:e(()=>[ke,t(v,{title:"\u6587\u6863\u5730\u5740\u652F\u6301\u4EE5\u4E0B\u4EFB\u4E00\u683C\u5F0F"},{content:e(()=>[Ce]),default:e(()=>[xe]),_:1})]),default:e(()=>[t(D,{placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u5730\u5740URL",value:o.docEdit.docUrl,"onUpdate:value":l[7]||(l[7]=n=>o.docEdit.docUrl=n)},null,8,["value"])]),_:1})):o.docEdit.docType===4?(s(),_(r,{key:3,label:"\u6587\u6863\u5185\u5BB9",required:"",name:"jsonContent"},{extra:e(()=>[Ue,t(v,{title:"\u6587\u6863\u5185\u5BB9\u8BF4\u660E"},{content:e(()=>[Ee,I(i("div",null,[i("pre",null,[i("code",Ne,V(o.openApiDocDemo),1)])],512),[[O]])]),default:e(()=>[Te]),_:1})]),default:e(()=>[t(z,{placeholder:"\u8BF7\u8F93\u5165JSON\u683C\u5F0F\u7684openapi\u6587\u6863\u5185\u5BB9",value:o.docEdit.jsonContent,"onUpdate:value":l[8]||(l[8]=n=>o.docEdit.jsonContent=n)},null,8,["value"])]),_:1})):h("",!0),t(r,{label:"\u76EE\u6807\u57DF\u540D",name:"rewriteDomain"},{extra:e(()=>[ze,t(v,{title:"\u76EE\u6807\u57DF\u540D\u8BF4\u660E"},{content:e(()=>[Le,Oe]),default:e(()=>[qe]),_:1})]),default:e(()=>[t(D,{placeholder:"\u8BF7\u8F93\u5165\u76EE\u6807\u57DF\u540D",value:o.docEdit.rewriteDomain,"onUpdate:value":l[9]||(l[9]=n=>o.docEdit.rewriteDomain=n)},null,8,["value"])]),_:1}),t(r,{label:"\u72B6\u6001",required:"",name:"docStatus"},{default:e(()=>[t(f,{value:o.docEdit.docStatus,"onUpdate:value":l[10]||(l[10]=n=>o.docEdit.docStatus=n)},{default:e(()=>[t(d,{value:1},{default:e(()=>[Ie]),_:1}),t(d,{value:2},{default:e(()=>[Ve]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["visible","title","onOk"])],64)}var Je=B(F,[["render",je]]);export{Je as default};
