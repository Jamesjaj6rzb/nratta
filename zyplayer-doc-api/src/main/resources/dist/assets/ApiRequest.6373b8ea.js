import{am as Q,an as se,y as l,G as de,r as s,o as f,b as w,a,w as t,e as _,t as D,c as O,k as j,F as M,m as n,ao as ue,ap as me,v as ce,u as fe,B as ve,d as _e,J as E,L as U}from"./vendor.1b910c8a.js";import"./mavon-editor.ee685efd.js";import{P as X,a as Y,u as ye,x as pe}from"./unitConvert.b5f11711.js";import"./index.c860d973.js";import{z as he}from"./custom.f7427cee.js";import{a as Pe}from"./index.7bf1ebec.js";import{_ as W}from"./main.a6c14cdf.js";const ge={props:{result:{type:Object,required:!0},loading:{type:Boolean,required:!0}},components:{CloseOutlined:Q,ParamTable:X,ParamBody:Y,aceEditor:Pe},setup(v){const{result:o}=se(v);let L=l("body"),e=l("format"),y=l("json"),T=l(""),m=l([]),k=l([]),d=l(""),p=l(""),h=l({}),P=l();const g=()=>{e.value==="preview"&&setTimeout(()=>{P.value&&P.value.contentDocument.write(d.value)},0)},S=()=>{if(d.value="",p.value="",v.result.data){if(h.value=v.result.data,v.result.data.headers){m.value=v.result.data.headers;let u=m.value.find(C=>C.name==="Content-Type");u&&u.value&&(u.value.indexOf("text/html")>=0?y.value="html":u.value.indexOf("text/plain")>=0?y.value="text":u.value.indexOf("application/json")>=0?y.value="json":u.value.indexOf("application/xml")>=0||u.value.indexOf("text/xml")>=0?y.value="xml":u.value.indexOf("application/javascript")>=0&&(y.value="javascript"),T.value=y.value)}if(v.result.data.cookies&&(k.value=v.result.data.cookies),v.result.data.data){d.value=v.result.data.data,p.value=v.result.data.data;try{y.value==="xml"?p.value=pe(d.value):y.value==="json"?p.value=JSON.stringify(JSON.parse(d.value),null,4):y.value==="javascript"&&(p.value=JSON.stringify(d.value,null,4))}catch{p.value=v.result.data.data}}else{let u=`
// \u8BF7\u6C42\u5931\u8D25\uFF0C\u4EE5\u4E0B\u4E3A\u5C01\u88C5\u7684\u8FD4\u56DE\u503C\u5BF9\u8C61\uFF0C\u4EC5\u4F9B\u53C2\u8003

`;d.value=u+JSON.stringify(v.result.data),p.value=u+JSON.stringify(v.result.data,null,4)}g()}};return S(),de(o,()=>S()),{activePage:L,bodyShowType:e,bodyShowTypeChange:g,unitConvert:ye,bodyShowFormatType:y,bodyShowFormatPreview:T,previewHtmlRef:P,resultData:h,resultHeaders:m,resultCookies:k,resultHeadersColumns:[{title:"KEY",dataIndex:"name"},{title:"VALUE",dataIndex:"value"}],resultCookiesColumns:[{title:"KEY",dataIndex:"name"},{title:"VALUE",dataIndex:"value"}],resultDataInit:u=>{u.setFontSize(16)},resultDataContentOrigin:d,resultDataContentFormat:p,resultDataConfig:{wrap:!0,readOnly:!0,autoScrollEditorIntoView:!0,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,minLines:30,maxLines:30}}}},be={key:0,style:{"margin-bottom":"30px"}},xe={key:0,style:{"margin-bottom":"30px"}},ke={style:{"margin-bottom":"10px"}},Se=n("\u683C\u5F0F\u5316"),we=n("\u539F\u59CB\u503C"),Le=n("\u9884\u89C8"),Te=n("JSON"),Re=n("HTML"),Ce=n("XML"),Oe=n("JavaScript"),De=n("TEXT"),Ee={key:2},Ue={key:0,ref:"previewHtmlRef",width:"100%",height:"570px",style:{border:"0"}},qe={class:"status-info-box"},Ne=n(" \u72B6\u6001\u7801\uFF1A"),je=n(" \u8017\u65F6\uFF1A"),Je=n(" \u5927\u5C0F\uFF1A"),Ie={key:1},Ve={style:{color:"#f00"}},Ae={class:"status-info-box"},Ke=n(" \u8017\u65F6\uFF1A"),Be={key:1,style:{"margin-top":"20px"}},Fe={key:2,style:{"margin-top":"20px",color:"#aaa"}};function He(v,o,L,e,y,T){const m=s("a-radio-button"),k=s("a-radio-group"),d=s("a-select-option"),p=s("a-select"),h=s("ace-editor"),P=s("a-tab-pane"),g=s("a-table"),S=s("a-divider"),R=s("a-tabs"),u=s("a-skeleton"),C=s("a-spin"),c=s("a-empty");return L.result.data?(f(),w("div",be,[L.result.data.data?(f(),w("div",xe,[a(R,{activeKey:e.activePage,"onUpdate:activeKey":o[4]||(o[4]=x=>e.activePage=x),onTabClick:o[5]||(o[5]=()=>{}),style:{padding:"5px 10px 0"}},{rightExtra:t(()=>[_("span",qe,[Ne,_("span",null,D(e.resultData.status||"200"),1),a(S,{type:"vertical"}),je,_("span",null,D(e.unitConvert.formatSeconds(e.resultData.useTime||0)),1),a(S,{type:"vertical"}),Je,_("span",null,D(e.unitConvert.formatFileSize(e.resultData.contentLength||0)),1)])]),default:t(()=>[a(P,{tab:"Body",key:"body",forceRender:""},{default:t(()=>[_("div",ke,[a(k,{value:e.bodyShowType,"onUpdate:value":o[0]||(o[0]=x=>e.bodyShowType=x),onChange:e.bodyShowTypeChange,size:"small"},{default:t(()=>[a(m,{value:"format"},{default:t(()=>[Se]),_:1}),a(m,{value:"row"},{default:t(()=>[we]),_:1}),a(m,{value:"preview"},{default:t(()=>[Le]),_:1})]),_:1},8,["value","onChange"]),e.bodyShowType==="format"?(f(),O(p,{key:0,value:e.bodyShowFormatType,"onUpdate:value":o[1]||(o[1]=x=>e.bodyShowFormatType=x),size:"small",style:{"margin-left":"10px",width:"100px"}},{default:t(()=>[a(d,{value:"json"},{default:t(()=>[Te]),_:1}),a(d,{value:"html"},{default:t(()=>[Re]),_:1}),a(d,{value:"xml"},{default:t(()=>[Ce]),_:1}),a(d,{value:"javascript"},{default:t(()=>[Oe]),_:1}),a(d,{value:"text"},{default:t(()=>[De]),_:1})]),_:1},8,["value"])):j("",!0)]),e.bodyShowType==="format"?(f(),O(h,{key:0,value:e.resultDataContentFormat,"onUpdate:value":o[2]||(o[2]=x=>e.resultDataContentFormat=x),onInit:e.resultDataInit,lang:e.bodyShowFormatType,theme:"monokai",width:"100%",height:"100",options:e.resultDataConfig},null,8,["value","onInit","lang","options"])):e.bodyShowType==="row"?(f(),O(h,{key:1,value:e.resultDataContentOrigin,"onUpdate:value":o[3]||(o[3]=x=>e.resultDataContentOrigin=x),onInit:e.resultDataInit,lang:"text",theme:"chrome",width:"100%",height:"100",options:e.resultDataConfig},null,8,["value","onInit","options"])):e.bodyShowType==="preview"?(f(),w("div",Ee,[e.bodyShowFormatPreview==="html"?(f(),w("iframe",Ue,null,512)):(f(),w(M,{key:1},[n(D(e.resultDataContentOrigin),1)],64))])):j("",!0)]),_:1}),a(P,{tab:"Headers",key:"headers",forceRender:""},{default:t(()=>[a(g,{dataSource:e.resultHeaders,columns:e.resultHeadersColumns,size:"small",pagination:!1,scroll:{y:"300px"}},null,8,["dataSource","columns"])]),_:1}),a(P,{tab:"Cookies",key:"cookies",forceRender:""},{default:t(()=>[a(g,{dataSource:e.resultCookies,columns:e.resultCookiesColumns,size:"small",pagination:!1,scroll:{y:"300px"}},null,8,["dataSource","columns"])]),_:1})]),_:1},8,["activeKey"])])):(f(),w("div",Ie,[a(R,{style:{padding:"5px 10px 0"}},{rightExtra:t(()=>[_("span",Ae,[Ke,_("span",null,D(e.unitConvert.formatSeconds(e.resultData.useTime||0)),1)])]),default:t(()=>[a(P,{tab:"\u8BF7\u6C42\u5931\u8D25",key:"body",forceRender:""},{default:t(()=>[_("div",Ve,D(L.result.data.errorMsg),1)]),_:1})]),_:1})]))])):L.loading?(f(),w("div",Be,[a(C,{tip:"\u8BF7\u6C42\u6267\u884C\u4E2D..."},{default:t(()=>[a(u)]),_:1})])):(f(),w("div",Fe,[a(c,{description:"\u70B9\u51FB \u2018\u53D1\u9001\u8BF7\u6C42\u2019 \u83B7\u53D6\u8BF7\u6C42\u7ED3\u679C"})]))}var ze=W(ge,[["render",He]]);const Ge={components:{VerticalAlignTopOutlined:ue,VerticalAlignBottomOutlined:me,CloseOutlined:Q,ParamTable:X,ParamBody:Y,ApiRequestResult:ze},setup(v){let o=l(""),L=l("urlParam");const e=ce(),y=fe();y.commit("addTableName",{key:e.fullPath,val:"\u63A5\u53E3\u8BF7\u6C42"+e.query.id});let T=y.state.globalParam||[],m=1;const k=l();let d=l([]);const p=l();let h=[];T.filter(i=>i.paramType===2).forEach(i=>{h.push({name:i.paramKey,value:i.paramValue,type:"string",key:"g"+m++})});let g=l(JSON.parse(JSON.stringify(h)));const S=l();let R=[];T.filter(i=>i.paramType===3).forEach(i=>{R.push({name:i.paramKey,value:i.paramValue,type:"string",key:"g"+m++})});let C=l(JSON.parse(JSON.stringify(R)));const c=l();let x=[];T.filter(i=>i.paramType===1).forEach(i=>{x.push({name:i.paramKey,value:i.paramValue,type:"string",key:"g"+m++})});let A=l(JSON.parse(JSON.stringify(x)));const J=l();let K=l([]),I=l(),Z=l("form"),$=l("json"),ee=l({}),B=l({method:"get"}),V=l({}),q=l(!1);const ae=()=>{if(!o.value){ve.error("\u8BF7\u8F93\u5165\u8BF7\u6C42\u7684\u76EE\u6807URL\u5730\u5740");return}const i=new FormData;let te=k.value.getSelectedRowKeys(),F=d.value.filter(r=>te.indexOf(r.key)>=0&&r.name&&r.value).map(r=>r.name+"="+encodeURIComponent(r.value)).join("&"),oe=p.value.getSelectedRowKeys(),le=g.value.filter(r=>oe.indexOf(r.key)>=0&&r.name&&r.value).map(r=>({code:r.name,value:r.value})),re=S.value.getSelectedRowKeys(),ne=C.value.filter(r=>re.indexOf(r.key)>=0&&r.name&&r.value).map(r=>({code:r.name,value:r.value})),H=[];if(c.value){let r=c.value.getSelectedRowKeys();H=A.value.filter(b=>r.indexOf(b.key)>=0&&b.name&&b.value).map(b=>({code:b.name,value:b.value}))}let z=[];if(J.value){let r=J.value.getSelectedRowKeys();z=K.value.filter(b=>r.indexOf(b.key)>=0&&b.name&&b.value).map(b=>({code:b.name,value:b.value}))}let G="";I.value&&(G=I.value.getParam());let ie=F?o.value+"?"+F:o.value;i.append("url",ie),i.append("host",""),i.append("method",B.value.method),i.append("contentType",""),i.append("headerParam",JSON.stringify(le)),i.append("cookieParam",JSON.stringify(ne)),i.append("formParam",JSON.stringify(H)),i.append("formEncodeParam",JSON.stringify(z)),i.append("bodyParam",G),q.value=!0,V.value={},he.requestUrl(i).then(r=>{V.value=r,q.value=!1}).catch(r=>{q.value=!1})};let N=l(!0);return{docUrl:o,activePage:L,activePageChange:()=>{N.value=!0},requestLoading:q,sendRequest:ae,requestResult:V,consumesParamType:$,urlParamRef:k,urlParamList:d,headerParamRef:p,headerParamList:g,cookieParamRef:S,cookieParamList:C,formParamRef:c,formParamList:A,formEncodeParamRef:J,formEncodeParamList:K,bodyParamRef:I,bodyParamType:Z,bodyRowParamList:ee,queryParamVisible:N,docInfoShow:B,hideQueryParam:()=>{N.value=!1},showQueryParam:()=>{N.value=!0},methodList:["get","post","put","patch","head","delete","options","trace"]}}},Qe=n("\u53D1\u9001\u8BF7\u6C42"),Me={style:{"margin-bottom":"6px"}},Xe=n("none"),Ye=n("form-data"),We=n("x-www-form-urlencoded"),Ze=n("row"),$e=n("binary"),ea=n("JSON"),aa=n("HTML"),ta=n("XML"),oa=n("JavaScript"),la=n("TEXT"),ra=n("\u6536\u8D77\u53C2\u6570"),na=n("\u5C55\u5F00\u53C2\u6570");function ia(v,o,L,e,y,T){const m=s("a-select-option"),k=s("a-select"),d=s("a-button"),p=s("a-input-search"),h=s("ParamTable"),P=s("a-tab-pane"),g=s("a-radio"),S=s("a-radio-group"),R=s("ParamBody"),u=s("a-tabs"),C=s("ApiRequestResult");return f(),w("div",null,[a(p,{value:e.docUrl,"onUpdate:value":o[1]||(o[1]=c=>e.docUrl=c),onSearch:e.sendRequest,placeholder:"\u8BF7\u8F93\u5165\u76EE\u6807URL\u5730\u5740"},{addonBefore:t(()=>[a(k,{value:e.docInfoShow.method,"onUpdate:value":o[0]||(o[0]=c=>e.docInfoShow.method=c),style:{width:"100px"}},{default:t(()=>[(f(!0),w(M,null,_e(e.methodList,c=>(f(),O(m,{value:c},{default:t(()=>[n(D(c.toUpperCase()),1)]),_:2},1032,["value"]))),256))]),_:1},8,["value"])]),enterButton:t(()=>[a(d,{type:"primary",loading:e.requestLoading},{default:t(()=>[Qe]),_:1},8,["loading"])]),_:1},8,["value","onSearch"]),a(u,{activeKey:e.activePage,"onUpdate:activeKey":o[4]||(o[4]=c=>e.activePage=c),closable:"",onTabClick:e.activePageChange,style:{padding:"5px 10px 0"}},{rightExtra:t(()=>[e.queryParamVisible?(f(),O(d,{key:0,onClick:e.hideQueryParam,type:"link"},{default:t(()=>[ra]),_:1},8,["onClick"])):(f(),O(d,{key:1,onClick:e.showQueryParam,type:"link"},{default:t(()=>[na]),_:1},8,["onClick"]))]),default:t(()=>[a(P,{tab:"URL\u53C2\u6570",key:"urlParam",forceRender:""},{default:t(()=>[E(_("div",null,[a(h,{ref:"urlParamRef",paramList:e.urlParamList},null,8,["paramList"])],512),[[U,e.queryParamVisible]])]),_:1}),e.docInfoShow.method!=="get"?(f(),O(P,{tab:"Body\u53C2\u6570",key:"bodyParam",forceRender:""},{default:t(()=>[E(_("div",null,[_("div",Me,[a(S,{value:e.bodyParamType,"onUpdate:value":o[2]||(o[2]=c=>e.bodyParamType=c)},{default:t(()=>[a(g,{value:"none"},{default:t(()=>[Xe]),_:1}),a(g,{value:"form"},{default:t(()=>[Ye]),_:1}),a(g,{value:"formUrlEncode"},{default:t(()=>[We]),_:1}),a(g,{value:"row"},{default:t(()=>[Ze]),_:1}),a(g,{value:"binary"},{default:t(()=>[$e]),_:1})]),_:1},8,["value"]),e.bodyParamType==="row"?(f(),O(k,{key:0,value:e.consumesParamType,"onUpdate:value":o[3]||(o[3]=c=>e.consumesParamType=c),size:"small",style:{"margin-left":"10px","vertical-align":"top",width:"100px"}},{default:t(()=>[a(m,{value:"json"},{default:t(()=>[ea]),_:1}),a(m,{value:"html"},{default:t(()=>[aa]),_:1}),a(m,{value:"xml"},{default:t(()=>[ta]),_:1}),a(m,{value:"javascript"},{default:t(()=>[oa]),_:1}),a(m,{value:"text"},{default:t(()=>[la]),_:1})]),_:1},8,["value"])):j("",!0)]),E(_("div",null,[a(h,{ref:"formParamRef",paramList:e.formParamList,showType:""},null,8,["paramList"])],512),[[U,e.bodyParamType==="form"]]),E(_("div",null,[a(h,{ref:"formEncodeParamRef",paramList:e.formEncodeParamList},null,8,["paramList"])],512),[[U,e.bodyParamType==="formUrlEncode"]]),E(_("div",null,[a(R,{ref:"bodyParamRef",rowLang:e.consumesParamType,paramList:e.bodyRowParamList},null,8,["rowLang","paramList"])],512),[[U,e.bodyParamType==="row"]])],512),[[U,e.queryParamVisible]])]),_:1})):j("",!0),a(P,{tab:"Header\u53C2\u6570",key:"headerParam",forceRender:""},{default:t(()=>[E(_("div",null,[a(h,{ref:"headerParamRef",paramList:e.headerParamList},null,8,["paramList"])],512),[[U,e.queryParamVisible]])]),_:1}),a(P,{tab:"Cookie\u53C2\u6570",key:"cookieParam",forceRender:""},{default:t(()=>[E(_("div",null,[a(h,{ref:"cookieParamRef",paramList:e.cookieParamList},null,8,["paramList"])],512),[[U,e.queryParamVisible]])]),_:1})]),_:1},8,["activeKey","onTabClick"]),a(C,{result:e.requestResult,loading:e.requestLoading},null,8,["result","loading"])])}var Pa=W(Ge,[["render",ia]]);export{Pa as default};
