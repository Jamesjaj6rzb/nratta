import{r as b,T as Se,o as m,c as R,w as l,a as r,m as d,t as L,H as U,e as O,b as w,F as q,k as D,X as me,Y as we,y as c,E as xe,Z as ke,_ as Le,u as ce,J as K,d as Oe,B as fe,v as Ie,G as Te}from"./vendor.d3f949c4.js";import{l as N}from"./logUtil.5b305c4e.js";import{m as Re}from"./index.ea6b273d.js";import{_ as X}from"./main.a111e8f9.js";import{P as ye,a as he,b as Ce,u as De,x as qe}from"./unitConvert.a86860f9.js";import{g as Ne,z as je}from"./custom.914a01ae.js";let oe=["file","string","integer","long","double","object","number","boolean","ref"];var pe={getRequestParamList(o,n){if(!o)return[];let f=1,e=[];for(let h=0;h<o.length;h++){let a=o[h],s=a.description||"",i=a.type,u=a.format,v=a["x-example"],g,y,t;i==="array"?this.isSchemaRef(a.items)?(g=this.getSchemaRef(a.items),y=this.getParamDefinitions(g,n,f,{},0)):a.schema?this.isSchemaRef(a.schema.items)?(g=this.getSchemaRef(a.schema.items),y=this.getParamDefinitions(g,n,f,{},0)):a.schema.type&&(g=a.schema.type):a.items&&a.items.type?g=a.items.type:N.logMessage("001",i,a):i?oe.indexOf(i)>=0||N.logMessage("003",i,a):a.schema?this.isSchemaRef(a.schema)?(i=this.getSchemaRef(a.schema),y=this.getParamDefinitions(i,n,f,{},0)):a.schema.type?(i=a.schema.type,a.schema.additionalProperties?(t={},y=this.getAdditionalProperties(a.schema.additionalProperties,t,n,f,{},0),u=t.type):a.schema.items?this.isSchemaRef(a.schema.items)?(g=this.getSchemaRef(a.schema.items),y=this.getParamDefinitions(g,n,f,{},0)):a.schema.items.type?g=a.schema.items.type:N.log("0014",i,a):N.log("0011",i,a)):N.logMessage("0013",i,a):a.items&&a.items.type?(i=a.items.type,a.items.additionalProperties?(t={},y=this.getAdditionalProperties(a.items.additionalProperties,t,n,f,{},0),u=t.type):N.logMessage("0012",i,a)):N.logMessage("002",i,a),v&&(s=s?s+"\uFF0C":"",s+="\u4F8B\uFF1A"+v),a.enum&&a.enum.length>0&&(s=s||"\u679A\u4E3E\u7C7B\u578B",s+="\uFF0C\u53EF\u9009\u503C\uFF1A"+a.enum.join("\u3001")),e.push({type:i,key:f,in:a.in,name:a.name,subType:g,required:a.required?"\u662F":"\u5426",format:u,enum:a.enum,example:v,collectionFormat:a.collectionFormat,description:s,additional:t,children:y}),f++}return e},getResponseParamList(o,n){let f=[],e=1;return Object.keys(o).forEach(h=>{let a=o[h],s,i;this.isSchemaRef(a.schema)&&(s=this.getSchemaRef(a.schema),i=this.getParamDefinitions(s,n,e,{},0)),f.push({code:h,type:s,key:e,desc:a.description,schemas:i}),e++}),f},isSchemaRef(o){return!!(o&&o.$ref)},getSchemaRef(o){return o.$ref&&o.$ref.indexOf("#/definitions/")===0?o.$ref.replace("#/definitions/",""):(N.logMessage("9467","",o),"")},getParamDefinitions(o,n,f,e,h){let a=n[o];if(h>=10||!a||(e[o]=(e[o]||0)+1,e[o]>2))return;let s=[],i=a.type,u=a.properties,v=1;if(i==="object"&&u){let g={};Object.keys(u).forEach(y=>{let t=u[y],p=t.type,x=t.format,_=t.description||"",C=t.example||t["x-example"],k,I,V,A=f+"_"+v,E;Object.keys(g).forEach(G=>{e[G]=void 0}),p==="array"?this.isSchemaRef(t.items)?(k=this.getSchemaRef(t.items),E=this.getParamDefinitions(k,n,A,e,h+1)):t.items&&t.items.type?k=t.items.type:N.logMessage("004",p,t):p==="object"?t.additionalProperties?(I={},E=this.getAdditionalProperties(t.additionalProperties,I,n,A,e,h+1),x=I.type):N.log("0041",p,t):p?oe.indexOf(p)>=0||N.logMessage("006",p,t):this.isSchemaRef(t)?(p=this.getSchemaRef(t),E=this.getParamDefinitions(p,n,A,e,h+1)):N.logMessage("005",p,t),C&&(_=_?_+"\uFF0C":"",_+="\u4F8B\uFF1A"+C),t.items&&t.items.enum&&t.items.enum.length>0&&(V=t.items.enum,_=_||"\u679A\u4E3E\u7C7B\u578B",_+="\uFF0C\u53EF\u9009\u503C\uFF1A"+t.items.enum.join("\u3001")),s.push({type:p,name:y,key:A,subType:k,format:x,description:_,enum:V,additional:I,example:C,children:E}),v++,g[p]=1})}return s.length>0?s:void 0},getAdditionalProperties(o,n,f,e,h,a){if(this.isSchemaRef(o))return n.type=this.getSchemaRef(o),n.children=this.getParamDefinitions(n.type,f,e,h,a+1),n.additional;if(o.additionalProperties)return n.type=o.type,n.additional={},this.getAdditionalProperties(o.additionalProperties,n.additional,f,e,h,a+1);if(o.type==="array")if(n.type=o.type,this.isSchemaRef(o.items)){let s=this.getSchemaRef(o.items),i=this.getParamDefinitions(s,f,e,h,a+1);return n.additional={type:s,children:i},i}else N.logMessage("007","",o);else n.type=o.type,oe.indexOf(n.type)>=0||N.logMessage("008","",o)}};const Je={props:{docInfoShow:{type:Object,required:!0},requestParamList:{type:Array,required:!0},responseParamList:{type:Array,required:!0}},setup(){return{requestParamListColumns:[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:200},{title:"\u7C7B\u578B",dataIndex:"type",width:150},{title:"\u53C2\u6570\u4F4D\u7F6E",dataIndex:"in",width:100},{title:"\u5FC5\u586B",dataIndex:"required",width:60},{title:"\u8BF4\u660E",dataIndex:"description"}],responseCodeListColumns:[{title:"\u72B6\u6001\u7801",dataIndex:"code",width:100},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"desc"}],responseParamListColumns:[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:250},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"description"}]}}},Ee=["innerHTML"],Ue=d("header"),Ae=d("body"),Fe=d("query"),Ke=d("formData"),Ve=d("-"),Me={key:0,style:{color:"#f00"}},He=d("\u5426"),Be=d("-"),ze=["innerHTML"],Qe={key:1,style:{"text-align":"center",padding:"10px 0"}};function Xe(o,n,f,e,h,a){const s=b("a-form-item"),i=b("a-tag"),u=b("a-table"),v=b("a-form"),g=Se("highlight");return m(),R(v,{"label-col":{span:4},"wrapper-col":{span:20}},{default:l(()=>[r(s,{label:"\u63A5\u53E3\u5730\u5740"},{default:l(()=>[d(L(f.docInfoShow.url),1)]),_:1}),r(s,{label:"\u8BF4\u660E"},{default:l(()=>[U(O("div",{class:"markdown-body",innerHTML:f.docInfoShow.description},null,8,Ee),[[g]])]),_:1}),r(s,{label:"\u8BF7\u6C42\u65B9\u5F0F"},{default:l(()=>[d(L(f.docInfoShow.method),1)]),_:1}),r(s,{label:"\u8BF7\u6C42\u6570\u636E\u7C7B\u578B"},{default:l(()=>[d(L(f.docInfoShow.consumes),1)]),_:1}),r(s,{label:"\u54CD\u5E94\u6570\u636E\u7C7B\u578B"},{default:l(()=>[d(L(f.docInfoShow.produces),1)]),_:1}),r(s,{label:"\u8BF7\u6C42\u53C2\u6570"},{default:l(()=>[r(u,{dataSource:f.requestParamList,columns:e.requestParamListColumns,size:"small",pagination:!1,defaultExpandAllRows:""},{bodyCell:l(({column:y,text:t,record:p})=>[y.dataIndex==="type"?(m(),w(q,{key:0},[d(L(t)+" ",1),p.subType?(m(),w(q,{key:0},[d("["+L(p.subType)+"]",1)],64)):D("",!0),p.format?(m(),w(q,{key:1},[d("("+L(p.format)+")",1)],64)):D("",!0)],64)):D("",!0),y.dataIndex==="in"?(m(),w(q,{key:1},[t==="header"?(m(),R(i,{key:0,color:"pink"},{default:l(()=>[Ue]),_:1})):t==="body"?(m(),R(i,{key:1,color:"red"},{default:l(()=>[Ae]),_:1})):t==="query"?(m(),R(i,{key:2,color:"orange"},{default:l(()=>[Fe]),_:1})):t==="formData"?(m(),R(i,{key:3,color:"green"},{default:l(()=>[Ke]),_:1})):t?(m(),R(i,{key:5,color:"purple"},{default:l(()=>[d(L(t),1)]),_:2},1024)):(m(),w(q,{key:4},[Ve],64))],64)):D("",!0),y.dataIndex==="required"?(m(),w(q,{key:2},[t==="\u662F"?(m(),w("span",Me,"\u662F")):t==="\u5426"?(m(),w(q,{key:1},[He],64)):(m(),w(q,{key:2},[Be],64))],64)):D("",!0),y.dataIndex==="description"?(m(),w(q,{key:3},[d(L(t),1)],64)):D("",!0)]),_:1},8,["dataSource","columns"])]),_:1}),r(s,{label:"\u8FD4\u56DE\u7ED3\u679C"},{default:l(()=>[r(u,{dataSource:f.responseParamList,columns:e.responseCodeListColumns,size:"small",pagination:!1},{bodyCell:l(({column:y,text:t,record:p})=>[y.dataIndex==="desc"?(m(),w("div",{key:0,innerHTML:t},null,8,ze)):D("",!0)]),expandedRowRender:l(({record:y})=>[y.schemas?(m(),R(u,{key:0,dataSource:y.schemas,columns:e.responseParamListColumns,size:"small",pagination:!1},{bodyCell:l(({column:t,text:p,record:x})=>[t.dataIndex==="type"?(m(),w(q,{key:0},[d(L(p)+" ",1),x.subType?(m(),w(q,{key:0},[d("["+L(x.subType)+"]",1)],64)):D("",!0),x.format?(m(),w(q,{key:1},[d("("+L(x.format)+")",1)],64)):D("",!0)],64)):D("",!0)]),_:2},1032,["dataSource","columns"])):(m(),w("div",Qe,"\u65E0\u53C2\u6570\u8BF4\u660E"))]),_:1},8,["dataSource","columns"])]),_:1})]),_:1})}var Ge=X(Je,[["render",Xe]]);const Ye={props:{result:{type:Object,required:!0},loading:{type:Boolean,required:!0}},components:{CloseOutlined:me,ParamTable:ye,ParamBody:he,aceEditor:Ce},setup(o){const{result:n}=we(o);let f=c("body"),e=c("format"),h=c("json"),a=c(""),s=c([]),i=c([]),u=c(""),v=c(""),g=c({}),y=c();const t=()=>{e.value==="preview"&&setTimeout(()=>{y.value&&y.value.contentDocument.write(u.value)},0)},p=()=>{if(u.value="",v.value="",o.result.data){if(g.value=o.result.data,o.result.data.headers){s.value=o.result.data.headers;let _=s.value.find(C=>C.name==="Content-Type");_&&_.value&&(_.value.indexOf("text/html")>=0?h.value="html":_.value.indexOf("text/plain")>=0?h.value="text":_.value.indexOf("application/json")>=0?h.value="json":_.value.indexOf("application/xml")>=0||_.value.indexOf("text/xml")>=0?h.value="xml":_.value.indexOf("application/javascript")>=0&&(h.value="javascript"),a.value=h.value)}if(o.result.data.cookies&&(i.value=o.result.data.cookies),o.result.data.data||o.result.data.status===200){v.value=o.result.data.data,u.value=o.result.data.data;try{h.value==="xml"?v.value=qe(u.value):h.value==="json"?v.value=JSON.stringify(JSON.parse(u.value),null,4):h.value==="javascript"&&(v.value=JSON.stringify(u.value,null,4))}catch{v.value=o.result.data.data}}else{let _=`
// \u8BF7\u6C42\u5931\u8D25\uFF0C\u4EE5\u4E0B\u4E3A\u5C01\u88C5\u7684\u8FD4\u56DE\u503C\u5BF9\u8C61\uFF0C\u4EC5\u4F9B\u53C2\u8003

`;u.value=_+JSON.stringify(o.result.data),v.value=_+JSON.stringify(o.result.data,null,4)}t()}};return p(),xe(n,()=>p()),{activePage:f,bodyShowType:e,bodyShowTypeChange:t,unitConvert:De,bodyShowFormatType:h,bodyShowFormatPreview:a,previewHtmlRef:y,resultData:g,resultHeaders:s,resultCookies:i,resultHeadersColumns:[{title:"KEY",dataIndex:"name"},{title:"VALUE",dataIndex:"value"}],resultCookiesColumns:[{title:"KEY",dataIndex:"name"},{title:"VALUE",dataIndex:"value"}],resultDataInit:_=>{_.setFontSize(16)},resultDataContentOrigin:u,resultDataContentFormat:v,resultDataConfig:{wrap:!0,readOnly:!0,autoScrollEditorIntoView:!0,enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,minLines:30,maxLines:30}}}},Ze={key:0,style:{"margin-bottom":"30px"}},We={key:0,style:{"margin-bottom":"30px"}},$e={style:{"margin-bottom":"10px"}},et=d("\u683C\u5F0F\u5316"),tt=d("\u539F\u59CB\u503C"),at=d("\u9884\u89C8"),ot=d("JSON"),nt=d("HTML"),lt=d("XML"),rt=d("JavaScript"),st=d("TEXT"),it={key:2},dt={key:0,ref:"previewHtmlRef",width:"100%",height:"570px",style:{border:"0"}},ut={class:"status-info-box"},mt=d(" \u72B6\u6001\u7801\uFF1A"),ct=d(" \u8017\u65F6\uFF1A"),ft=d(" \u5927\u5C0F\uFF1A"),yt={key:1},ht={style:{color:"#f00"}},pt={class:"status-info-box"},_t=d(" \u8017\u65F6\uFF1A"),vt={key:1,style:{"margin-top":"20px"}},gt={key:2,style:{"margin-top":"20px",color:"#aaa"}};function Pt(o,n,f,e,h,a){const s=b("a-radio-button"),i=b("a-radio-group"),u=b("a-select-option"),v=b("a-select"),g=b("ace-editor"),y=b("a-tab-pane"),t=b("a-table"),p=b("a-divider"),x=b("a-tabs"),_=b("a-skeleton"),C=b("a-spin"),k=b("a-empty");return f.result.data?(m(),w("div",Ze,[f.result.data.data||f.result.data.status===200?(m(),w("div",We,[r(x,{activeKey:e.activePage,"onUpdate:activeKey":n[4]||(n[4]=I=>e.activePage=I),onTabClick:n[5]||(n[5]=()=>{}),style:{padding:"5px 10px 0"}},{rightExtra:l(()=>[O("span",ut,[mt,O("span",null,L(e.resultData.status||"200"),1),r(p,{type:"vertical"}),ct,O("span",null,L(e.unitConvert.formatSeconds(e.resultData.useTime||0)),1),r(p,{type:"vertical"}),ft,O("span",null,L(e.unitConvert.formatFileSize(e.resultData.contentLength||0)),1)])]),default:l(()=>[r(y,{tab:"Body",key:"body",forceRender:""},{default:l(()=>[O("div",$e,[r(i,{value:e.bodyShowType,"onUpdate:value":n[0]||(n[0]=I=>e.bodyShowType=I),onChange:e.bodyShowTypeChange,size:"small"},{default:l(()=>[r(s,{value:"format"},{default:l(()=>[et]),_:1}),r(s,{value:"row"},{default:l(()=>[tt]),_:1}),r(s,{value:"preview"},{default:l(()=>[at]),_:1})]),_:1},8,["value","onChange"]),e.bodyShowType==="format"?(m(),R(v,{key:0,value:e.bodyShowFormatType,"onUpdate:value":n[1]||(n[1]=I=>e.bodyShowFormatType=I),size:"small",style:{"margin-left":"10px",width:"100px"}},{default:l(()=>[r(u,{value:"json"},{default:l(()=>[ot]),_:1}),r(u,{value:"html"},{default:l(()=>[nt]),_:1}),r(u,{value:"xml"},{default:l(()=>[lt]),_:1}),r(u,{value:"javascript"},{default:l(()=>[rt]),_:1}),r(u,{value:"text"},{default:l(()=>[st]),_:1})]),_:1},8,["value"])):D("",!0)]),e.bodyShowType==="format"?(m(),R(g,{key:0,value:e.resultDataContentFormat,"onUpdate:value":n[2]||(n[2]=I=>e.resultDataContentFormat=I),onInit:e.resultDataInit,lang:e.bodyShowFormatType,theme:"monokai",width:"100%",height:"100",options:e.resultDataConfig},null,8,["value","onInit","lang","options"])):e.bodyShowType==="row"?(m(),R(g,{key:1,value:e.resultDataContentOrigin,"onUpdate:value":n[3]||(n[3]=I=>e.resultDataContentOrigin=I),onInit:e.resultDataInit,lang:"text",theme:"chrome",width:"100%",height:"100",options:e.resultDataConfig},null,8,["value","onInit","options"])):e.bodyShowType==="preview"?(m(),w("div",it,[e.bodyShowFormatPreview==="html"?(m(),w("iframe",dt,null,512)):(m(),w(q,{key:1},[d(L(e.resultDataContentOrigin),1)],64))])):D("",!0)]),_:1}),r(y,{tab:"Headers",key:"headers",forceRender:""},{default:l(()=>[r(t,{dataSource:e.resultHeaders,columns:e.resultHeadersColumns,size:"small",pagination:!1,scroll:{y:"300px"}},null,8,["dataSource","columns"])]),_:1}),r(y,{tab:"Cookies",key:"cookies",forceRender:""},{default:l(()=>[r(t,{dataSource:e.resultCookies,columns:e.resultCookiesColumns,size:"small",pagination:!1,scroll:{y:"300px"}},null,8,["dataSource","columns"])]),_:1})]),_:1},8,["activeKey"])])):(m(),w("div",yt,[r(x,{style:{padding:"5px 10px 0"}},{rightExtra:l(()=>[O("span",pt,[_t,O("span",null,L(e.unitConvert.formatSeconds(e.resultData.useTime||0)),1)])]),default:l(()=>[r(y,{tab:"\u8BF7\u6C42\u5931\u8D25",key:"body",forceRender:""},{default:l(()=>[O("div",ht,L(f.result.data.errorMsg),1)]),_:1})]),_:1})]))])):f.loading?(m(),w("div",vt,[r(C,{tip:"\u8BF7\u6C42\u6267\u884C\u4E2D..."},{default:l(()=>[r(_)]),_:1})])):(m(),w("div",gt,[r(k,{description:"\u70B9\u51FB \u2018\u53D1\u9001\u8BF7\u6C42\u2019 \u83B7\u53D6\u8BF7\u6C42\u7ED3\u679C"})]))}var bt=X(Ye,[["render",Pt]]);const St={props:{docInfoShow:{type:Object,required:!0},requestParamList:{type:Array,required:!0},responseParamList:{type:Array,required:!0}},components:{VerticalAlignTopOutlined:ke,VerticalAlignBottomOutlined:Le,CloseOutlined:me,ParamTable:ye,ParamBody:he,DocDebuggerResult:bt},setup(o){const n=ce();let f=n.state.apiDoc||{},e=n.state.globalParam||[],h=n.state.openApiDoc||{},a=f.rewriteDomain||"",s=h.servers||[];!a&&s.length>0&&s[0].url&&(a=s[0].url);let i=c(a+o.docInfoShow.url),u=c("urlParam");const v=c();let g=o.requestParamList.filter(S=>S.in==="query"||S.in==="path"),y=c([]);const t=c();let p=e.filter(S=>S.paramType===2),x=o.requestParamList.filter(S=>S.in==="header"),_=1;p.forEach(S=>{x.push({name:S.paramKey,value:S.paramValue,type:"string",key:"g"+_++})});let C=c(JSON.parse(JSON.stringify(x)));const k=c();let I=e.filter(S=>S.paramType===3),V=o.requestParamList.filter(S=>S.in==="cookie");I.forEach(S=>{V.push({name:S.paramKey,value:S.paramValue,type:"string",key:"g"+_++})});let A=c(JSON.parse(JSON.stringify(V)));const E=c();let G=e.filter(S=>S.paramType===1),j=o.requestParamList.filter(S=>S.in==="formData");G.forEach(S=>{j.push({name:S.paramKey,value:S.paramValue,type:"string",key:"g"+_++})});let M=c([]);o.docInfoShow.method==="post"?j=j.concat(g):y=c(JSON.parse(JSON.stringify(g)));const Y=c();let H=c([]),Z=c(),F=c("form"),W=c("json"),ne=o.requestParamList.filter(S=>S.in==="body"),_e=c(JSON.parse(JSON.stringify(ne)));o.docInfoShow.consumes.indexOf("application/x-www-form-urlencoded")>=0?(F.value="formUrlEncode",H=c(JSON.parse(JSON.stringify(j)))):o.docInfoShow.consumes.indexOf("multipart/form-data")>=0?(F.value="form",M=c(JSON.parse(JSON.stringify(j)))):o.docInfoShow.consumes.indexOf("application/json")>=0?(F.value="row",W.value="json",H=c(JSON.parse(JSON.stringify(j))),j.length>0&&(F.value="formUrlEncode")):o.docInfoShow.consumes.indexOf("application/xml")>=0||o.docInfoShow.consumes.indexOf("text/xml")>=0?(F.value="row",W.value="xml",H=c(JSON.parse(JSON.stringify(j))),j.length>0&&(F.value="formUrlEncode")):M=c(JSON.parse(JSON.stringify(j))),M.value.length>0?u.value="urlParam":j.length>0||ne.length>0?u.value="bodyParam":x.length>0&&(u.value="headerParam");let $=c({}),B=c(!1),le=c({url:Ne()+"/doc-swagger/proxy/download",param:{}}),re=c(),se=o.docInfoShow.produces==="application/octet-stream";const ve=()=>{if(!i.value){fe.error("\u8BF7\u8F93\u5165\u8BF7\u6C42\u7684\u76EE\u6807URL\u5730\u5740");return}let S={};const J=new FormData;let ge=v.value.getSelectedRowKeys(),ie=y.value.filter(P=>ge.indexOf(P.key)>=0&&P.name&&P.value).map(P=>(S[P.name]=P.value,P.name+"="+encodeURIComponent(P.value))).join("&"),Pe=t.value.getSelectedRowKeys(),de=C.value.filter(P=>Pe.indexOf(P.key)>=0&&P.name&&P.value).map(P=>({code:P.name,value:P.value})),be=k.value.getSelectedRowKeys(),ue=A.value.filter(P=>be.indexOf(P.key)>=0&&P.name&&P.value).map(P=>({code:P.name,value:P.value})),ee=[];if(E.value){let P=E.value.getSelectedRowKeys();ee=M.value.filter(T=>P.indexOf(T.key)>=0&&T.name&&T.value).map(T=>(S[T.name]=T.value,{code:T.name,value:T.value}))}let te=[];if(Y.value){let P=Y.value.getSelectedRowKeys();te=H.value.filter(T=>P.indexOf(T.key)>=0&&T.name&&T.value).map(T=>(S[T.name]=T.value,{code:T.name,value:T.value}))}let ae="";Z.value&&(ae=Z.value.getParam());let Q=ie?i.value+"?"+ie:i.value;Object.keys(S).forEach(P=>{Q=Q.replace("{"+P+"}",S[P])}),se?(le.value.param={url:Q,host:a,method:o.docInfoShow.method,contentType:o.docInfoShow.consumes,headerParam:JSON.stringify(de),cookieParam:JSON.stringify(ue),formParam:JSON.stringify(ee),formEncodeParam:JSON.stringify(te),bodyParam:ae},setTimeout(()=>re.value.submit(),0)):(J.append("url",Q),J.append("host",a),J.append("method",o.docInfoShow.method),J.append("contentType",o.docInfoShow.consumes),J.append("headerParam",JSON.stringify(de)),J.append("cookieParam",JSON.stringify(ue)),J.append("formParam",JSON.stringify(ee)),J.append("formEncodeParam",JSON.stringify(te)),J.append("bodyParam",ae),B.value=!0,$.value={},je.requestUrl(J).then(P=>{$.value=P,B.value=!1}).catch(P=>{B.value=!1}))};let z=c(!0);return{docUrl:i,activePage:u,activePageChange:()=>{z.value=!0},requestLoading:B,sendRequest:ve,requestResult:$,consumesParamType:W,downloadFormParam:le,downloadFormRef:re,isDownloadRequest:se,urlParamRef:v,urlParamList:y,headerParamRef:t,headerParamList:C,cookieParamRef:k,cookieParamList:A,formParamRef:E,formParamList:M,formEncodeParamRef:Y,formEncodeParamList:H,bodyParamRef:Z,bodyParamType:F,bodyRowParamList:_e,responseCodeListColumns:[{title:"\u72B6\u6001\u7801",dataIndex:"code",width:100},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"desc"}],responseParamListColumns:[{title:"\u53C2\u6570\u540D",dataIndex:"name",width:250},{title:"\u7C7B\u578B",dataIndex:"type",width:250},{title:"\u8BF4\u660E",dataIndex:"description"}],queryParamVisible:z,hideQueryParam:()=>{z.value=!1},showQueryParam:()=>{z.value=!0}}}},wt={style:{"margin-bottom":"6px"}},xt=d("none"),kt=d("form-data"),Lt=d("x-www-form-urlencoded"),Ot=d("row"),It=d("JSON"),Tt=d("HTML"),Rt=d("XML"),Ct=d("JavaScript"),Dt=d("TEXT"),qt=d("\u6536\u8D77\u53C2\u6570"),Nt=d("\u5C55\u5F00\u53C2\u6570"),jt=["action"],Jt=["name","value"];function Et(o,n,f,e,h,a){const s=b("a-button"),i=b("a-input-search"),u=b("ParamTable"),v=b("a-tab-pane"),g=b("a-radio"),y=b("a-radio-group"),t=b("a-select-option"),p=b("a-select"),x=b("ParamBody"),_=b("a-tabs"),C=b("DocDebuggerResult");return m(),w("div",null,[r(i,{"addon-before":f.docInfoShow.method.toUpperCase(),value:e.docUrl,"onUpdate:value":n[0]||(n[0]=k=>e.docUrl=k),onSearch:e.sendRequest,placeholder:"\u8BF7\u8F93\u5165\u76EE\u6807URL\u5730\u5740"},{enterButton:l(()=>[r(s,{type:"primary",loading:e.requestLoading},{default:l(()=>[d(L(e.isDownloadRequest?"\u4E0B\u8F7D\u6587\u4EF6":"\u53D1\u9001\u8BF7\u6C42"),1)]),_:1},8,["loading"])]),_:1},8,["addon-before","value","onSearch"]),r(_,{activeKey:e.activePage,"onUpdate:activeKey":n[3]||(n[3]=k=>e.activePage=k),closable:"",onTabClick:e.activePageChange,style:{padding:"5px 10px 0"}},{rightExtra:l(()=>[e.queryParamVisible?(m(),R(s,{key:0,onClick:e.hideQueryParam,type:"link"},{default:l(()=>[qt]),_:1},8,["onClick"])):(m(),R(s,{key:1,onClick:e.showQueryParam,type:"link"},{default:l(()=>[Nt]),_:1},8,["onClick"]))]),default:l(()=>[r(v,{tab:"URL\u53C2\u6570",key:"urlParam",forceRender:""},{default:l(()=>[U(O("div",null,[r(u,{ref:"urlParamRef",paramList:e.urlParamList},null,8,["paramList"])],512),[[K,e.queryParamVisible]])]),_:1}),f.docInfoShow.method!=="get"?(m(),R(v,{tab:"Body\u53C2\u6570",key:"bodyParam",forceRender:""},{default:l(()=>[U(O("div",null,[O("div",wt,[r(y,{value:e.bodyParamType,"onUpdate:value":n[1]||(n[1]=k=>e.bodyParamType=k)},{default:l(()=>[r(g,{value:"none"},{default:l(()=>[xt]),_:1}),r(g,{value:"form"},{default:l(()=>[kt]),_:1}),r(g,{value:"formUrlEncode"},{default:l(()=>[Lt]),_:1}),r(g,{value:"row"},{default:l(()=>[Ot]),_:1})]),_:1},8,["value"]),e.bodyParamType==="row"?(m(),R(p,{key:0,value:e.consumesParamType,"onUpdate:value":n[2]||(n[2]=k=>e.consumesParamType=k),size:"small",style:{"margin-left":"10px","vertical-align":"top",width:"100px"}},{default:l(()=>[r(t,{value:"json"},{default:l(()=>[It]),_:1}),r(t,{value:"html"},{default:l(()=>[Tt]),_:1}),r(t,{value:"xml"},{default:l(()=>[Rt]),_:1}),r(t,{value:"javascript"},{default:l(()=>[Ct]),_:1}),r(t,{value:"text"},{default:l(()=>[Dt]),_:1})]),_:1},8,["value"])):D("",!0)]),U(O("div",null,[r(u,{ref:"formParamRef",paramList:e.formParamList,showType:""},null,8,["paramList"])],512),[[K,e.bodyParamType==="form"]]),U(O("div",null,[r(u,{ref:"formEncodeParamRef",paramList:e.formEncodeParamList},null,8,["paramList"])],512),[[K,e.bodyParamType==="formUrlEncode"]]),U(O("div",null,[r(x,{ref:"bodyParamRef",rowLang:e.consumesParamType,paramList:e.bodyRowParamList},null,8,["rowLang","paramList"])],512),[[K,e.bodyParamType==="row"]])],512),[[K,e.queryParamVisible]])]),_:1})):D("",!0),r(v,{tab:"Header\u53C2\u6570",key:"headerParam",forceRender:""},{default:l(()=>[U(O("div",null,[r(u,{ref:"headerParamRef",paramList:e.headerParamList},null,8,["paramList"])],512),[[K,e.queryParamVisible]])]),_:1}),r(v,{tab:"Cookie\u53C2\u6570",key:"cookieParam",forceRender:""},{default:l(()=>[U(O("div",null,[r(u,{ref:"cookieParamRef",paramList:e.cookieParamList},null,8,["paramList"])],512),[[K,e.queryParamVisible]])]),_:1})]),_:1},8,["activeKey","onTabClick"]),e.isDownloadRequest?D("",!0):(m(),R(C,{key:0,result:e.requestResult,loading:e.requestLoading},null,8,["result","loading"])),O("form",{method:"post",ref:"downloadFormRef",action:e.downloadFormParam.url,target:"_blank"},[(m(!0),w(q,null,Oe(e.downloadFormParam.param,(k,I)=>(m(),w("input",{type:"hidden",name:I,value:k},null,8,Jt))),256))],8,jt)])}var Ut=X(St,[["render",Et]]);const At={components:{DocContent:Ge,DocDebugger:Ut},setup(){const o=Ie(),n=ce();let f=c("doc"),e=c([]),h=c([]),a=c({url:"",description:"",method:"",consumes:"",produces:""}),s=c(!1),i=0,u;const v=()=>{let y=o.query.path+"."+o.query.method;if(Object.keys(n.state.openApiUrlMethodMap).length<=0){console.log("\u6587\u6863\u5C1A\u672A\u52A0\u8F7D\uFF0C\u7B49\u5F85\u52A0\u8F7D\u5B8C\u6210"),u||(u=setInterval(()=>{if(s.value||i++>50){clearInterval(u);return}Object.keys(n.state.openApiUrlMethodMap).length>0&&(console.log("\u6587\u6863\u5185\u5BB9\u6539\u53D8\uFF0C\u91CD\u65B0\u52A0\u8F7D\u6587\u6863"),v())},1e3));return}let t=n.state.openApiUrlMethodMap[y];if(!t){fe.error("\u6CA1\u6709\u627E\u5230\u5BF9\u5E94\u7684\u6587\u6863");return}s.value=!0,n.commit("addTableName",{key:o.fullPath,val:t.summary});let p="",x="";t.consumes&&t.consumes.length>0&&(p=t.consumes.join(" ")),t.produces&&t.produces.length>0&&(x=t.produces.join(" "));let _=Re.exports.markdownIt.render(t.description||t.summary||"");a.value={url:t.url,description:_,method:t.method||"",consumes:p,produces:x};let C=n.state.openApiDefinitions;e.value=pe.getRequestParamList(t.parameters,C),h.value=pe.getResponseParamList(t.responses,C)};return Te(()=>{v()}),{docInfoShow:a,activePage:f,changePage:()=>{},isLoadSuccess:s,requestParamList:e,responseParamList:h}}},Ft=O("div",{style:{padding:"20px 0",height:"100px"}},null,-1);function Kt(o,n,f,e,h,a){const s=b("DocContent"),i=b("a-tab-pane"),u=b("DocDebugger"),v=b("a-tabs"),g=b("a-spin");return e.isLoadSuccess?(m(),R(v,{key:0,activeKey:e.activePage,"onUpdate:activeKey":n[0]||(n[0]=y=>e.activePage=y),closable:"",onTabClick:e.changePage,style:{padding:"5px 10px 0"}},{default:l(()=>[r(i,{tab:"\u63A5\u53E3\u8BF4\u660E",key:"doc"},{default:l(()=>[r(s,{docInfoShow:e.docInfoShow,requestParamList:e.requestParamList,responseParamList:e.responseParamList},null,8,["docInfoShow","requestParamList","responseParamList"])]),_:1}),r(i,{tab:"\u5728\u7EBF\u8C03\u8BD5",key:"debug"},{default:l(()=>[r(u,{docInfoShow:e.docInfoShow,requestParamList:e.requestParamList,responseParamList:e.responseParamList},null,8,["docInfoShow","requestParamList","responseParamList"])]),_:1})]),_:1},8,["activeKey","onTabClick"])):(m(),R(g,{key:1,tip:"\u6587\u6863\u6570\u636E\u52A0\u8F7D\u4E2D..."},{default:l(()=>[Ft]),_:1}))}var Zt=X(At,[["render",Kt]]);export{Zt as default};
